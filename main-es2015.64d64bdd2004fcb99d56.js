(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},I74T:function(e,t,n){var o={"./en.auth.json":"4FNE","./en.common.json":"MoB1","./en.context.json":"N2Ms","./en.core.json":"mPxz","./en.geo.json":"/7uZ","./en.integration.json":"TSY2","./en.json":"Oh3F","./fr.auth.json":"qcjx","./fr.common.json":"O94P","./fr.context.json":"Z1WX","./fr.core.json":"wpjW","./fr.geo.json":"8ktl","./fr.integration.json":"Tzk/","./fr.json":"+etH"};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=i,e.exports=a,a.id="I74T"},RnhZ:function(e,t,n){var o={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-in":"7C5Q","./en-in.js":"7C5Q","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./en-sg":"t+mt","./en-sg.js":"t+mt","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fil":"1ppg","./fil.js":"1ppg","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-deva":"qvJo","./gom-deva.js":"qvJo","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./oc-lnc":"Fnuy","./oc-lnc.js":"Fnuy","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tk":"Wv91","./tk.js":"Wv91","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-mo":"OmwH","./zh-mo.js":"OmwH","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function a(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=i,e.exports=a,a.id="RnhZ"},crnd:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},zUnb:function(e,t,n){"use strict";n.r(t);var o=n("8Y7J");const a={production:!0,igo:{app:{forceCoordsNA:!1},catalog:{sources:[{id:"Gououvert",title:"Gouvouvert",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi"},{id:"glace",title:"Carte de glace",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/radarsat.fcgi",showLegend:!0}]},importExport:{url:"https://geoegl.msp.gouv.qc.ca/apis/ogre"},language:{prefix:"./locale/"},interactiveTour:{tourInMobile:!0,pathToConfigFile:"./config/interactiveTour.json"},searchSources:{nominatim:{available:!1},storedqueries:{available:!1},icherche:{searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche",order:2,params:{limit:"8"}},coordinatesreverse:{showInPointerSummary:!0},icherchereverse:{showInPointerSummary:!0,searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/terrapi",order:3,enabled:!0},ilayer:{searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche/layers",order:4,params:{limit:"5"}},cadastre:{enabled:!1}},projections:[{code:"EPSG:32198",alias:"Quebec Lambert",def:"+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-799574,45802,891595.4,1849567.5]},{code:"EPSG:3798",alias:"MTQ Lambert",def:"+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[31796.5834,158846.2231,1813323.4284,2141241.0978]}]}};n("yLV6");var i=n("cUpR"),s=n("iInd"),c=n("omvX"),r=n("0FwY"),l=n("f3B2"),p=n("HdQ8"),d=n("wdc6"),h=n("SVse"),u=n("Dxy4"),g=n("Tj54"),m=n("q7Ft"),f=n("ZFy/"),b=n("iELJ"),x=n("NDON"),w=n("WXI3");class v{}v.\u0275mod=o.gc({type:v}),v.\u0275inj=o.fc({factory:function(e){return new(e||v)},imports:[[h.c]]});var O=n("SqCe"),S=n("rJgo"),y=n("ZTz/");class C{}C.\u0275mod=o.gc({type:C}),C.\u0275inj=o.fc({factory:function(e){return new(e||C)},imports:[[h.c,u.c,g.b,S.c,O.e,y.b,r.f,l.x]]});var j=n("8Qe2");class P{}P.\u0275mod=o.gc({type:P}),P.\u0275inj=o.fc({factory:function(e){return new(e||P)},imports:[[h.c,j.b,g.b,u.c,f.b,S.c,r.f,l.P,l.R,l.v,d.A,d.M]]});class k{}k.\u0275mod=o.gc({type:k}),k.\u0275inj=o.fc({factory:function(e){return new(e||k)},imports:[[h.c,g.b,u.c,m.d,f.b,r.f,l.P,l.H,x.j,l.S,d.A,l.L]]});class M{}M.\u0275mod=o.gc({type:M}),M.\u0275inj=o.fc({factory:function(e){return new(e||M)},imports:[[h.c,g.b,u.c,r.f,l.P,l.R]]});var F=n("s7LF"),z=n("l0rg");class _{}_.\u0275mod=o.gc({type:_}),_.\u0275inj=o.fc({factory:function(e){return new(e||_)},imports:[[r.f,h.c,F.m,b.g,l.L,l.C,u.c,f.b,g.b,z.b]]});class E{}E.\u0275mod=o.gc({type:E}),E.\u0275inj=o.fc({factory:function(e){return new(e||E)},imports:[[h.c,f.b,u.c,g.b,m.d,b.g,r.d,d.A,d.D,d.G,d.K.forRoot(),d.L.forRoot(),l.v,l.U,l.E,d.C,l.P,l.S,l.B,l.x,l.H,w.d,C,P,M,k,v,x.j,x.k,l.F,l.G,l.L,_]]});var $=n("1uah"),T=n("lJxs"),B=n("nBTs"),I=n("2Vo4"),R=n("LRne"),A=n("Zy1z"),L=n("Kj3r"),W=n("IzEk"),U=n("JW8z"),D=n("GS7A");class V{constructor(e,t){this.configService=e,this.storageService=t,this.igoVersionDifferentFromStorage=!1,this.igoVersionDifferentFromStorage=this.isVersionDifferentFromStorage(),this.setStorageConfig()}setStorageConfig(){this.nbVisit=Number(this.storageService.get("welcomeWindow_nbVisit")),this.nbVisit||(this.nbVisit=0),this.storageService.set("welcomeWindow_nbVisit",this.nbVisit+=1),this.storageService.set("version",this.configService.getConfig("version.lib"))}isVersionDifferentFromStorage(){return!(!this.storageService.get("version")||this.storageService.get("version")===this.configService.getConfig("version.lib"))}hasWelcomeWindow(){return!1===this.storageService.get("welcomeWindow_showAgain")||"false"===this.storageService.get("welcomeWindow_showAgain")?(this.nbVisit>=this.configService.getConfig("welcomeWindow.nbVisitToShowAgain")||!(!this.configService.getConfig("welcomeWindow.showAgainOnNewIGOVersion")||!this.igoVersionDifferentFromStorage))&&(this.storageService.set("welcomeWindow_nbVisit",0),this.storageService.remove("welcomeWindow_showAgain"),!0):void 0!==this.configService.getConfig("welcomeWindow.nbVisitToShow")&&this.nbVisit>this.configService.getConfig("welcomeWindow.nbVisitToShow")?(this.storageService.set("welcomeWindow_showAgain",!1),!1):this.configService.getConfig("welcomeWindow")}getConfig(){const e=new b.e;return e.disableClose=!0,e.autoFocus=!0,e.maxWidth="500px",e.position={top:"150px"},e}afterClosedWelcomeWindow(){this.storageService.set("welcomeWindow_showAgain",this.showAgain)}}V.\u0275fac=function(e){return new(e||V)(o.sc(r.c),o.sc(r.q))},V.\u0275prov=o.ec({token:V,factory:V.\u0275fac,providedIn:"root"});var Y=n("TSSN");function N(e,t){if(1&e){const e=o.pc();o.oc(0,"div",1),o.oc(1,"mat-toolbar",2),o.oc(2,"h2"),o.ad(3),o.Ac(4,"translate"),o.nc(),o.jc(5,"span",3),o.oc(6,"label"),o.oc(7,"input",4),o.vc("ngModelChange",(function(t){o.Pc(e);return o.zc().showAgain=t}))("click",(function(){o.Pc(e);return o.zc().setShowAgain()})),o.nc(),o.ad(8),o.Ac(9,"translate"),o.nc(),o.nc(),o.oc(10,"div",5),o.jc(11,"igo-custom-html",6),o.Ac(12,"async"),o.nc(),o.jc(13,"p"),o.oc(14,"div",7),o.oc(15,"igo-interactive-tour",8),o.vc("click",(function(){o.Pc(e);return o.zc().closeWelcomeWindow()})),o.nc(),o.oc(16,"button",9),o.ad(17),o.Ac(18,"translate"),o.nc(),o.nc(),o.nc()}if(2&e){const e=o.zc();o.Ub(3),o.bd(o.Bc(4,6,"welcomeWindow.title")),o.Ub(4),o.Fc("ngModel",e.showAgain),o.Ub(1),o.cd(" ",o.Bc(9,8,"welcomeWindow.notShowCheck")," "),o.Ub(3),o.Fc("html",o.Bc(12,10,e.html$)),o.Ub(4),o.Fc("discoverTitleInLocale$",e.discoverTitleInLocale$),o.Ub(2),o.bd(o.Bc(18,12,"welcomeWindow.closeButton"))}}class q{constructor(e,t,n,o){this.dialog=e,this.welcomeWindowService=t,this.configService=n,this.languageService=o,this.showAgain=!1,this.discoverTitleInLocale$=Object(R.a)(this.configService.getConfig("title")),this.html$=new I.a(void 0)}ngOnInit(){this.computeHtml()}closeWelcomeWindow(){this.dialog.closeAll()}computeHtml(){let e=0,t=!0,n=new Date(this.configService.getConfig("version.releaseDate"));const o=this.configService.getConfig("version.releaseDateApp");if(o){const a=new Date(o);isNaN(a.getDate())?(console.log("The releaseDateApp config is not a valid date format"),t=!1):(e=1,n=a)}let a="";if(t){let t=n.getDate()+e;t<10&&(t="0"+t);let o=n.getMonth()+1;o<10&&(o="0"+o);const i=n.getFullYear();a=`${i}-${o}-${t}`}else a=o;return this.title$$=this.languageService.translate.get(this.configService.getConfig("title")||"").pipe(Object(T.a)(e=>this.languageService.translate.instant("welcomeWindow.html",{title:e,description:this.configService.getConfig("description")||"",version:this.configService.getConfig("version.app")||this.configService.getConfig("version.lib")||"",releaseDate:a||""}))).subscribe(e=>this.html$.next(e)),this.html$}setShowAgain(){this.welcomeWindowService.showAgain=this.showAgain}ngOnDestroy(){this.title$$&&this.title$$.unsubscribe()}}q.\u0275fac=function(e){return new(e||q)(o.ic(b.b),o.ic(V),o.ic(r.c),o.ic(r.h))},q.\u0275cmp=o.cc({type:q,selectors:[["app-welcome-window"]],decls:2,vars:3,consts:[["class","welcome-window",4,"ngIf"],[1,"welcome-window"],["color","primary"],[1,"spacer"],["id","doNotShowCheck","type","checkbox",3,"ngModel","ngModelChange","click"],["mat-dialog-content","",1,"text"],[1,"mat-typography",3,"html"],[1,"button-container"],["id","tour-button","styleButton","raised",3,"discoverTitleInLocale$","click"],["mat-raised-button","","color","primary","mat-dialog-close","",1,"button-close"]],template:function(e,t){1&e&&(o.Yc(0,N,19,14,"div",0),o.Ac(1,"async")),2&e&&o.Fc("ngIf",o.Bc(1,1,t.html$))},directives:[h.t,z.a,F.a,F.s,F.v,b.f,l.j,l.V,u.b,b.d],pipes:[h.b,Y.e],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}#doNotShowCheck[_ngcontent-%COMP%]{margin-right:5px}"]});var Q=n("IheW");function X(e,t){if(1&e){const e=o.pc();o.oc(0,"button",9),o.vc("click",(function(){o.Pc(e);return o.zc().onUnselectButtonClick()})),o.Ac(1,"translate"),o.jc(2,"mat-icon",10),o.nc()}2&e&&o.Fc("matTooltip",o.Bc(1,1,"igo.context.sidenav.mainMenu"))}function Z(e,t){if(1&e){const e=o.pc();o.oc(0,"button",11),o.vc("click",(function(){o.Pc(e);return o.zc().onPreviousButtonClick()})),o.Ac(1,"translate"),o.jc(2,"mat-icon",12),o.nc()}2&e&&o.Fc("matTooltip",o.Bc(1,1,"igo.context.sidenav.goBack"))}const H=function(e){return{toolActivated:e}};class G{constructor(e,t,n){this.toolState=e,this.configService=t,this.catalogState=n,this.title$=new I.a(void 0),this.openedChange=new o.v,this.toolChange=new o.v}get map(){return this._map}set map(e){this._map=e}get opened(){return this._opened}set opened(e){e!==this._opened&&(this._opened=e,this.openedChange.emit(this._opened))}get toolbox(){return this.toolState.toolbox}ngOnInit(){this.activeTool$$=this.toolbox.activeTool$.subscribe(e=>{const t=this.configService.getConfig("sidenavTitle")||"IGO";if(e)if("catalogBrowser"===e.name)for(const n of this.catalogState.catalogStore.all())!0===this.catalogState.catalogStore.state.get(n).selected&&this.title$.next(n.title);else if("activeTimeFilter"===e.name||"activeOgcFilter"===e.name)for(const n of this.map.layers)!0===n.options.active&&this.title$.next(n.title);else this.title$.next(e.title);else this.title$.next(t);this.toolChange.emit(e)})}ngOnDestroy(){this.activeTool$$.unsubscribe()}onPreviousButtonClick(){this.toolbox.activatePreviousTool()}onUnselectButtonClick(){this.toolbox.deactivateTool()}}G.\u0275fac=function(e){return new(e||G)(o.ic(w.i),o.ic(r.c),o.ic(w.b))},G.\u0275cmp=o.cc({type:G,selectors:[["app-sidenav"]],inputs:{map:"map",opened:"opened"},outputs:{openedChange:"openedChange",toolChange:"toolChange"},decls:14,vars:20,consts:[["mode","side",3,"autoFocus","opened","openedChange"],[1,"app-sidenav-content"],[1,"app-content",3,"ngClass"],["content",""],["id","homeButton","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],[3,"title"],["mat-icon-button","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["panelRightButton","","styleButton","icon"],["color","primary",1,"igo-toolbox",3,"animate","toolbox"],["id","homeButton","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","click"],["svgIcon","home"],["mat-icon-button","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","click"],["svgIcon","arrow-left"]],template:function(e,t){1&e&&(o.oc(0,"mat-sidenav",0),o.vc("openedChange",(function(e){return t.opened=e})),o.oc(1,"div",1),o.oc(2,"div",2,3),o.Ac(4,"async"),o.Yc(5,X,3,3,"button",4),o.Ac(6,"async"),o.oc(7,"igo-panel",5),o.Ac(8,"translate"),o.Ac(9,"async"),o.Yc(10,Z,3,3,"button",6),o.Ac(11,"async"),o.jc(12,"igo-interactive-tour",7),o.jc(13,"igo-toolbox",8),o.nc(),o.nc(),o.nc(),o.nc()),2&e&&(o.Fc("autoFocus",!1)("opened",t.opened),o.Ub(2),o.Fc("ngClass",o.Ic(18,H,o.Bc(4,8,t.toolbox.activeTool$))),o.Ub(3),o.Fc("ngIf",o.Bc(6,10,t.toolbox.activeTool$)),o.Ub(2),o.Fc("title",o.Bc(8,12,o.Bc(9,14,t.title$))),o.Ub(3),o.Fc("ngIf",o.Bc(11,16,t.toolbox.activeTool$)),o.Ub(3),o.Fc("animate",!0)("toolbox",t.toolbox))},directives:[m.a,h.q,h.t,l.Z,l.V,l.ib,u.b,f.a,g.a],pipes:[h.b,Y.e],styles:["mat-sidenav[_ngcontent-%COMP%]{-o-box-shadow:2px 2px 2px 0 #ddd;box-shadow:2px 2px 2px 0 #ddd}[_nghost-%COMP%]{background-color:#fff}[_nghost-%COMP%]     mat-sidenav{z-index:3!important}mat-sidenav[_ngcontent-%COMP%]{height:100%;width:400px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){mat-sidenav[_ngcontent-%COMP%]{width:calc(100% - 40px - 5px);max-width:400px}}.app-content[_ngcontent-%COMP%], igo-panel[_ngcontent-%COMP%]{height:100%}.app-sidenav-content[_ngcontent-%COMP%]{margin-top:50px;height:calc(100% - 50px)}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-sidenav-content[_ngcontent-%COMP%]{height:calc(100% - 50px)}}igo-panel[_ngcontent-%COMP%]     .igo-panel-content{position:relative}div.toolActivated[_ngcontent-%COMP%] > igo-panel[_ngcontent-%COMP%]    >div.igo-panel-header{margin-left:50px;position:relative}#homeButton[_ngcontent-%COMP%]{position:absolute;top:50px;left:0;color:#fff;border-radius:0;height:46px;width:48px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-toolbox[_ngcontent-%COMP%]{overflow:auto}}"],changeDetection:0});const J=function(e){return{width:e}};function K(e,t){if(1&e&&(o.mc(0),o.jc(1,"img",6),o.lc()),2&e){const e=o.zc(2).$implicit;o.Ub(1),o.Fc("src",e.imgSrc,o.Sc)("alt",e.alt)("ngStyle",o.Ic(3,J,e.imgSize))}}function ee(e,t){if(1&e&&(o.oc(0,"a",4),o.ad(1),o.Yc(2,K,2,5,"ng-container",5),o.nc()),2&e){const e=o.zc().$implicit;o.Fc("href",e.link,o.Sc),o.Ub(1),o.cd(" ",e.text," "),o.Ub(1),o.Fc("ngIf",e.imgSrc)}}function te(e,t){if(1&e&&(o.mc(0),o.jc(1,"img",6),o.lc()),2&e){const e=o.zc(2).$implicit;o.Ub(1),o.Fc("src",e.imgSrc,o.Sc)("alt",e.alt)("ngStyle",o.Ic(3,J,e.imgSize))}}function ne(e,t){if(1&e&&(o.ad(0),o.Yc(1,te,2,5,"ng-container",5)),2&e){const e=o.zc().$implicit;o.cd(" ",e.text," "),o.Ub(1),o.Fc("ngIf",e.imgSrc)}}function oe(e,t){if(1&e&&(o.mc(0),o.oc(1,"div",1),o.Yc(2,ee,3,3,"a",2),o.Yc(3,ne,2,2,"ng-template",null,3,o.Zc),o.nc(),o.lc()),2&e){const e=t.$implicit,n=o.Mc(4);o.Ub(1),o.Xc("position",e.fixed?"fixed":"absolute")("margin-left",e.marginLeft)("margin-right",e.marginRight)("margin-top",e.marginTop)("margin-bottom",e.marginBottom)("font-size",e.fontSize),o.Fc("ngClass",e.cssClass),o.Ub(1),o.Fc("ngIf",e.link)("ngIfElse",n)}}class ae{constructor(e,t,n){this.contextService=e,this.mediaService=t,this.configService=n,this.mapOverlay=[]}ngAfterViewInit(){this.context$$=this.contextService.context$.subscribe(e=>{this.handleContextChange(e),this.context=e}),this.media$$=this.mediaService.media$.subscribe(e=>this.handleContextChange(this.context))}ngOnDestroy(){this.context$$.unsubscribe(),this.media$$.unsubscribe()}handleContextChange(e){let t=[];if(void 0!==e){this.mapOverlay=[],e.mapOverlay?t=e.mapOverlay:this.configService.getConfig("mapOverlay")&&(t=this.configService.getConfig("mapOverlay"));for(const e of t)(!e.media&&"desktop"===this.mediaService.getMedia()||e.media&&e.media.includes(this.mediaService.getMedia()))&&this.mapOverlay.push(e)}}}ae.\u0275fac=function(e){return new(e||ae)(o.ic(x.h),o.ic(r.k),o.ic(r.c))},ae.\u0275cmp=o.cc({type:ae,selectors:[["app-map-overlay"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mapOverlayDefault",3,"ngClass"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["templateNoLink",""],["target","_blank",3,"href"],[4,"ngIf"],[3,"src","alt","ngStyle"]],template:function(e,t){1&e&&o.Yc(0,oe,5,15,"ng-container",0),2&e&&o.Fc("ngForOf",t.mapOverlay)},directives:[h.s,h.q,h.t,h.w],styles:["[_nghost-%COMP%]{height:100%;top:0;left:0;right:0;position:fixed;pointer-events:none}.mapOverlayDefault[_ngcontent-%COMP%]{position:absolute;white-space:nowrap;pointer-events:auto}.bottom-right[_ngcontent-%COMP%]{bottom:0;right:0}.top-right[_ngcontent-%COMP%]{top:0;right:0}.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0}.top-left[_ngcontent-%COMP%]{top:0;left:0}.bottom-center[_ngcontent-%COMP%]{bottom:0}.bottom-center[_ngcontent-%COMP%], .top-center[_ngcontent-%COMP%]{left:50%;transform:translate(-50%)}.top-center[_ngcontent-%COMP%]{top:0}.center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%)}.center-right[_ngcontent-%COMP%]{top:50%;right:0}.center-left[_ngcontent-%COMP%]{top:50%;left:0}"]});class ie{constructor(){this.openedChange=new o.v}set opened(e){e!==this._opened&&(this._opened=e,this.openedChange.emit(this._opened))}get opened(){return this._opened}get hasOpenedClass(){return this.opened}get displayStyle(){return this.withHeader||this.opened?"visible":"hidden"}}function se(e,t){1&e&&o.jc(0,"mat-icon",5)}function ce(e,t){1&e&&o.jc(0,"mat-icon",6)}ie.\u0275fac=function(e){return new(e||ie)},ie.\u0275cmp=o.cc({type:ie,selectors:[["app-toast-panel-for-expansion"]],hostVars:4,hostBindings:function(e,t){2&e&&(o.Xc("visibility",t.displayStyle),o.Zb("toast-panel-for-expansion-opened",t.hasOpenedClass))},inputs:{opened:"opened",title:"title",withHeader:"withHeader"},outputs:{openedChange:"openedChange"},ngContentSelectors:["*"],decls:4,vars:3,consts:[[3,"title","withHeader"],["content",""]],template:function(e,t){1&e&&(o.Ec(),o.oc(0,"igo-panel",0),o.oc(1,"div",null,1),o.Dc(3),o.nc(),o.nc()),2&e&&(o.Fc("title",t.title)("withHeader",t.withHeader),o.Ub(1),o.Fc("@showContent",t.opened))},directives:[l.Z],styles:["[_nghost-%COMP%]{-o-box-shadow:0 0 2px 0 #ddd;box-shadow:0 0 2px 0 #ddd;background-color:#fff;height:48px;max-height:329px;transition:height .28s cubic-bezier(.4,0,.2,1);padding:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]{max-height:40%}}.toast-panel-for-expansion-opened[_nghost-%COMP%]{height:329px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.toast-panel-for-expansion-opened[_nghost-%COMP%]{height:40%}}igo-panel[_ngcontent-%COMP%]{position:relative;height:100%}igo-panel[_ngcontent-%COMP%]     .igo-panel-header:hover{cursor:pointer}div[igostoppropagation][_ngcontent-%COMP%]{height:100%;width:100%}"],data:{animation:[function(e="50ms",t="280ms",n="ease-in-out"){return Object(D.n)("showContent",[Object(D.k)("true",Object(D.l)({opacity:1,display:"block"})),Object(D.k)("false",Object(D.l)({opacity:0,display:"none"})),Object(D.m)("false => true",Object(D.e)(`${e} ${t} ${n}`)),Object(D.m)("true => false",Object(D.e)("0ms"))])}()]},changeDetection:0});class re{constructor(){this.expandedChange=new o.v}get expanded(){return this._expanded}set expanded(e){e!==this._expanded&&(this._expanded=e,this.expandedChange.emit(this._expanded))}get hasExpandedClass(){return this.expanded}onToggleClick(){this.expanded=!this.expanded}}re.\u0275fac=function(e){return new(e||re)},re.\u0275cmp=o.cc({type:re,selectors:[["app-expansion-panel-header"]],hostVars:2,hostBindings:function(e,t){2&e&&o.Zb("app-expansion-panel-header-expanded",t.hasExpandedClass)},inputs:{expanded:"expanded"},outputs:{expandedChange:"expandedChange"},ngContentSelectors:["*"],decls:7,vars:2,consts:[[1,"app-expansion-panel-trigger-container"],["mat-icon-button","","color","primary",3,"click"],["svgIcon","launch",4,"ngIf"],["style","transform: rotate(180deg)","svgIcon","launch",4,"ngIf"],[1,"app-expansion-panel-content"],["svgIcon","launch"],["svgIcon","launch",2,"transform","rotate(180deg)"]],template:function(e,t){1&e&&(o.Ec(),o.oc(0,"div"),o.oc(1,"div",0),o.oc(2,"button",1),o.vc("click",(function(){return t.onToggleClick()})),o.Yc(3,se,1,0,"mat-icon",2),o.Yc(4,ce,1,0,"mat-icon",3),o.nc(),o.nc(),o.oc(5,"div",4),o.Dc(6),o.nc(),o.nc()),2&e&&(o.Ub(3),o.Fc("ngIf",!t.expanded),o.Ub(1),o.Fc("ngIf",t.expanded))},directives:[u.b,h.t,g.a],styles:["[_nghost-%COMP%]{display:block;height:calc(40px + 10px);border-bottom:2px solid #f0f8ff}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{display:flex}.app-expansion-panel-content[_ngcontent-%COMP%], .app-expansion-panel-trigger-container[_ngcontent-%COMP%]{display:contents}"],changeDetection:0});const le=[[["","expansionPanelHeader",""]],"*"];class pe{constructor(){this.maximized=!1,this.expandedChange=new o.v}get expanded(){return this._expanded}set expanded(e){e!==this._expanded&&(this._expanded=e,this.expandedChange.emit(this._expanded))}get backdropShown(){return this._backdropShown}set backdropShown(e){this._backdropShown=e}get hasExpandedClass(){return this.expanded&&!this.maximized}get hasExpandedFullClass(){return this.expanded&&this.maximized}onBackdropClick(){this.expanded=!1,this.backdropShown=!1}}pe.\u0275fac=function(e){return new(e||pe)},pe.\u0275cmp=o.cc({type:pe,selectors:[["app-expansion-panel"]],hostVars:4,hostBindings:function(e,t){2&e&&o.Zb("app-expansion-panel-expanded",t.hasExpandedClass)("app-expansion-panel-expanded-maximized",t.hasExpandedFullClass)},inputs:{expanded:"expanded",maximized:"maximized",backdropShown:"backdropShown"},outputs:{expandedChange:"expandedChange"},ngContentSelectors:["[expansionPanelHeader]","*"],decls:7,vars:3,consts:[[1,"app-expansion-panel-container"],[3,"shown","click"],[3,"expanded","expandedChange"],[1,"app-expansion-panel-content","mat-elevation-z4"]],template:function(e,t){1&e&&(o.Ec(le),o.oc(0,"div"),o.oc(1,"div",0),o.oc(2,"igo-backdrop",1),o.vc("click",(function(){return t.onBackdropClick()})),o.nc(),o.oc(3,"app-expansion-panel-header",2),o.vc("expandedChange",(function(e){return t.expanded=e})),o.Dc(4),o.nc(),o.oc(5,"div",3),o.Dc(6,1),o.nc(),o.nc(),o.nc()),2&e&&(o.Ub(2),o.Fc("shown",t.backdropShown),o.Ub(1),o.Fc("expanded",t.expanded),o.Ub(2),o.Fc("@showContent",t.expanded))},directives:[l.d,re],styles:["[_nghost-%COMP%]{-o-box-shadow:0 0 2px 0 #ddd;box-shadow:0 0 2px 0 #ddd;display:block;background-color:#fff;height:40px;width:40px;transition:height .2s cubic-bezier(.4,0,.2,1),width .2s cubic-bezier(.4,0,.2,1)}.app-expansion-panel-container[_ngcontent-%COMP%]{height:100%;width:100%}.app-expansion-panel-expanded[_nghost-%COMP%]{height:281px;width:100%;z-index:6}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-expansion-panel-expanded.footer[_nghost-%COMP%]{margin-bottom:48px}}.app-expansion-panel-expanded-maximized[_nghost-%COMP%]{height:496px;width:100%;z-index:6}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-expansion-panel-expanded-maximized.footer[_nghost-%COMP%]{margin-bottom:48px}}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:100%;width:100%}.app-expansion-panel-content[_ngcontent-%COMP%]{height:calc(100% - calc(40px + 10px));overflow:auto;padding:5px}igo-backdrop[_ngcontent-%COMP%]    >div{z-index:120!important}.app-expansion-panel-content[_ngcontent-%COMP%]     .igo-entity-table-with-selection{width:100%}"],data:{animation:[function(e="150ms",t="300ms",n="ease-in-out"){return Object(D.n)("showContent",[Object(D.k)("true",Object(D.l)({opacity:1,display:"block"})),Object(D.k)("false",Object(D.l)({opacity:0,display:"none"})),Object(D.m)("false => true",Object(D.e)(`${e} ${t} ${n}`)),Object(D.m)("true => false",Object(D.e)("0ms"))])}()]},changeDetection:0});var de=n("itXk"),he=n("vkgz"),ue=n("ouHB"),ge=n("TN97"),me=n("9ANI");function fe(e,t){if(1&e){const e=o.pc();o.oc(0,"button",14),o.vc("click",(function(){o.Pc(e);return o.zc(3).previousResult()})),o.Ac(1,"translate"),o.jc(2,"mat-icon",15),o.nc()}if(2&e){const e=o.zc(3);o.Fc("disabled",e.results[0].meta.id===e.resultSelected$.value.meta.id)("matTooltip",o.Bc(1,2,"toastPanel.previousFeatureTooltip"))}}function be(e,t){if(1&e){const e=o.pc();o.oc(0,"button",16),o.vc("click",(function(){o.Pc(e);return o.zc(3).nextResult()})),o.Ac(1,"translate"),o.jc(2,"mat-icon",17),o.nc()}if(2&e){const e=o.zc(3);o.Fc("disabled",e.results[e.results.length-1].meta.id===e.resultSelected$.value.meta.id)("matTooltip",o.Bc(1,2,"toastPanel.nextFeatureTooltip"))}}function xe(e,t){if(1&e){const e=o.pc();o.oc(0,"button",18),o.vc("click",(function(){o.Pc(e);return o.zc(3).zoomTo()})),o.Ac(1,"translate"),o.Ac(2,"async"),o.jc(3,"mat-icon",19),o.Ac(4,"async"),o.Ac(5,"async"),o.nc()}if(2&e){const e=o.zc(3);o.Fc("matTooltip",o.Bc(1,3,o.Bc(2,5,e.isSelectedResultOutOfView$)?"toastPanel.zoomOnFeatureTooltipOutOfView":"toastPanel.zoomOnFeatureTooltip")),o.Ub(3),o.Fc("matBadge",o.Bc(4,7,e.isSelectedResultOutOfView$)?"!":"")("matBadgeHidden",!o.Bc(5,9,e.isSelectedResultOutOfView$))}}function we(e,t){if(1&e&&o.jc(0,"igo-feature-details",20),2&e){const e=o.zc(3);o.Fc("feature",e.resultSelected$.value.data)}}function ve(e,t){if(1&e){const e=o.pc();o.oc(0,"igo-search-results",21),o.vc("resultFocus",(function(t){o.Pc(e);return o.zc(3).focusResult(t)}))("resultUnfocus",(function(t){o.Pc(e);return o.zc(3).unfocusResult(t,!0)}))("resultMouseenter",(function(t){o.Pc(e);return o.zc(3).focusResult(t)}))("resultMouseleave",(function(t){o.Pc(e);return o.zc(3).unfocusResult(t)}))("resultSelect",(function(t){o.Pc(e);return o.zc(3).selectResult(t)})),o.nc()}if(2&e){const e=o.zc(3);o.Fc("map",e.map)("store",e.store)("showIcons",!0)("withZoomButton",e.withZoomButton)}}function Oe(e,t){if(1&e){const e=o.pc();o.oc(0,"igo-panel",3),o.vc("click",(function(t){o.Pc(e);return o.zc(2).onToggleClick(t)}))("keydown",(function(t){o.Pc(e);return o.zc(2).handleKeyboardEvent(t)})),o.Ac(1,"translate"),o.jc(2,"igo-actionbar",4),o.Yc(3,fe,3,4,"button",5),o.Yc(4,be,3,4,"button",6),o.Yc(5,xe,6,11,"button",7),o.oc(6,"button",8),o.vc("click",(function(){o.Pc(e);return o.zc(2).clear()})),o.jc(7,"mat-icon",9),o.nc(),o.oc(8,"div",10,11),o.Yc(10,we,1,1,"igo-feature-details",12),o.Yc(11,ve,1,4,"igo-search-results",13),o.nc(),o.nc()}if(2&e){const e=o.zc(2);o.Fc("title",e.resultSelected$.value?e.getTitle(e.resultSelected$.value):o.Bc(1,12,"toastPanel.title")),o.Ub(2),o.Fc("store",e.actionStore)("withIcon",!0)("icon",e.icon)("withTitle","overlay"===e.actionbarMode)("horizontal",!0)("mode",e.actionbarMode),o.Ub(1),o.Fc("ngIf",e.resultSelected$.value),o.Ub(1),o.Fc("ngIf",e.resultSelected$.value),o.Ub(1),o.Fc("ngIf",e.resultSelected$.value),o.Ub(5),o.Fc("ngIf",e.resultSelected$.value),o.Ub(1),o.Fc("ngIf",!e.resultSelected$.value)}}function Se(e,t){if(1&e&&(o.Yc(0,Oe,12,14,"igo-panel",2),o.Ac(1,"async")),2&e){const e=o.zc();o.Fc("ngIf",o.Bc(1,1,e.store.entities$))}}function ye(e,t){}function Ce(e,t){if(1&e){const e=o.pc();o.oc(0,"div",22),o.vc("swipeleft",(function(t){o.Pc(e);return o.zc().swipe(t.type)}))("swiperight",(function(t){o.Pc(e);return o.zc().swipe(t.type)}))("swipeup",(function(t){o.Pc(e);return o.zc().swipe(t.type)}))("swipedown",(function(t){o.Pc(e);return o.zc().swipe(t.type)})),o.Yc(1,ye,0,0,"ng-template",23),o.nc()}if(2&e){o.zc();const e=o.Mc(1);o.Ub(1),o.Fc("ngTemplateOutlet",e)}}class je{constructor(e,t,n){this.mediaService=e,this.languageService=t,this.storageState=n,this._opened=!0,this.hasFeatureEmphasisOnSelection=!1,this._zoomAuto=!1,this._fullExtent=!1,this.fullExtent$=new I.a(this.fullExtent),this.icon="menu",this.actionStore=new l.a([]),this.actionbarMode=l.c.Overlay,this.multiple$=new I.a(!1),this.isResultSelected$=new I.a(!1),this.isSelectedResultOutOfView$=new I.a(!1),this.initialized=!0,this.format=new ue.a,this.focusedResult$=new I.a(void 0),this.withZoomButton=!0,this.zoomAuto$=new I.a(!1),this.openedChange=new o.v,this.fullExtentEvent=new o.v,this.resultSelected$=new I.a(void 0),this.opened=this.storageService.get("toastOpened"),this.zoomAuto=this.storageService.get("zoomAuto"),this.fullExtent=this.storageService.get("fullExtent")}get storageService(){return this.storageState.storageService}get map(){return this._map}set map(e){this._map=e}get store(){return this._store}set store(e){this._store=e,this.store.entities$.subscribe(e=>{this.unselectResult()})}get opened(){return this._opened}set opened(e){e===!this._opened&&(this._opened=e,this.storageService.set("toastOpened",e,r.p.SESSION),this.openedChange.emit(e))}get zoomAuto(){return this._zoomAuto}set zoomAuto(e){e===!this._zoomAuto&&(this._zoomAuto=e,this.zoomAuto$.next(e),this.storageService.set("zoomAuto",e))}get fullExtent(){return this._fullExtent}set fullExtent(e){e===!this._fullExtent&&(this._fullExtent=e,this.fullExtent$.next(e),this.fullExtentEvent.emit(e),this.storageService.set("fullExtent",e))}get hasOpenedClass(){return this.opened}get hasFullCollapsedClass(){return!this.opened&&this.fullExtent}get displayStyle(){return this.results.length?(1===this.results.length&&this.initialized&&this.selectResult(this.results[0]),"visible"):"hidden"}get hasFullOpenedClass(){return this.opened&&this.fullExtent}onEscapeHandler(e){this.clear()}onBackHandler(e){this.unselectResult()}onZoomHandler(e){if(!0===this.isResultSelected$.getValue()){const e=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});Object(d.Xb)(this.map,[e],d.p.Default)}}get results(){return this.store.all()}get multiple(){return this.results.length?this.multiple$.next(!0):this.multiple$.next(!1),this.multiple$}monitorResultOutOfView(){this.isSelectedResultOutOfView$$=Object(de.a)([this.map.viewController.state$,this.resultSelected$]).pipe(Object(L.a)(100)).subscribe(e=>{const t=e[1];if(!t)return void this.isSelectedResultOutOfView$.next(!1);const n=Object(d.Mb)(t.data,this.map.projection),o=Object(d.Ib)(this.map,[n]);this.isSelectedResultOutOfView$.next(Object(d.Ob)(this.map,o))})}ngOnInit(){let e,t;this.store.entities$.subscribe(()=>{this.initialized=!0}),this.monitorResultOutOfView(),this.hasFeatureEmphasisOnSelection&&(this.resultOrResolution$$=Object(de.a)([this.focusedResult$.pipe(Object(he.a)(n=>{e=n,t="focused"})),this.resultSelected$.pipe(Object(he.a)(n=>{e=n,t="selected"})),this.map.viewController.resolution$,this.store.entities$]).subscribe(()=>this.buildResultEmphasis(e,t))),this.actionStore.load([{id:"list",title:this.languageService.translate.instant("toastPanel.backToList"),icon:"format-list-bulleted-square",tooltip:this.languageService.translate.instant("toastPanel.listButton"),display:()=>this.isResultSelected$,handler:()=>{this.unselectResult()}},{id:"zoomFeature",title:this.languageService.translate.instant("toastPanel.zoomOnFeature"),icon:"magnify-plus-outline",tooltip:this.languageService.translate.instant("toastPanel.zoomOnFeatureTooltip"),display:()=>this.isResultSelected$,handler:()=>{const e=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});Object(d.Xb)(this.map,[e],d.p.Zoom)}},{id:"zoomResults",title:this.languageService.translate.instant("toastPanel.zoomOnFeatures"),tooltip:this.languageService.translate.instant("toastPanel.zoomOnFeaturesTooltip"),icon:"magnify-scan",availability:()=>this.multiple,handler:()=>{const e=[];for(const t of this.store.all()){const n=this.format.readFeature(t.data,{dataProjection:t.data.projection,featureProjection:this.map.projection});e.push(n)}Object(d.Xb)(this.map,e,d.p.Zoom)}},{id:"zoomAuto",title:this.languageService.translate.instant("toastPanel.zoomAuto"),tooltip:this.languageService.translate.instant("toastPanel.zoomAutoTooltip"),checkbox:!0,checkCondition:this.zoomAuto$,handler:()=>{this.zoomAuto=!this.zoomAuto,this.zoomAuto&&!0===this.isResultSelected$.value&&this.selectResult(this.resultSelected$.getValue())}},{id:"fullExtent",title:this.languageService.translate.instant("toastPanel.fullExtent"),tooltip:this.languageService.translate.instant("toastPanel.fullExtentTooltip"),icon:"resize",display:()=>this.fullExtent$.pipe(Object(T.a)(e=>!e)),handler:()=>{this.fullExtent=!0}},{id:"standardExtent",title:this.languageService.translate.instant("toastPanel.standardExtent"),tooltip:this.languageService.translate.instant("toastPanel.standardExtentTooltip"),icon:"resize",display:()=>this.fullExtent$,handler:()=>{this.fullExtent=!1}}])}ngOnDestroy(){this.resultOrResolution$$&&this.resultOrResolution$$.unsubscribe(),this.isSelectedResultOutOfView$$&&this.isSelectedResultOutOfView$$.unsubscribe()}buildResultEmphasis(e,t){if(this.clearFeatureEmphasis(),!e||"selected"===t&&this.zoomAuto)return;const n=Object(d.Mb)(e.data,this.map.projection).getGeometry();if("Point"!==e.data.geometry.type&&Object(d.Pb)(this.map,n.getExtent(),.0025)){const e=n.getExtent(),t=e[0]+(e[2]-e[0])/2,o=e[1]+(e[3]-e[1])/2,a=new ge.a({name:"abstractFocusedOrSelectedResult",geometry:new me.a([t,o])});this.abstractFocusedOrSelectedResult=Object(d.Lb)(a,this.map.projection),this.abstractFocusedOrSelectedResult.meta.style=Object(d.Tb)(this.abstractFocusedOrSelectedResult),this.abstractFocusedOrSelectedResult.meta.style.setZIndex(2e3),this.map.overlay.addFeature(this.abstractFocusedOrSelectedResult,d.p.None)}}clearFeatureEmphasis(){this.abstractFocusedOrSelectedResult&&(this.map.overlay.removeFeature(this.abstractFocusedOrSelectedResult),this.abstractFocusedOrSelectedResult=void 0)}getTitle(e){return Object(l.tb)(e)}focusResult(e){this.focusedResult$.next(e),this.map.overlay.removeFeature(e.data),e.data.meta.style=Object(d.Tb)(e.data),e.data.meta.style.setZIndex(2e3),this.map.overlay.addFeature(e.data,d.p.None)}unfocusResult(e,t){this.focusedResult$.next(void 0),!t&&this.store.state.get(e).focused||(this.map.overlay.removeFeature(e.data),e.data.meta.style=Object(d.Sb)(e.data),e.data.meta.style.setZIndex(void 0),this.map.overlay.addFeature(e.data,d.p.None))}selectResult(e){this.store.state.update(e,{focused:!0,selected:!0},!0),this.resultSelected$.next(e);const t=[];for(const n of this.store.all())n.meta.id===e.meta.id?(n.data.meta.style=Object(d.Tb)(n.data),n.data.meta.style.setZIndex(2e3)):n.data.meta.style=Object(d.Sb)(n.data),t.push(n.data);if(this.map.overlay.removeFeatures(t),this.map.overlay.addFeatures(t,d.p.None),this.zoomAuto){const e=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});Object(d.Xb)(this.map,[e],d.p.Default)}this.isResultSelected$.next(!0),this.initialized=!1}unselectResult(){this.resultSelected$.next(void 0),this.isResultSelected$.next(!1),this.store.state.clear();const e=[];for(const t of this.store.all())t.data.meta.style=Object(d.Sb)(t.data),e.push(t.data);this.map.overlay.setFeatures(e,d.p.None,"map")}clear(){this.clearFeatureEmphasis(),this.map.overlay.removeFeatures(this.store.all().map(e=>e.data)),this.store.clear(),this.unselectResult()}isMobile(){return this.mediaService.getMedia()===r.i.Mobile}handleKeyboardEvent(e){e.preventDefault(),37===e.keyCode?this.previousResult():39===e.keyCode&&this.nextResult()}previousResult(){if(!this.resultSelected$.value)return;let e=this.results.indexOf(this.resultSelected$.value);const t=this.results[--e];t&&this.selectResult(t)}nextResult(){if(!this.resultSelected$.value)return;let e=this.results.indexOf(this.resultSelected$.value);const t=this.results[++e];t&&this.selectResult(t)}zoomTo(){const e=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});Object(d.Xb)(this.map,[e],d.p.Zoom)}swipe(e){e===je.SWIPE_ACTION.RIGHT?this.previousResult():e===je.SWIPE_ACTION.LEFT?this.nextResult():e===je.SWIPE_ACTION.UP?this.opened=!0:e===je.SWIPE_ACTION.DOWN&&(this.opened=!1)}onToggleClick(e){"igo-panel-title"===e.target.className&&(this.opened=!this.opened)}onTriggerAction(e){const t=e.args||[];e.handler(...t)}}je.SWIPE_ACTION={RIGHT:"swiperight",LEFT:"swipeleft",UP:"swipeup",DOWN:"swipedown"},je.\u0275fac=function(e){return new(e||je)(o.ic(r.k),o.ic(r.h),o.ic(w.h))},je.\u0275cmp=o.cc({type:je,selectors:[["app-toast-panel"]],hostVars:8,hostBindings:function(e,t){1&e&&o.vc("keydown.escape",(function(e){return t.onEscapeHandler(e)}),!1,o.Oc)("keydown.backspace",(function(e){return t.onBackHandler(e)}),!1,o.Oc)("keydown.z",(function(e){return t.onZoomHandler(e)}),!1,o.Oc),2&e&&(o.Xc("visibility",t.displayStyle),o.Zb("app-toast-panel-opened",t.hasOpenedClass)("app-full-toast-panel-collapsed",t.hasFullCollapsedClass)("app-full-toast-panel-opened",t.hasFullOpenedClass))},inputs:{map:"map",store:"store",opened:"opened",hasFeatureEmphasisOnSelection:"hasFeatureEmphasisOnSelection"},outputs:{openedChange:"openedChange",fullExtentEvent:"fullExtentEvent"},decls:3,vars:2,consts:[["toast",""],["class","swipe-fix",3,"swipeleft","swiperight","swipeup","swipedown",4,"ngIf","ngIfElse"],["tabindex","0",3,"title","click","keydown",4,"ngIf"],["tabindex","0",3,"title","click","keydown"],["id","igo-actionbar","panelLeftButton","",3,"store","withIcon","icon","withTitle","horizontal","mode"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","",3,"click"],["svgIcon","close"],[1,"toast-content"],["content",""],[3,"feature",4,"ngIf"],[3,"map","store","showIcons","withZoomButton","resultFocus","resultUnfocus","resultMouseenter","resultMouseleave","resultSelect",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click"],["svgIcon","chevron-left"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click"],["svgIcon","chevron-right"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"matTooltip","click"],["matBadgeColor","accent","matBadgeSize","small","svgIcon","magnify-plus-outline",3,"matBadge","matBadgeHidden"],[3,"feature"],[3,"map","store","showIcons","withZoomButton","resultFocus","resultUnfocus","resultMouseenter","resultMouseleave","resultSelect"],[1,"swipe-fix",3,"swipeleft","swiperight","swipeup","swipedown"],[3,"ngTemplateOutlet"]],template:function(e,t){if(1&e&&(o.Yc(0,Se,2,3,"ng-template",null,0,o.Zc),o.Yc(2,Ce,2,1,"div",1)),2&e){const e=o.Mc(1);o.Ub(2),o.Fc("ngIf",t.isMobile())("ngIfElse",e)}},directives:[h.t,l.Z,l.b,u.b,l.fb,g.a,f.a,j.a,d.n,d.pb,h.A],pipes:[h.b,Y.e],styles:["[_nghost-%COMP%]{-o-box-shadow:0 0 2px 0 #ddd;box-shadow:0 0 2px 0 #ddd;background-color:#fff;height:48px;max-height:281px;transition:height .28s cubic-bezier(.4,0,.2,1);padding:5px}.app-toast-panel-opened[_nghost-%COMP%]{height:auto;max-height:281px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-toast-panel-opened[_nghost-%COMP%]{height:40%}}.app-toast-panel-opened[_nghost-%COMP%]   .toast-content[_ngcontent-%COMP%]{height:100%;width:100%}.app-full-toast-panel-opened[_nghost-%COMP%]{height:auto;max-height:650px;width:45%}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){.app-full-toast-panel-opened[_nghost-%COMP%]{width:500px;max-height:500px}}.app-full-toast-panel-opened[_nghost-%COMP%]   .toast-content[_ngcontent-%COMP%]{height:100%;width:100%}igo-panel[_ngcontent-%COMP%]     .igo-panel-header:hover{cursor:pointer}igo-panel[_ngcontent-%COMP%]{height:100%;outline:none}igo-panel[_ngcontent-%COMP%]     h3{display:flex}igo-panel[_ngcontent-%COMP%]     .igo-panel-title{flex-grow:2;margin:0}igo-panel[_ngcontent-%COMP%]     .igo-panel-header   [panelleftbutton], igo-panel[_ngcontent-%COMP%]     .igo-panel-header   [panelrightbutton]{margin:0}igo-panel[_ngcontent-%COMP%]     .igo-panel-content{max-height:230px;-webkit-user-select:auto!important;-moz-user-select:auto!important;-ms-user-select:auto!important;user-select:auto!important}.app-full-toast-panel-opened[_nghost-%COMP%]   igo-panel[_ngcontent-%COMP%]     .igo-panel-content{max-height:calc(650px - 46px);overflow:auto}igo-feature-details[_ngcontent-%COMP%]     iframe{min-height:226px}host.app-full-toast-panel-opened[_ngcontent-%COMP%]   igo-feature-details[_ngcontent-fiq-c23][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{min-height:450px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){host.app-full-toast-panel-opened[_ngcontent-%COMP%]   igo-feature-details[_ngcontent-fiq-c23][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{min-height:350px}}.swipe-fix[_ngcontent-%COMP%]{touch-action:pinch-zoom!important}igo-panel[_ngcontent-%COMP%]     igo-list{max-height:230px}igo-actionbar[_ngcontent-%COMP%]{overflow:hidden}"],changeDetection:0});const Pe=["mapBrowser"],ke=["searchBar"];function Me(e,t){if(1&e&&o.jc(0,"igo-geolocate-button",9),2&e){const e=o.zc();o.Fc("map",e.map)("@controlsOffsetY",e.getControlsOffsetY())("@mobileOffsetY",e.getToastPanelStatus())}}function Fe(e,t){if(1&e&&o.jc(0,"igo-actionbar",30),2&e){const e=o.zc().ngIf,t=o.zc(2);o.Fc("store",e.actionStore)("withIcon",!0)("withTitle",t.actionbarWithTitle)("horizontal",!0)("withToggleButton","overlay"===t.actionbarMode)("iconColor","primary")("color","primary")("mode",t.actionbarMode)("overlayClass",t.workspaceMenuClass)}}function ze(e,t){if(1&e){const e=o.pc();o.oc(0,"igo-entity-table-paginator",31),o.vc("paginatorChange",(function(t){o.Pc(e);return o.zc(3).paginatorChange(t)})),o.nc()}if(2&e){const e=o.zc().ngIf,t=o.zc(2);o.Fc("store",e.entityStore)("entitySortChange$",t.workspaceEntitySortChange$)("paginatorOptions",t.paginatorOptions)}}const _e=function(e){return{disabled:e}};function Ee(e,t){if(1&e&&(o.mc(0),o.oc(1,"button",25),o.vc("click",(function(){const e=t.ngIf;return e.layer.visible=!e.layer.visible})),o.Ac(2,"translate"),o.Ac(3,"translate"),o.jc(4,"mat-icon",26),o.Ac(5,"async"),o.nc(),o.Yc(6,Fe,1,9,"igo-actionbar",27),o.jc(7,"div",28),o.Yc(8,ze,1,3,"igo-entity-table-paginator",29),o.lc()),2&e){const e=t.ngIf,n=o.zc(2);o.Ub(1),o.Fc("color",e.layer.visible?"primary":"default")("matTooltip",e.layer.visible?o.Bc(2,6,"igo.geo.layer.hideLayer"):o.Bc(3,8,"igo.geo.layer.showLayer")),o.Ub(3),o.Fc("ngClass",o.Ic(12,_e,!o.Bc(5,10,e.inResolutionRange$)))("svgIcon",e.layer.visible?"eye":"eye-off"),o.Ub(2),o.Fc("ngIf",e.actionStore),o.Ub(2),o.Fc("ngIf",n.workspaceVisibility())}}function $e(e,t){if(1&e){const e=o.pc();o.oc(0,"igo-entity-table",34),o.vc("entitySortChange",(function(){o.Pc(e);return o.zc(3).entitySortChange()}))("entitySelectChange",(function(t){o.Pc(e);return o.zc(3).entitySelectChange(t)})),o.nc()}if(2&e){const e=o.zc().ngIf,t=o.zc(2);o.Fc("paginator",t.workspacePaginator)("store",e.entityStore)("template",e.meta.tableTemplate)}}function Te(e,t){if(1&e&&(o.mc(0),o.Yc(1,$e,1,3,"igo-entity-table",32),o.oc(2,"span",33),o.ad(3),o.Ac(4,"translate"),o.nc(),o.lc()),2&e){const e=t.ngIf,n=o.zc(2);o.Ub(1),o.Fc("ngIf",e.entityStore&&e.meta&&e.meta.tableTemplate&&n.workspaceVisibility()),o.Ub(2),o.bd(o.Bc(4,2,n.workspaceNotAvailableMessage))}}function Be(e,t){if(1&e){const e=o.pc();o.oc(0,"app-expansion-panel",21),o.vc("expandedChange",(function(t){o.Pc(e);return o.zc().expansionPanelExpanded=t})),o.Ac(1,"async"),o.mc(2,22),o.oc(3,"igo-workspace-selector",23),o.vc("toolToActivate",(function(t){o.Pc(e);return o.zc().toolToActivateFromWorkspace(t)})),o.nc(),o.Yc(4,Ee,9,14,"ng-container",24),o.Ac(5,"async"),o.lc(),o.Yc(6,Te,5,4,"ng-container",24),o.Ac(7,"async"),o.nc()}if(2&e){const e=o.zc();o.Fc("backdropShown",e.expansionPanelBackdropShown)("expanded",e.expansionPanelExpanded)("maximized",o.Bc(1,9,e.workspaceMaximize$))("@expansionPanelSize",e.getExpansionPanelStatus())("@toastOffsetY",e.isMobile()&&!e.toastPanelOpened&&e.queryState.store.entities$.value.length>0&&!e.expansionPanelExpanded?"true":"false"),o.Ub(3),o.Fc("store",e.workspaceStore)("map",e.map),o.Ub(1),o.Fc("ngIf",o.Bc(5,11,e.selectedWorkspace$)),o.Ub(2),o.Fc("ngIf",o.Bc(7,13,e.selectedWorkspace$))}}function Ie(e,t){if(1&e){const e=o.pc();o.oc(0,"igo-workspace-widget-outlet",35),o.vc("deactivateWidget",(function(){o.Pc(e);return o.zc().onDeactivateWorkspaceWidget()})),o.nc()}if(2&e){const e=t.ngIf;o.Fc("workspace",e)}}function Re(e,t){if(1&e){const e=o.pc();o.oc(0,"app-toast-panel",36),o.vc("openedChange",(function(t){o.Pc(e);return o.zc().toastOpenedChange(t)}))("fullExtentEvent",(function(t){o.Pc(e);return o.zc().fullExtent=t})),o.nc()}if(2&e){const e=o.zc();o.Fc("map",e.map)("store",e.queryStore)("hasFeatureEmphasisOnSelection",e.hasFeatureEmphasisOnSelection)("@toastPanelOffsetX",e.isMobile()||!e.isLandscape()?void 0:e.getExtent())("@toastPanelOffsetY",e.getToastPanelOffsetY())("@toastPanelMobileSidenav",e.isMobile()&&e.sidenavOpened||e.isTablet()&&e.isPortrait()&&e.sidenavOpened)("opened",e.toastPanelOpened)}}function Ae(e,t){if(1&e&&o.jc(0,"igo-actionbar",37),2&e){const e=o.zc();o.Fc("store",e.contextMenuStore)("withIcon",!1)("horizontal",!0)}}const Le=function(e){return{"igo-attribution-offset":e}};class We{constructor(e,t,n,o,a,i,s,c,r,p,d,h,u,g,m,f,b,x,w,v,O,S,y){this.route=e,this.workspaceState=t,this.authService=n,this.mediaService=o,this.layerService=a,this.dataSourceService=i,this.cdRef=s,this.capabilitiesService=c,this.contextState=r,this.mapState=p,this.searchState=d,this.queryState=h,this.toolState=u,this.searchSourceService=g,this.configService=m,this.importService=f,this.http=b,this.languageService=x,this.messageService=w,this.welcomeWindowService=v,this.dialogWindow=O,this.queryService=S,this.storageService=y,this.minSearchTermLength=2,this.hasExpansionPanel=!1,this.hasGeolocateButton=!0,this.hasFeatureEmphasisOnSelection=!1,this.workspaceNotAvailableMessage="workspace.disabled.resolution",this.workspaceEntitySortChange$=new I.a(!1),this.paginatorOptions={pageSize:50,pageSizeOptions:[1,5,10,20,50,100,500]},this.workspaceMenuClass="workspace-menu",this.fullExtent=this.storageService.get("fullExtent"),this.workspaceMaximize$$=[],this.workspaceMaximize$=new I.a(this.storageService.get("workspaceMaximize")),this.sidenavOpened=!1,this.searchBarTerm="",this.onSettingsChange$=new I.a(void 0),this.termDefinedInUrl=!1,this.addedLayers$$=[],this.forceCoordsNA=!1,this.contextMenuStore=new l.a([]),this.contextLoaded=!1,this.igoSearchPointerSummaryEnabled=!1,this.toastPanelForExpansionOpened=!0,this.showToastPanelForExpansionToggle=!1,this.selectedWorkspace$=new I.a(void 0),this.menuButtonReverseColor=!1,this._toastPanelOpened=!1!==this.storageService.get("toastOpened"),this.hasExpansionPanel=this.configService.getConfig("hasExpansionPanel"),this.hasGeolocateButton=void 0===this.configService.getConfig("hasGeolocateButton")||this.configService.getConfig("hasGeolocateButton"),this.forceCoordsNA=this.configService.getConfig("app.forceCoordsNA"),this.hasFeatureEmphasisOnSelection=this.configService.getConfig("hasFeatureEmphasisOnSelection"),this.igoSearchPointerSummaryEnabled=this.configService.getConfig("hasSearchPointerSummary"),void 0!==this.configService.getConfig("menuButtonReverseColor")&&(this.menuButtonReverseColor=this.configService.getConfig("menuButtonReverseColor"))}get map(){return this.mapState.map}get toastPanelOpened(){return this._toastPanelOpened}set toastPanelOpened(e){e===!this._toastPanelOpened&&(this._toastPanelOpened=e,this.cdRef.detectChanges())}isMobile(){return this.mediaService.getMedia()===r.i.Mobile}isTablet(){return this.mediaService.getMedia()===r.i.Tablet}isLandscape(){return this.mediaService.getOrientation()===r.j.Landscape}isPortrait(){return this.mediaService.getOrientation()===r.j.Portrait}get backdropShown(){return(this.isMobile()||this.isTablet()&&this.isPortrait())&&this.sidenavOpened}get expansionPanelExpanded(){return this.workspaceState.workspacePanelExpanded}set expansionPanelExpanded(e){this.workspaceState.workspacePanelExpanded=e}get toastPanelShown(){return!0}get expansionPanelBackdropShown(){return this.expansionPanelExpanded&&this.toastPanelForExpansionOpened}get actionbarMode(){return l.c.Overlay}get actionbarWithTitle(){return this.actionbarMode===l.c.Overlay}get searchStore(){return this.searchState.store}get queryStore(){return this.queryState.store}get toolbox(){return this.toolState.toolbox}get toastPanelContent(){let e;return void 0!==this.workspace&&this.workspace.hasWidget&&(e="workspace"),e}get workspaceStore(){return this.workspaceState.store}get workspace(){return this.workspaceState.workspace$.value}ngOnInit(){window.IGO=this,this.initWelcomeWindow(),this.authService.authenticate$.subscribe(e=>{this.contextLoaded=!1}),this.context$$=this.contextState.context$.subscribe(e=>this.onChangeContext(e)),this.contextMenuStore.load([{id:"coordinates",title:"coordinates",handler:()=>this.searchCoordinate(this.contextMenuCoord)},{id:"googleMaps",title:"googleMap",handler:()=>this.openGoogleMaps(this.contextMenuCoord)},{id:"googleStreetView",title:"googleStreetView",handler:()=>this.openGoogleStreetView(this.contextMenuCoord)}]),this.queryStore.count$.pipe(Object(A.a)()).subscribe(([e,t])=>{this.map.viewController.padding[2]=t?280:0,0===e&&t!==e&&this.isMobile()&&this.hasExpansionPanel&&this.expansionPanelExpanded&&this.toastPanelOpened&&(this.toastPanelOpened=!1)}),this.readQueryParams(),this.onSettingsChange$.subscribe(()=>{this.searchState.setSearchSettingsChange()}),this.searchState.selectedResult$.subscribe(e=>{e&&this.isMobile()&&this.closeSidenav()}),this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel),this.workspaceState.store.empty$.subscribe(e=>{this.hasExpansionPanel&&(this.workspaceState.workspaceEnabled$.next(!e),e&&(this.expansionPanelExpanded=!1),this.updateMapBrowserClass())}),this.workspaceMaximize$$.push(this.workspaceState.workspaceMaximize$.subscribe(e=>{this.workspaceMaximize$.next(e),this.updateMapBrowserClass()})),this.workspaceMaximize$$.push(this.workspaceMaximize$.subscribe(()=>this.updateMapBrowserClass())),this.workspaceState.workspace$.subscribe(e=>{e?(this.selectedWorkspace$.next(e),this.expansionPanelExpanded=!0):this.expansionPanelExpanded=!1}),this.activeWidget$$=this.workspaceState.activeWorkspaceWidget$.subscribe(e=>{void 0!==e?(this.openToastPanelForExpansion(),this.showToastPanelForExpansionToggle=!0):(this.closeToastPanelForExpansion(),this.showToastPanelForExpansionToggle=!1)}),this.openSidenav$$=this.toolState.openSidenav$.subscribe(e=>{e&&(this.openSidenav(),this.toolState.openSidenav$.next(!1))})}getClassMenuButton(){return this.sidenavOpened?{"menu-button":!1===this.menuButtonReverseColor,"menu-button-reverse-color":!0===this.menuButtonReverseColor}:{"menu-button":!1===this.menuButtonReverseColor,"menu-button-reverse-color-close ":!0===this.menuButtonReverseColor}}workspaceVisibility(){const e=this.selectedWorkspace$.value;return e.inResolutionRange$.value?e.entityStore.empty$.value&&!e.layer.visible?this.workspaceNotAvailableMessage="workspace.disabled.visible":this.workspaceNotAvailableMessage="":this.workspaceNotAvailableMessage="workspace.disabled.resolution",e.inResolutionRange$.value}paginatorChange(e){this.workspacePaginator=e}entitySortChange(){this.workspaceEntitySortChange$.next(!0)}entitySelectChange(e){const t=this.getQuerySearchSource(),n=[];if(e&&e.added){const o=e.added.map(e=>{if(e&&e.ol&&e.ol.getProperties()._featureStore.layer&&e.ol.getProperties()._featureStore.layer.visible){const t=e.ol.getProperties()._featureStore.layer,o=Object(d.Lb)(e.ol,t.map.projection,t.ol);o.meta.alias=this.queryService.getAllowedFieldsAndAlias(t),o.meta.title=this.queryService.getQueryTitle(o,t)||o.meta.title;let a=n.find(e=>e.title===o.meta.sourceTitle);return a||(a=new d.jb({title:o.meta.sourceTitle}),n.push(a)),Object(d.Nb)(o,a)}});({request:Object(R.a)(o),reverse:!1,source:t}).request.subscribe(e=>{this.queryStore.load(e)})}}ngOnDestroy(){this.context$$.unsubscribe(),this.activeWidget$$.unsubscribe(),this.openSidenav$$.unsubscribe(),this.workspaceMaximize$$.map(e=>e.unsubscribe())}cancelOngoingAddLayer(){this.addedLayers$$.forEach(e=>e.unsubscribe()),this.addedLayers$$=[]}onBackdropClick(){this.closeSidenav()}onToggleSidenavClick(){this.toggleSidenav()}onDeactivateWorkspaceWidget(){this.closeToastPanelForExpansion()}closeToastPanelForExpansion(){this.toastPanelForExpansionOpened=!1}openToastPanelForExpansion(){this.toastPanelForExpansionOpened=!0}onMapQuery(e){const t=this.getQuerySearchSource(),n=[],o=e.features.map(e=>{let t=n.find(t=>t.title===e.meta.sourceTitle);return t||(t=new d.jb({title:e.meta.sourceTitle}),n.push(t)),Object(d.Nb)(e,t)});({request:Object(R.a)(o),reverse:!1,source:t}).request.subscribe(e=>{this.queryStore.load(e)})}onSearchTermChange(e){this.searchState.setSearchTerm(e);e.replace(/(#[^\s]*)/g,"").trim().length<2?this.onClearSearch():this.onBeforeSearch()}onSearch(e){const t=e.results,n=!Object(d.jc)(e.research.source);let o;o=n?this.searchSourceService.getEnabledSources().filter(d.ic):this.searchSourceService.getEnabledSources().filter(d.jc);const a=this.searchStore.entities$.value.filter(t=>t.source!==e.research.source&&o.includes(t.source)).concat(t);this.searchStore.load(a)}onSearchSettingsChange(){this.onSettingsChange$.next(!0)}closeSidenav(){this.sidenavOpened=!1,this.map.viewController.padding[3]=0}openSidenav(){this.sidenavOpened=!0,this.map.viewController.padding[3]=this.isMobile()?0:400}toggleSidenav(){this.sidenavOpened?this.closeSidenav():this.openSidenav()}toolChanged(e){e&&"searchResults"===e.name&&this.searchBar.nativeElement.getElementsByTagName("input")[0].focus()}onChangeContext(e){if(this.cancelOngoingAddLayer(),void 0!==e){if(this.route.queryParams.pipe(Object(L.a)(250)).subscribe(t=>{t.context&&t.context!==e.uri||this.readLayersQueryParams(t)}),this.contextLoaded){const e=this.toolbox.getTool("contextManager");let t=(e?e.options:{}).toolToOpenOnContextChange;if(!t){const e=["mapTools","map","mapDetails","mapLegend"];for(const n of e)if(this.toolbox.getTool(n)){t=n;break}}t&&this.toolbox.activateTool(t)}this.contextLoaded=!0}}onBeforeSearch(){this.toolbox.activeTool$.value&&"searchResults"===this.toolbox.activeTool$.value.name||this.toolbox.activateTool("searchResults"),this.openSidenav()}toastOpenedChange(e){this.map.viewController.padding[2]=e?280:0,this.handleExpansionAndToastOnMobile(),this.toastPanelOpened=e}handleExpansionAndToastOnMobile(){this.isMobile()&&this.hasExpansionPanel&&this.expansionPanelExpanded&&this.toastPanelOpened&&(this.expansionPanelExpanded=!1)}onClearSearch(){this.map.overlay.removeFeatures(this.searchStore.all().filter(e=>e.meta.dataType===d.l).map(e=>e.data)),this.searchStore.clear(),this.searchState.setSelectedResult(void 0)}getQuerySearchSource(){return this.searchSourceService.getSources().find(e=>e instanceof d.jb)}onContextMenuOpen(e){this.contextMenuCoord=this.getClickCoordinate(e)}getClickCoordinate(e){const t=e,n=this.mapBrowser.nativeElement.getBoundingClientRect();t.y=t.y-n.top+(window.scrollY||window.pageYOffset),t.x=t.x-n.left+(window.scrollX||window.pageXOffset);const o=[t.x,t.y],a=this.map.ol.getCoordinateFromPixel(o),i=this.map.projection;return U.r(a,i,"EPSG:4326")}openGoogleMaps(e){window.open(d.u.getGoogleMapsCoordLink(e[0],e[1]))}openGoogleStreetView(e){window.open(d.u.getGoogleStreetViewLink(e[0],e[1]))}searchCoordinate(e){this.searchBarTerm=e.map(e=>e.toFixed(6)).join(", ")}updateMapBrowserClass(){const e=this.queryState.store.entities$.value.length>0;this.hasExpansionPanel&&this.workspaceState.workspaceEnabled$.value?this.mapBrowser.nativeElement.classList.add("has-expansion-panel"):this.mapBrowser.nativeElement.classList.remove("has-expansion-panel"),this.hasExpansionPanel&&this.expansionPanelExpanded?this.workspaceMaximize$.value?(this.mapBrowser.nativeElement.classList.add("expansion-offset-maximized"),this.mapBrowser.nativeElement.classList.remove("expansion-offset")):(this.mapBrowser.nativeElement.classList.add("expansion-offset"),this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized")):this.workspaceMaximize$.value?this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized"):this.mapBrowser.nativeElement.classList.remove("expansion-offset"),this.sidenavOpened?this.mapBrowser.nativeElement.classList.add("sidenav-offset"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset"),this.sidenavOpened&&!this.isMobile()?this.mapBrowser.nativeElement.classList.add("sidenav-offset-baselayers"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset-baselayers"),this.toastPanelOpened||!e||this.expansionPanelExpanded?this.mapBrowser.nativeElement.classList.remove("toast-offset-scale-line"):this.mapBrowser.nativeElement.classList.add("toast-offset-scale-line"),!this.toastPanelOpened&&e&&(this.isMobile()||this.isTablet()||this.sidenavOpened)&&!this.expansionPanelExpanded?this.mapBrowser.nativeElement.classList.add("toast-offset-attribution"):this.mapBrowser.nativeElement.classList.remove("toast-offset-attribution")}getExtent(){return this.sidenavOpened?this.sidenavOpened?this.fullExtent?"fullOffsetX":"standardOffsetX":void 0:this.fullExtent?"fullStandard":"standard"}onPointerSummaryStatusChange(e){this.igoSearchPointerSummaryEnabled=e}getExpansionPanelStatus(){return!1===this.sidenavOpened?!0===this.expansionPanelExpanded?"full":"notTriggered":!0===this.sidenavOpened&&!1===this.isMobile()?!0===this.expansionPanelExpanded?"reduced":"reducedNotTriggered":!0===this.sidenavOpened&&!0===this.isMobile()?!0===this.expansionPanelExpanded?"mobile":"notVisible":void 0}getToastPanelOffsetY(){let e="noExpansion";return e=this.expansionPanelExpanded?this.workspaceMaximize$.value?this.toastPanelOpened?"expansionMaximizedAndToastOpened":"expansionMaximizedAndToastClosed":this.toastPanelOpened?"expansionAndToastOpened":"expansionAndToastClosed":"noExpansion",e}getToastPanelStatus(){if(!0===this.isMobile()&&!1===this.toastPanelOpened&&!1===this.sidenavOpened&&!1===this.expansionPanelExpanded&&this.queryState.store.entities$.value.length>0)return"low"}getControlsOffsetY(){return this.expansionPanelExpanded?this.workspaceMaximize$.value?"firstRowFromBottom-expanded-maximized":"firstRowFromBottom-expanded":"firstRowFromBottom"}getBaselayersSwitcherStatus(){let e;return e=this.isMobile()?this.workspaceState.workspaceEnabled$.value?!1===this.expansionPanelExpanded?0===this.queryState.store.entities$.value.length?"secondRowFromBottom":"thirdRowFromBottom":0===this.queryState.store.entities$.value.length?"firstRowFromBottom-expanded":"secondRowFromBottom-expanded":0===this.queryState.store.entities$.value.length?"firstRowFromBottom":"secondRowFromBottom":this.workspaceState.workspaceEnabled$.value?this.expansionPanelExpanded?this.workspaceMaximize$.value?"firstRowFromBottom-expanded-maximized":"firstRowFromBottom-expanded":"secondRowFromBottom":"firstRowFromBottom",e}readQueryParams(){this.route.queryParams.pipe(Object(L.a)(250)).subscribe(e=>{this.readToolParams(e),this.readSearchParams(e),this.readFocusFirst(e)})}computeFocusFirst(){setTimeout(()=>{const e=document.getElementsByTagName("igo-search-results-item").item(0);e&&e.click()},1)}readFocusFirst(e){if("1"===e.sf&&this.termDefinedInUrl){const e=this.searchStore.entities$.pipe(Object(L.a)(500),Object(W.a)(1)).subscribe(t=>{e.unsubscribe(),t.length&&this.computeFocusFirst()})}}readSearchParams(e){e.search&&(this.termDefinedInUrl=!0,this.searchBarTerm=e.search)}readToolParams(e){e.tool&&this.toolbox.activateTool(e.tool),"1"===e.sidenav&&setTimeout(()=>{this.openSidenav()},250)}readLayersQueryParams(e){this.readLayersQueryParamsWMS(e),this.readLayersQueryParamsWMTS(e),this.readVectorQueryParams(e)}readLayersQueryParamsWMS(e){if((e.layers||e.wmsLayers)&&e.wmsUrl){const t=e.wmsLayers?"wmsLayers":"layers",n=e[t].split("),("),o=e.wmsUrl.split(",");let a=0;o.forEach(t=>{this.extractLayersByService(n[a]).forEach(n=>{const o=n.split(":igoz"),a={url:t,params:{LAYERS:o[0]}},i=Object(d.Qb)(a),s=this.computeLayerVisibilityFromUrl(e,i);this.addWmsLayerByName(t,o[0],s,parseInt(o[1]||1e3,10))}),a+=1})}}readLayersQueryParamsWMTS(e){if(e.wmtsLayers&&e.wmtsUrl){const t=e.wmtsLayers.split("),("),n=e.wmtsUrl.split(",");let o=0;n.forEach(n=>{this.extractLayersByService(t[o]).forEach(t=>{const o=t.split(":igoz"),a={url:n,layer:o[0]},i=Object(d.Rb)(a),s=this.computeLayerVisibilityFromUrl(e,i);this.addWmtsLayerByName(n,o[0],s,parseInt(o[1]||1e3,10))}),o+=1})}}readVectorQueryParams(e){if(e.vector){const t=e.vector,n=t.lastIndexOf("/"),o=t.slice(n+1,t.length);this.http.get(""+t,{responseType:"blob"}).subscribe(e=>{const t=new File([e],o,{type:e.type,lastModified:Date.now()});this.importService.import(t).subscribe(e=>this.onFileImportSuccess(t,e),e=>this.onFileImportError(t,e))})}}onFileImportSuccess(e,t){Object(d.Vb)(e,t,this.map,this.messageService,this.languageService)}onFileImportError(e,t){Object(d.Ub)(e,t,this.messageService,this.languageService)}extractLayersByService(e){let t=e;return t=t.startsWith("(")?t.substr(1):t,t=t.endsWith(")")?t.slice(0,-1):t,t.split(",")}addWmsLayerByName(e,t,n=!0,o=1e5){this.contextLoaded&&this.addedLayers$$.push(this.layerService.createAsyncLayer({zIndex:o,visible:n,sourceOptions:{optionsFromCapabilities:!0,optionsFromApi:!0,type:"wms",url:e,params:{layers:t}}}).subscribe(e=>{this.map.addLayer(e)}))}addWmtsLayerByName(e,t,n=!0,o=1e5){this.contextLoaded&&this.addedLayers$$.push(this.layerService.createAsyncLayer({zIndex:o,visible:n,sourceOptions:{optionsFromCapabilities:!0,type:"wmts",url:e,crossOrigin:!0,version:"1.0.0",layer:t}}).subscribe(e=>{this.map.addLayer(e)}))}computeLayerVisibilityFromUrl(e,t){const n=e;let o=!0;if(!n||!t)return o;let a="",i="",s=[],c=[];return n.visiblelayers&&(a=n.visiblelayers),n.invisiblelayers&&(i=n.invisiblelayers),"*"===a&&(o=!0),"*"===i&&(o=!1),s=a.split(","),c=i.split(","),s.indexOf(t)>-1&&(o=!0),c.indexOf(t)>-1&&(o=!1),o}initWelcomeWindow(){this.configService.getConfig("auth")?this.authService.logged$.subscribe(e=>{e&&this.createWelcomeWindow()}):this.createWelcomeWindow()}createWelcomeWindow(){if(this.welcomeWindowService.hasWelcomeWindow()){const e=this.welcomeWindowService.getConfig();this.dialogWindow.open(q,e).afterClosed().subscribe(e=>{this.welcomeWindowService.afterClosedWelcomeWindow()})}}}function Ue(e,t){1&e&&o.jc(0,"igo-auth-form")}We.\u0275fac=function(e){return new(e||We)(o.ic(s.a),o.ic(w.j),o.ic(p.c),o.ic(r.k),o.ic(d.U),o.ic(d.g),o.ic(o.k),o.ic(d.b),o.ic(w.c),o.ic(w.e),o.ic(w.g),o.ic(w.f),o.ic(w.i),o.ic(d.qb),o.ic(r.c),o.ic(d.O),o.ic(Q.b),o.ic(r.h),o.ic(r.m),o.ic(V),o.ic(b.b),o.ic(d.kb),o.ic(r.q))},We.\u0275cmp=o.cc({type:We,selectors:[["app-portal"]],viewQuery:function(e,t){var n;(1&e&&(o.Wc(Pe,!0,o.s),o.Wc(ke,!0,o.s)),2&e)&&(o.Lc(n=o.wc())&&(t.mapBrowser=n.first),o.Lc(n=o.wc())&&(t.searchBar=n.first))},decls:31,vars:55,consts:[[1,"app-main-container"],[3,"shown","click"],["mat-icon-button","","id","menu-button","tooltip-position","below","matTooltipShowDelay","500",3,"ngClass","matTooltip","click"],["svgIcon","menu"],[3,"term","minLength","searchSettings","pointerSummaryEnabled","forceNA","store","searchTermChange","pointerSummaryStatus","search","clearFeature","searchSettingsChange"],["searchBar",""],[3,"map","opened","openedChange","toolChange"],["igoWorkspaceUpdator","","igoSearchPointerSummary","","igoQuery","","igoMapContext","","igoLayerContext","","igoDropGeoFile","",3,"workspaceStore","igoSearchPointerSummaryDelay","igoSearchPointerSummaryEnabled","waitForAllQueries","queryFeatures","queryFeaturesHitTolerance","map","igoContextMenu","ngClass","query","menuPosition"],["mapBrowser",""],["color","primary",3,"map"],["color","primary",3,"map",4,"ngIf"],["color","primary",3,"showIfNoRotation","map"],[3,"map","useStaticIcon"],[3,"backdropShown","expanded","maximized","expandedChange",4,"ngIf"],[3,"withHeader","opened","openedChange"],[1,"toast-panel-for-expansion-close-button-container"],["mat-icon-button","","color","warn",3,"click"],["svgIcon","close"],[3,"workspace","deactivateWidget",4,"ngIf"],[3,"map","store","hasFeatureEmphasisOnSelection","opened","openedChange","fullExtentEvent",4,"ngIf"],["contextMenu",""],[3,"backdropShown","expanded","maximized","expandedChange"],["expansionPanelHeader",""],["igoWorkspaceSelector","",3,"store","map","toolToActivate"],[4,"ngIf"],["mat-icon-button","","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",1,"eye-workspace",3,"color","matTooltip","click"],[3,"ngClass","svgIcon"],["class","actionbar-workspace",3,"store","withIcon","withTitle","horizontal","withToggleButton","iconColor","color","mode","overlayClass",4,"ngIf"],[1,"spacer"],[3,"store","entitySortChange$","paginatorOptions","paginatorChange",4,"ngIf"],[1,"actionbar-workspace",3,"store","withIcon","withTitle","horizontal","withToggleButton","iconColor","color","mode","overlayClass"],[3,"store","entitySortChange$","paginatorOptions","paginatorChange"],[3,"paginator","store","template","entitySortChange","entitySelectChange",4,"ngIf"],[1,"mat-typography"],[3,"paginator","store","template","entitySortChange","entitySelectChange"],[3,"workspace","deactivateWidget"],[3,"map","store","hasFeatureEmphasisOnSelection","opened","openedChange","fullExtentEvent"],["mode","context",3,"store","withIcon","horizontal"]],template:function(e,t){if(1&e&&(o.oc(0,"mat-sidenav-container",0),o.oc(1,"mat-sidenav-content"),o.oc(2,"igo-backdrop",1),o.vc("click",(function(){return t.onBackdropClick()})),o.nc(),o.oc(3,"button",2),o.vc("click",(function(){return t.onToggleSidenavClick()})),o.Ac(4,"translate"),o.jc(5,"mat-icon",3),o.nc(),o.oc(6,"igo-search-bar",4,5),o.vc("searchTermChange",(function(e){return t.onSearchTermChange(e)}))("pointerSummaryStatus",(function(e){return t.onPointerSummaryStatusChange(e)}))("search",(function(e){return t.onSearch(e)}))("clearFeature",(function(){return t.onClearSearch()}))("searchSettingsChange",(function(){return t.onSearchSettingsChange()})),o.nc(),o.oc(8,"app-sidenav",6),o.vc("openedChange",(function(e){return t.sidenavOpened=e}))("toolChange",(function(e){return t.toolChanged(e)})),o.nc(),o.oc(9,"igo-map-browser",7,8),o.vc("query",(function(e){return t.onMapQuery(e)}))("menuPosition",(function(e){return t.onContextMenuOpen(e)}))("@mapStateX.start",(function(){return t.updateMapBrowserClass()}))("@mapStateY.start",(function(){return t.updateMapBrowserClass()})),o.jc(11,"igo-zoom-button",9),o.jc(12,"igo-offline-button",9),o.Yc(13,Me,1,3,"igo-geolocate-button",10),o.jc(14,"igo-rotation-button",11),o.jc(15,"igo-user-button",9),o.jc(16,"igo-baselayers-switcher",12),o.nc(),o.jc(17,"app-map-overlay"),o.Ac(18,"async"),o.nc(),o.nc(),o.Yc(19,Be,8,15,"app-expansion-panel",13),o.Ac(20,"async"),o.oc(21,"app-toast-panel-for-expansion",14),o.vc("openedChange",(function(e){return t.toastPanelForExpansionOpened=e})),o.oc(22,"div",15),o.oc(23,"button",16),o.vc("click",(function(){return t.toastPanelForExpansionOpened=!1})),o.jc(24,"mat-icon",17),o.nc(),o.nc(),o.Yc(25,Ie,1,1,"igo-workspace-widget-outlet",18),o.Ac(26,"async"),o.nc(),o.Yc(27,Re,1,7,"app-toast-panel",19),o.Ac(28,"async"),o.Yc(29,Ae,1,3,"ng-template",null,20,o.Zc)),2&e){const e=o.Mc(30);o.Ub(2),o.Fc("shown",t.backdropShown),o.Ub(1),o.Fc("ngClass",t.getClassMenuButton())("matTooltip",o.Bc(4,43,t.sidenavOpened?"menu.close":"menu.open")),o.Ub(3),o.Fc("term",t.searchBarTerm)("minLength",t.minSearchTermLength)("searchSettings",!0)("pointerSummaryEnabled",t.igoSearchPointerSummaryEnabled)("forceNA",t.forceCoordsNA)("store",t.searchStore),o.Ub(2),o.Fc("map",t.map)("opened",t.sidenavOpened),o.Ub(1),o.Fc("workspaceStore",t.workspaceStore)("igoSearchPointerSummaryDelay",500)("igoSearchPointerSummaryEnabled",t.igoSearchPointerSummaryEnabled)("waitForAllQueries",!0)("queryFeatures",!0)("queryFeaturesHitTolerance",15)("map",t.map)("igoContextMenu",e)("ngClass",o.Ic(53,Le,t.map.getBaseLayers().length>1))("@mapStateX",t.sidenavOpened?"right":"left")("@mapStateY",t.getControlsOffsetY()),o.Ub(2),o.Fc("map",t.map)("@controlsOffsetY",t.getControlsOffsetY()),o.Ub(1),o.Fc("map",t.map)("@controlsOffsetY",t.getControlsOffsetY())("@mobileOffsetY",t.getToastPanelStatus()),o.Ub(1),o.Fc("ngIf",t.hasGeolocateButton),o.Ub(1),o.Fc("showIfNoRotation",!1)("map",t.map),o.Ub(1),o.Fc("map",t.map)("@controlsOffsetY",t.getControlsOffsetY())("@mobileOffsetY",t.getToastPanelStatus()),o.Ub(1),o.Fc("map",t.map)("@controlsOffsetY",t.getBaselayersSwitcherStatus())("useStaticIcon",!0),o.Ub(1),o.Fc("@controlStateY",t.getControlsOffsetY())("@controlStateX","mobile"!==o.Bc(18,45,t.mediaService.media$)&&t.sidenavOpened?"right":"left"),o.Ub(2),o.Fc("ngIf",t.hasExpansionPanel&&o.Bc(20,47,t.workspaceState.workspaceEnabled$)),o.Ub(2),o.Fc("withHeader",!1)("opened",t.toastPanelForExpansionOpened),o.Ub(4),o.Fc("ngIf",o.Bc(26,49,t.selectedWorkspace$)),o.Ub(2),o.Fc("ngIf",!o.Bc(28,51,t.queryStore.empty$))}},directives:[m.b,m.c,l.d,u.b,h.q,f.a,g.a,d.mb,G,d.V,d.Gb,d.nb,d.ib,x.n,x.m,d.j,l.i,d.Hb,d.ab,h.t,d.lb,x.p,d.a,ae,ie,d.t,pe,l.mb,d.Fb,l.b,l.s,l.r,l.ob,je],pipes:[Y.e,h.b],styles:["#tour-button[_ngcontent-%COMP%]{font-weight:700;position:absolute;left:5px;top:50px;z-index:4}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.tour-button-title[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]{width:100%;height:100%;display:block}.menu-button-reverse-color[_ngcontent-%COMP%]{height:40px;position:absolute;top:3px;z-index:4;border-radius:0;height:45px;width:48px}.menu-button-reverse-color-close[_ngcontent-%COMP%]{position:absolute;left:5px;top:5px;z-index:4;border-radius:0}mat-icon.disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}.menu-button[_ngcontent-%COMP%]{background-color:#fff;position:absolute;left:5px;top:5px;z-index:4}.menu-button[_ngcontent-%COMP%], .menu-button[_ngcontent-%COMP%]     div.mat-button-ripple-round{border-radius:0}igo-map-browser[_ngcontent-%COMP%]{width:100%;height:100%}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution{left:50px;bottom:5px;text-align:left;padding:0;margin-right:90px;background-color:hsla(0,0%,100%,0);width:calc(100% - 500px)}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-logo-only{height:inherit}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed{background:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed button{transform:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution button{transform:rotate(180deg);background-color:#fff;cursor:pointer}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-uncollapsible{height:auto}igo-map-browser.has-expansion-panel[_ngcontent-%COMP%]   igo-baselayers-switcher[_ngcontent-%COMP%]{bottom:47px}igo-map-browser.sidenav-offset-baselayers[_ngcontent-%COMP%]   igo-baselayers-switcher[_ngcontent-%COMP%]{left:405px}igo-map-browser[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{position:absolute;width:100%;left:0;bottom:0}igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{left:400px;width:calc(100% - 380px)}igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent .ol-scale-line{left:40%}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{display:none}}igo-map-browser.expansion-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{bottom:281px}igo-map-browser.expansion-offset-maximized[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{bottom:496px}igo-map-browser.toast-offset-scale-line[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-scale-line{bottom:50px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-map-browser.toast-offset-attribution[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-attribution{bottom:50px}}igo-search-bar[_ngcontent-%COMP%]{background-color:#fff;font-size:16px;position:absolute;left:45px;top:5px;z-index:4;width:calc(400px - 45px - (2 * 5px));height:40px;margin:0 5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-search-bar[_ngcontent-%COMP%]{width:calc(100% - 40px - 45px - (3 * 5px));max-width:350px}}mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#efefef;z-index:5;display:unset}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){mat-sidenav-content[_ngcontent-%COMP%]{z-index:auto}}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}igo-actionbar[_ngcontent-%COMP%]{padding-left:7px;padding-top:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-workspace-selector[_ngcontent-%COMP%]{width:100px}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-entity-table-paginator[_ngcontent-%COMP%]{margin-left:-30px}}app-expansion-panel[_ngcontent-%COMP%]{position:absolute;bottom:0;overflow:hidden;z-index:5}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){@supports (-webkit-appearance:none) and (not (overflow:-webkit-marquee)) and (not (-ms-ime-align:auto)) and (not (-moz-appearance:none)){app-expansion-panel[_ngcontent-%COMP%]{z-index:1}}}app-toast-panel[_ngcontent-%COMP%]{position:absolute;left:50%;margin-left:-300px;width:600px;z-index:5;outline:none}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){app-toast-panel[_ngcontent-%COMP%]{width:calc(100% - 49px);left:49px;margin-left:0}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){app-toast-panel[_ngcontent-%COMP%]{width:500px;left:calc(50% + 60px)}}app-toast-panel.app-full-toast-panel-collapsed[_ngcontent-%COMP%]{width:45%}app-toast-panel.app-toast-panel-opened[_ngcontent-%COMP%], app-toast-panel.expansion-panel-expanded[_ngcontent-%COMP%], app-toast-panel[_ngcontent-%COMP%]:not(.has-expansion-panel){bottom:0}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){app-toast-panel.app-toast-panel-opened[_ngcontent-%COMP%], app-toast-panel.expansion-panel-expanded[_ngcontent-%COMP%], app-toast-panel[_ngcontent-%COMP%]:not(.has-expansion-panel){width:100%;left:0}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){app-toast-panel.app-full-toast-panel-opened[_ngcontent-%COMP%]{max-height:70%;height:auto;width:100%}}igo-offline-button[_ngcontent-%COMP%]{margin-bottom:128px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-offline-button[_ngcontent-%COMP%]{margin-bottom:45px}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){igo-offline-button[_ngcontent-%COMP%]{margin-bottom:45px}}igo-geolocate-button[_ngcontent-%COMP%]{margin-bottom:85px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-geolocate-button[_ngcontent-%COMP%]{margin-bottom:0}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){igo-geolocate-button[_ngcontent-%COMP%]{margin-bottom:0}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){igo-zoom-button[_ngcontent-%COMP%]{display:none}}app-toast-panel-for-expansion[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;margin-left:-300px;width:600px;z-index:6}@media only screen and (min-width:960px) and (max-width:1280px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:480px;margin-left:-240px}}@media only screen and (min-width:600px) and (max-width:959px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:480px;margin-left:-240px}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:calc(100% - 2 * 49px);left:49px;margin-left:0}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:calc(100% - 2 * 49px);left:49px;margin-left:0}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){toast-panel-for-expansion.toast-panel-for-expansion-opened[_ngcontent-%COMP%]{width:100%;left:0}}.mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{background:none}app-toast-panel-for-expansion[_ngcontent-%COMP%]   .toast-panel-for-expansion-close-button-container[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-15px;z-index:6;padding:5px}app-toast-panel-for-expansion[_ngcontent-%COMP%]   .toast-panel-for-expansion-close-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:24px;line-height:24px}.eye-workspace[_ngcontent-%COMP%]{margin-left:7px;margin-top:5px}.actionbar-workspace[_ngcontent-%COMP%]{padding-left:0}  div.workspace-menu{max-width:-webkit-fit-content!important;max-width:-moz-fit-content!important;max-width:fit-content!important}  div.workspace-menu div.mat-menu-content   div.mat-list-text,   div.workspace-menu div.mat-menu-content   span.mat-checkbox-label{font-size:12px}"],data:{animation:[[Object(D.n)("expansionPanelSize",[Object(D.k)("full",Object(D.l)({left:"5px","max-width":"100%"})),Object(D.k)("notTriggered",Object(D.l)({left:"5px",bottom:"5px","max-width":"100%"})),Object(D.k)("notVisible",Object(D.l)({display:"none"})),Object(D.k)("mobile",Object(D.l)({left:"calc(100% - 40px)"})),Object(D.k)("reduced",Object(D.l)({left:"405px","max-width":"calc(100% - 405px)"})),Object(D.k)("reducedNotTriggered",Object(D.l)({left:"405px",bottom:"5px","max-width":"calc(100% - 405px)"})),Object(D.m)("* => *",Object(D.e)("100ms"))]),Object(D.n)("toastOffsetY",[Object(D.k)("true",Object(D.l)({bottom:"50px"})),Object(D.k)("false",Object(D.l)({bottom:"5px"}))])],[Object(D.n)("toastPanelMobileSidenav",[Object(D.k)("true",Object(D.l)({display:"none"})),Object(D.m)("* => void",Object(D.e)("0ms")),Object(D.m)("* => *",Object(D.e)("200ms"))]),Object(D.n)("toastPanelOffsetX",[Object(D.k)("fullStandard",Object(D.l)({left:"45%"})),Object(D.k)("standard",Object(D.l)({left:"50%"})),Object(D.k)("fullOffsetX",Object(D.l)({left:"calc(45% + 202px)"})),Object(D.k)("standardOffsetX",Object(D.l)({left:"calc(50% + 202px)"})),Object(D.m)("fullStandard => fullOffsetX",Object(D.e)("200ms")),Object(D.m)("fullOffsetX => fullStandard",Object(D.e)("200ms")),Object(D.m)("standard => standardOffsetX",Object(D.e)("200ms")),Object(D.m)("standardOffsetX => standard",Object(D.e)("200ms"))]),Object(D.n)("toastPanelOffsetY",[Object(D.k)("noExpansion",Object(D.l)({bottom:"0"})),Object(D.k)("expansionAndToastOpened",Object(D.l)({bottom:"285px",zIndex:"999"})),Object(D.k)("expansionAndToastClosed",Object(D.l)({bottom:"285px",zIndex:"5"})),Object(D.k)("expansionMaximizedAndToastOpened",Object(D.l)({bottom:"500px",zIndex:"999"})),Object(D.k)("expansionMaximizedAndToastClosed",Object(D.l)({bottom:"500px",zIndex:"5"})),Object(D.m)("noExpansion => noExpansion",Object(D.e)("10ms")),Object(D.m)("expansionAndToastOpened => expansionAndToastOpened",Object(D.e)("200ms")),Object(D.m)("expansionAndToastClosed => expansionAndToastClosed",Object(D.e)("200ms")),Object(D.m)("expansionMaximizedAndToastOpened => expansionMaximizedAndToastOpened",Object(D.e)("200ms")),Object(D.m)("expansionMaximizedAndToastClosed => expansionMaximizedAndToastClosed",Object(D.e)("200ms"))])],[Object(D.n)("controlsOffsetY",[Object(D.k)("close",Object(D.l)({})),Object(D.k)("firstRowFromBottom",Object(D.l)({bottom:"5px"})),Object(D.k)("firstRowFromBottom-expanded",Object(D.l)({bottom:"285px"})),Object(D.k)("firstRowFromBottom-expanded-maximized",Object(D.l)({bottom:"500px"})),Object(D.k)("secondRowFromBottom",Object(D.l)({bottom:"47px"})),Object(D.k)("thirdRowFromBottom",Object(D.l)({bottom:"104px"})),Object(D.k)("",Object(D.l)({bottom:"calc(285px)"})),Object(D.k)("secondRowFromBottom-expanded",Object(D.l)({bottom:"calc(285px + 52px)"})),Object(D.k)("thirdRowFromBottom-expanded",Object(D.l)({bottom:"calc(285px + 104px)"})),Object(D.m)("* => *",Object(D.e)("200ms"))]),Object(D.n)("mobileOffsetY",[Object(D.k)("low",Object(D.l)({bottom:"50px"})),Object(D.m)("* => *",Object(D.e)("200ms"))])],Object(D.n)("controlStateX",[Object(D.k)("left",Object(D.l)({left:"60px"})),Object(D.k)("right",Object(D.l)({left:"465px"})),Object(D.m)("* => *",Object(D.e)("200ms"))]),Object(D.n)("controlStateY",[Object(D.k)("close",Object(D.l)({})),Object(D.k)("firstRowFromBottom",Object(D.l)({bottom:"2px","margin-left":"0px"})),Object(D.k)("firstRowFromBottom-expanded",Object(D.l)({bottom:"285px","margin-left":"-55px"})),Object(D.k)("firstRowFromBottom-expanded-maximized",Object(D.l)({bottom:"500px","margin-left":"-55px"})),Object(D.m)("* => *",Object(D.e)("200ms"))]),Object(D.n)("mapStateX",[Object(D.k)("left",Object(D.l)({left:"0"})),Object(D.k)("right",Object(D.l)({left:"0"})),Object(D.m)("* => *",Object(D.e)("200ms"))]),Object(D.n)("mapStateY",[Object(D.k)("*",Object(D.l)({bottom:"0"})),Object(D.m)("* => *",Object(D.e)("200ms"))])]}});class De{constructor(e,t,n,o,a,i,s,c){this.languageService=e,this.configService=t,this.analyticsService=n,this.analyticsListenerService=o,this.renderer=a,this.titleService=i,this.metaService=s,this.messageService=c,this.themeClass="blue-theme",this.authConfig=this.configService.getConfig("auth"),this.readTitleConfig(),this.readThemeConfig(),this.readDescriptionConfig(),this.analyticsListenerService.listen(),this.detectOldBrowser()}readTitleConfig(){this.languageService.translate.get(this.configService.getConfig("title")).subscribe(e=>{e&&(this.titleService.setTitle(e),this.metaService.addTag({name:"title",content:e}))})}readThemeConfig(){const e=this.configService.getConfig("theme")||this.themeClass;e&&this.renderer.addClass(document.body,e)}readDescriptionConfig(){const e=this.configService.getConfig("description");e&&this.metaService.addTag({name:"description",content:e})}detectOldBrowser(){if(B.h.satisfies({ie:"<11",chrome:"<64",firefox:"<60"})){const e=this.languageService.translate,t=e.get("oldBrowser.title"),n=e.get("oldBrowser.message");Object($.a)(t,n).pipe(Object(T.a)(([e,t])=>({title:e,message:t}))).subscribe(e=>this.messageService.alert(e.message,e.title,{timeOut:15e3}))}}}De.\u0275fac=function(e){return new(e||De)(o.ic(r.h),o.ic(r.c),o.ic(r.b),o.ic(w.a),o.ic(o.V),o.ic(i.g),o.ic(i.f),o.ic(r.m))},De.\u0275cmp=o.cc({type:De,selectors:[["app-root"]],decls:4,vars:1,consts:[["igoSpinnerActivity",""],[4,"ngIf"],["igoStopDropPropagation",""]],template:function(e,t){1&e&&(o.jc(0,"igo-spinner",0),o.jc(1,"igo-message-center"),o.Yc(2,Ue,1,0,"igo-auth-form",1),o.jc(3,"app-portal",2)),2&e&&(o.Ub(2),o.Fc("ngIf",t.authConfig))},directives:[l.db,l.cb,r.l,h.t,We,l.eb,p.a],styles:["[_nghost-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}igo-spinner[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;z-index:5}igo-message-center[_ngcontent-%COMP%]     simple-notifications   div.simple-notification-wrapper{right:10px}"]});class Ve{}Ve.\u0275mod=o.gc({type:Ve,bootstrap:[De]}),Ve.\u0275inj=o.fc({factory:function(e){return new(e||Ve)},providers:[Object(r.r)({default:a.igo,path:"./config/config.json"}),r.o,Object(d.ec)(),Object(d.cc)(),Object(d.bc)(),Object(d.ac)(),Object(d.dc)(),Object(d.hc)(),Object(d.gc)(),Object(d.fc)(),Object(d.Zb)()],imports:[[i.a,c.b,s.d.forRoot([]),p.d.forRoot(),r.e.forRoot(),r.g,l.Q,l.R,E,i.e]]}),a.production&&Object(o.mb)(),i.h().bootstrapModule(Ve).catch(e=>console.log(e))}},[[0,0,5]]]);
//# sourceMappingURL=main-es2015.64d64bdd2004fcb99d56.js.map