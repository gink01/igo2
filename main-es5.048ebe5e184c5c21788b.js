function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,o=!1,i=void 0;try{for(var s,r=e[Symbol.iterator]();!(a=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(c){o=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(o)throw i}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,r=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){r=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},I74T:function(e,t,n){var a={"./en.auth.json":"4FNE","./en.common.json":"MoB1","./en.context.json":"N2Ms","./en.core.json":"mPxz","./en.geo.json":"/7uZ","./en.integration.json":"TSY2","./en.json":"Oh3F","./fr.auth.json":"qcjx","./fr.common.json":"O94P","./fr.context.json":"Z1WX","./fr.core.json":"wpjW","./fr.geo.json":"8ktl","./fr.integration.json":"Tzk/","./fr.json":"+etH"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id="I74T"},RnhZ:function(e,t,n){var a={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-in":"7C5Q","./en-in.js":"7C5Q","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./en-sg":"t+mt","./en-sg.js":"t+mt","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fil":"1ppg","./fil.js":"1ppg","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-deva":"qvJo","./gom-deva.js":"qvJo","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./oc-lnc":"Fnuy","./oc-lnc.js":"Fnuy","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tk":"Wv91","./tk.js":"Wv91","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-mo":"OmwH","./zh-mo.js":"OmwH","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id="RnhZ"},crnd:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="crnd"},zUnb:function(e,t,n){"use strict";n.r(t);var a=n("8Y7J"),o={production:!0,igo:{app:{forceCoordsNA:!1},catalog:{sources:[{id:"Gououvert",title:"Gouvouvert",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/igo_gouvouvert.fcgi"},{id:"glace",title:"Carte de glace",url:"https://geoegl.msp.gouv.qc.ca/apis/ws/radarsat.fcgi",showLegend:!0}]},depot:{url:"/apis/depot"},importExport:{url:"https://geoegl.msp.gouv.qc.ca/apis/ogre"},language:{prefix:"./locale/"},interactiveTour:{tourInMobile:!0,pathToConfigFile:"./config/interactiveTour.json"},searchSources:{nominatim:{available:!1},storedqueries:{available:!1},icherche:{searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche",order:2,params:{limit:"8"}},coordinatesreverse:{showInPointerSummary:!0},icherchereverse:{showInPointerSummary:!0,searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/terrapi",order:3,enabled:!0},ilayer:{searchUrl:"https://geoegl.msp.gouv.qc.ca/apis/icherche/layers",order:4,params:{limit:"5"}},cadastre:{enabled:!1}},projections:[{code:"EPSG:32198",alias:"Quebec Lambert",def:"+proj=lcc +lat_1=60 +lat_2=46 +lat_0=44 +lon_0=-68.5 +x_0=0 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[-799574,45802,891595.4,1849567.5]},{code:"EPSG:3798",alias:"MTQ Lambert",def:"+proj=lcc +lat_1=50 +lat_2=46 +lat_0=44 +lon_0=-70 +x_0=800000 +y_0=0           +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs",extent:[31796.5834,158846.2231,1813323.4284,2141241.0978]}],searchOverlayStyle:{base:{markerColor:"#5ed0fb",markerOpacity:.8,markerOutlineColor:"#a7e7ff",fillColor:"#5ed0fb",fillOpacity:.2,strokeColor:"#5ed0fb",strokeOpacity:.7,strokeWidth:2},focus:{markerColor:"#5ed0fb",markerOpacity:1,markerOutlineColor:"#DFF7FF",fillColor:"#5ed0fb",fillOpacity:.3,strokeColor:"#DFF7FF",strokeOpacity:1,strokeWidth:2},selection:{markerColor:"#00a1de",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"#00a1de",fillOpacity:.3,strokeColor:"#00A1DE",strokeOpacity:1,strokeWidth:2}},queryOverlayStyle:{base:{markerColor:"#5ed0fb",markerOpacity:.8,markerOutlineColor:"#a7e7ff",fillColor:"#5ed0fb",fillOpacity:.2,strokeColor:"#5ed0fb",strokeOpacity:.7,strokeWidth:2},focus:{markerColor:"#5ed0fb",markerOpacity:1,markerOutlineColor:"#DFF7FF",fillColor:"#5ed0fb",fillOpacity:.3,strokeColor:"#DFF7FF",strokeOpacity:1,strokeWidth:2},selection:{markerColor:"#00a1de",markerOpacity:1,markerOutlineColor:"#ffffff",fillColor:"#00a1de",fillOpacity:.3,strokeColor:"#00A1DE",strokeOpacity:1,strokeWidth:2}}}};n("yLV6");var i=n("cUpR"),s=n("iInd"),r=n("omvX"),c=n("0FwY"),l=n("f3B2"),p=n("HdQ8"),d=n("wdc6"),u=n("SVse"),h=n("Dxy4"),m=n("Tj54"),g=n("q7Ft"),f=n("ZFy/"),x=n("iELJ"),b=n("NDON"),v=n("WXI3"),y=function(e){return{width:e}};function w(e,t){if(1&e&&(a.pc(0),a.mc(1,"img",6),a.oc()),2&e){var n=a.Bc(2).$implicit;a.Yb(1),a.Hc("src",n.imgSrc,a.Uc)("alt",n.alt)("ngStyle",a.Kc(3,y,n.imgSize))}}function O(e,t){if(1&e&&(a.rc(0,"a",4),a.cd(1),a.ad(2,w,2,5,"ng-container",5),a.qc()),2&e){var n=a.Bc().$implicit;a.Hc("href",n.link,a.Uc),a.Yb(1),a.ed(" ",n.text," "),a.Yb(1),a.Hc("ngIf",n.imgSrc)}}function S(e,t){if(1&e&&(a.pc(0),a.mc(1,"img",6),a.oc()),2&e){var n=a.Bc(2).$implicit;a.Yb(1),a.Hc("src",n.imgSrc,a.Uc)("alt",n.alt)("ngStyle",a.Kc(3,y,n.imgSize))}}function C(e,t){if(1&e&&(a.cd(0),a.ad(1,S,2,5,"ng-container",5)),2&e){var n=a.Bc().$implicit;a.ed(" ",n.text," "),a.Yb(1),a.Hc("ngIf",n.imgSrc)}}function k(e,t){if(1&e&&(a.pc(0),a.rc(1,"div",1),a.ad(2,O,3,3,"a",2),a.ad(3,C,2,2,"ng-template",null,3,a.bd),a.qc(),a.oc()),2&e){var n=t.$implicit,o=a.Pc(4);a.Yb(1),a.Xc("position",n.fixed?"fixed":"absolute")("margin-left",n.marginLeft)("margin-right",n.marginRight)("margin-top",n.marginTop)("margin-bottom",n.marginBottom)("font-size",n.fontSize),a.Hc("ngClass",n.cssClass),a.Yb(1),a.Hc("ngIf",n.link)("ngIfElse",o)}}var j=function(){function e(t,n,a){_classCallCheck(this,e),this.contextService=t,this.mediaService=n,this.configService=a,this.mapOverlay=[]}return _createClass(e,[{key:"ngAfterViewInit",value:function(){var e=this;this.context$$=this.contextService.context$.subscribe((function(t){e.handleContextChange(t),e.context=t})),this.media$$=this.mediaService.media$.subscribe((function(t){return e.handleContextChange(e.context)}))}},{key:"ngOnDestroy",value:function(){this.context$$.unsubscribe(),this.media$$.unsubscribe()}},{key:"handleContextChange",value:function(e){var t=[];if(void 0!==e){this.mapOverlay=[],e.mapOverlay?t=e.mapOverlay:this.configService.getConfig("mapOverlay")&&(t=this.configService.getConfig("mapOverlay"));var n,a=_createForOfIteratorHelper(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;(!o.media&&"desktop"===this.mediaService.getMedia()||o.media&&o.media.includes(this.mediaService.getMedia()))&&this.mapOverlay.push(o)}}catch(i){a.e(i)}finally{a.f()}}}}]),e}();j.\u0275fac=function(e){return new(e||j)(a.lc(b.h),a.lc(c.k),a.lc(c.c))},j.\u0275cmp=a.fc({type:j,selectors:[["app-map-overlay"]],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mapOverlayDefault",3,"ngClass"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["templateNoLink",""],["target","_blank",3,"href"],[4,"ngIf"],[3,"src","alt","ngStyle"]],template:function(e,t){1&e&&a.ad(0,k,5,15,"ng-container",0),2&e&&a.Hc("ngForOf",t.mapOverlay)},directives:[u.k,u.j,u.l,u.m],styles:["[_nghost-%COMP%]{height:100%;top:0;left:0;right:0;position:fixed;pointer-events:none}.mapOverlayDefault[_ngcontent-%COMP%]{position:absolute;white-space:nowrap;pointer-events:auto}.bottom-right[_ngcontent-%COMP%]{bottom:0;right:0}.top-right[_ngcontent-%COMP%]{top:0;right:0}.bottom-left[_ngcontent-%COMP%]{bottom:0;left:0}.top-left[_ngcontent-%COMP%]{top:0;left:0}.bottom-center[_ngcontent-%COMP%]{bottom:0}.bottom-center[_ngcontent-%COMP%], .top-center[_ngcontent-%COMP%]{left:50%;transform:translate(-50%)}.top-center[_ngcontent-%COMP%]{top:0}.center-center[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%)}.center-right[_ngcontent-%COMP%]{top:50%;right:0}.center-left[_ngcontent-%COMP%]{top:50%;left:0}"]});var P=function e(){_classCallCheck(this,e)};P.\u0275fac=function(e){return new(e||P)},P.\u0275mod=a.jc({type:P}),P.\u0275inj=a.ic({imports:[[u.c]]});var _=n("SqCe"),M=n("rJgo"),E=n("ZTz/"),T=n("GS7A");var $=n("TSSN");function B(e,t){1&e&&a.mc(0,"mat-icon",5)}function R(e,t){1&e&&a.mc(0,"mat-icon",6)}var z=function(){function e(){_classCallCheck(this,e),this.expandedChange=new a.v}return _createClass(e,[{key:"onToggleClick",value:function(){this.expanded=!this.expanded}},{key:"expanded",get:function(){return this._expanded},set:function(e){e!==this._expanded&&(this._expanded=e,this.expandedChange.emit(this._expanded))}},{key:"hasExpandedClass",get:function(){return this.expanded}}]),e}();z.\u0275fac=function(e){return new(e||z)},z.\u0275cmp=a.fc({type:z,selectors:[["app-expansion-panel-header"]],hostVars:2,hostBindings:function(e,t){2&e&&a.dc("app-expansion-panel-header-expanded",t.hasExpandedClass)},inputs:{expanded:"expanded"},outputs:{expandedChange:"expandedChange"},ngContentSelectors:["*"],decls:8,vars:5,consts:[[1,"app-expansion-panel-trigger-container"],["mat-icon-button","","color","primary",3,"matTooltip","click"],["svgIcon","launch",4,"ngIf"],["style","transform: rotate(180deg)","svgIcon","launch",4,"ngIf"],[1,"app-expansion-panel-content"],["svgIcon","launch"],["svgIcon","launch",2,"transform","rotate(180deg)"]],template:function(e,t){1&e&&(a.Gc(),a.rc(0,"div"),a.rc(1,"div",0),a.rc(2,"button",1),a.xc("click",(function(){return t.onToggleClick()})),a.Cc(3,"translate"),a.ad(4,B,1,0,"mat-icon",2),a.ad(5,R,1,0,"mat-icon",3),a.qc(),a.qc(),a.rc(6,"div",4),a.Fc(7),a.qc(),a.qc()),2&e&&(a.Yb(2),a.Hc("matTooltip",a.Dc(3,3,t.expanded?"workspace.close":"workspace.open")),a.Yb(2),a.Hc("ngIf",!t.expanded),a.Yb(1),a.Hc("ngIf",t.expanded))},directives:[h.a,f.a,u.l,m.a],pipes:[$.d],styles:["[_nghost-%COMP%]{display:block;height:calc(40px + 10px);border-bottom:2px solid #f0f8ff}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{display:flex}.app-expansion-panel-content[_ngcontent-%COMP%], .app-expansion-panel-trigger-container[_ngcontent-%COMP%]{display:contents}"],changeDetection:0});var F=[[["","expansionPanelHeader",""]],"*"],I=function(){function e(){_classCallCheck(this,e),this.maximized=!1,this.expandedChange=new a.v}return _createClass(e,[{key:"onBackdropClick",value:function(){this.expanded=!1,this.backdropShown=!1}},{key:"expanded",get:function(){return this._expanded},set:function(e){e!==this._expanded&&(this._expanded=e,this.expandedChange.emit(this._expanded))}},{key:"backdropShown",get:function(){return this._backdropShown},set:function(e){this._backdropShown=e}},{key:"hasExpandedClass",get:function(){return this.expanded&&!this.maximized}},{key:"hasExpandedFullClass",get:function(){return this.expanded&&this.maximized}}]),e}();I.\u0275fac=function(e){return new(e||I)},I.\u0275cmp=a.fc({type:I,selectors:[["app-expansion-panel"]],hostVars:4,hostBindings:function(e,t){2&e&&a.dc("app-expansion-panel-expanded",t.hasExpandedClass)("app-expansion-panel-expanded-maximized",t.hasExpandedFullClass)},inputs:{expanded:"expanded",maximized:"maximized",backdropShown:"backdropShown"},outputs:{expandedChange:"expandedChange"},ngContentSelectors:["[expansionPanelHeader]","*"],decls:7,vars:3,consts:[[1,"app-expansion-panel-container"],[3,"shown","click"],[3,"expanded","expandedChange"],[1,"app-expansion-panel-content","mat-elevation-z4"]],template:function(e,t){1&e&&(a.Gc(F),a.rc(0,"div"),a.rc(1,"div",0),a.rc(2,"igo-backdrop",1),a.xc("click",(function(){return t.onBackdropClick()})),a.qc(),a.rc(3,"app-expansion-panel-header",2),a.xc("expandedChange",(function(e){return t.expanded=e})),a.Fc(4),a.qc(),a.rc(5,"div",3),a.Fc(6,1),a.qc(),a.qc(),a.qc()),2&e&&(a.Yb(2),a.Hc("shown",t.backdropShown),a.Yb(1),a.Hc("expanded",t.expanded),a.Yb(2),a.Hc("@showContent",t.expanded))},directives:[l.d,z],styles:["[_nghost-%COMP%]{-o-box-shadow:0 0 2px 0 #ddd;box-shadow:0 0 2px 0 #ddd;display:block;background-color:#fff;height:40px;width:40px;transition:height .2s cubic-bezier(.4,0,.2,1),width .2s cubic-bezier(.4,0,.2,1)}.app-expansion-panel-container[_ngcontent-%COMP%]{height:100%;width:100%}.app-expansion-panel-expanded[_nghost-%COMP%]{height:281px;width:100%;z-index:6}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-expansion-panel-expanded.footer[_nghost-%COMP%]{margin-bottom:48px}}.app-expansion-panel-expanded-maximized[_nghost-%COMP%]{height:496px;width:100%;z-index:6}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-expansion-panel-expanded-maximized.footer[_nghost-%COMP%]{margin-bottom:48px}}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:100%;width:100%}.app-expansion-panel-content[_ngcontent-%COMP%]{height:calc(100% - calc(40px + 10px));overflow:auto;padding:5px}igo-backdrop[_ngcontent-%COMP%]    >div{z-index:120!important}.app-expansion-panel-content[_ngcontent-%COMP%]     .igo-entity-table-with-selection{width:100%}"],data:{animation:[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"150ms",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"300ms",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ease-in-out";return Object(T.m)("showContent",[Object(T.j)("true",Object(T.k)({opacity:1,display:"block"})),Object(T.j)("false",Object(T.k)({opacity:0,display:"none"})),Object(T.l)("false => true",Object(T.e)("".concat(e," ").concat(t," ").concat(n))),Object(T.l)("true => false",Object(T.e)("0ms"))])}()]},changeDetection:0});var D=function e(){_classCallCheck(this,e)};D.\u0275fac=function(e){return new(e||D)},D.\u0275mod=a.jc({type:D}),D.\u0275inj=a.ic({imports:[[u.c,h.b,m.b,M.c,_.e,E.b,f.b,c.f,l.w]]});var H=n("2Vo4"),A=n("itXk"),q=n("Kj3r"),W=n("vkgz"),Y=n("32Ea"),L=n("lJxs"),V=n("ouHB"),N=n("TN97"),U=n("9ANI"),Q=n("8Qe2");function X(e,t){if(1&e){var n=a.sc();a.rc(0,"button",15),a.xc("click",(function(){return a.Rc(n),a.Bc(3).zoomTo()})),a.Cc(1,"translate"),a.Cc(2,"async"),a.mc(3,"mat-icon",16),a.Cc(4,"async"),a.Cc(5,"async"),a.qc()}if(2&e){var o=a.Bc(3);a.Hc("matTooltip",a.Dc(1,3,a.Dc(2,5,o.isSelectedResultOutOfView$)?"toastPanel.zoomOnFeatureTooltipOutOfView":"toastPanel.zoomOnFeatureTooltip")),a.Yb(3),a.Hc("matBadge",a.Dc(4,7,o.isSelectedResultOutOfView$)?"!":"")("matBadgeHidden",!a.Dc(5,9,o.isSelectedResultOutOfView$))}}function G(e,t){if(1&e){var n=a.sc();a.rc(0,"button",17),a.xc("click",(function(){return a.Rc(n),a.Bc(3).previousResult()})),a.Cc(1,"translate"),a.mc(2,"mat-icon",18),a.qc()}if(2&e){var o=a.Bc(3);a.Hc("disabled",o.results[0].meta.id===o.resultSelected$.value.meta.id)("matTooltip",a.Dc(1,2,"toastPanel.previousFeatureTooltip"))}}function Z(e,t){if(1&e){var n=a.sc();a.rc(0,"button",19),a.xc("click",(function(){return a.Rc(n),a.Bc(3).nextResult()})),a.Cc(1,"translate"),a.mc(2,"mat-icon",20),a.qc()}if(2&e){var o=a.Bc(3);a.Hc("disabled",o.results[o.results.length-1].meta.id===o.resultSelected$.value.meta.id)("matTooltip",a.Dc(1,2,"toastPanel.nextFeatureTooltip"))}}function J(e,t){if(1&e){var n=a.sc();a.rc(0,"button",21),a.xc("click",(function(){return a.Rc(n),a.Bc(3).resizeWindows()})),a.Cc(1,"translate"),a.Cc(2,"async"),a.mc(3,"mat-icon",22),a.qc()}if(2&e){var o=a.Bc(3);a.Hc("matTooltip",a.Dc(1,2,a.Dc(2,4,o.fullExtent$)?"toastPanel.standardExtentTooltip":"toastPanel.fullExtentTooltip")),a.Yb(3),a.Ic("svgIcon",o.iconResizeWindows)}}function K(e,t){if(1&e){var n=a.sc();a.rc(0,"igo-feature-details",23),a.xc("htmlDisplayEvent",(function(e){return a.Rc(n),a.Bc(3).setHtmlDisplay(e)})),a.qc()}if(2&e){var o=a.Bc(3);a.Hc("feature",o.resultSelected$.value.data)}}function ee(e,t){if(1&e){var n=a.sc();a.rc(0,"igo-search-results",24),a.xc("resultFocus",(function(e){return a.Rc(n),a.Bc(3).focusResult(e)}))("resultUnfocus",(function(e){return a.Rc(n),a.Bc(3).unfocusResult(e,!0)}))("resultSelect",(function(e){return a.Rc(n),a.Bc(3).selectResult(e)})),a.qc()}if(2&e){var o=a.Bc(3);a.Hc("map",o.map)("store",o.store)("showIcons",!0)("withZoomButton",o.withZoomButton)}}function te(e,t){if(1&e){var n=a.sc();a.rc(0,"igo-panel",3),a.xc("click",(function(e){return a.Rc(n),a.Bc(2).onToggleClick(e)}))("keydown",(function(e){return a.Rc(n),a.Bc(2).handleKeyboardEvent(e)})),a.Cc(1,"translate"),a.mc(2,"igo-actionbar",4),a.ad(3,X,6,11,"button",5),a.ad(4,G,3,4,"button",6),a.ad(5,Z,3,4,"button",7),a.ad(6,J,4,6,"button",8),a.rc(7,"button",9),a.xc("click",(function(){return a.Rc(n),a.Bc(2).clear()})),a.mc(8,"mat-icon",10),a.qc(),a.rc(9,"div",11,12),a.ad(11,K,1,1,"igo-feature-details",13),a.ad(12,ee,1,4,"igo-search-results",14),a.qc(),a.qc()}if(2&e){var o=a.Bc(2);a.Hc("ngClass",o.getClassPanel())("title",o.resultSelected$.value?o.getTitle(o.resultSelected$.value):a.Dc(1,14,"toastPanel.title")),a.Yb(2),a.Hc("store",o.actionStore)("withIcon",!0)("icon",o.icon)("withTitle","overlay"===o.actionbarMode)("horizontal",!0)("mode",o.actionbarMode),a.Yb(1),a.Hc("ngIf",o.resultSelected$.value),a.Yb(1),a.Hc("ngIf",o.resultSelected$.value),a.Yb(1),a.Hc("ngIf",o.resultSelected$.value),a.Yb(1),a.Hc("ngIf",o.isDesktop()),a.Yb(5),a.Hc("ngIf",o.resultSelected$.value),a.Yb(1),a.Hc("ngIf",!o.resultSelected$.value)}}function ne(e,t){if(1&e&&(a.ad(0,te,13,16,"igo-panel",2),a.Cc(1,"async")),2&e){var n=a.Bc();a.Hc("ngIf",a.Dc(1,1,n.store.entities$))}}function ae(e,t){}function oe(e,t){if(1&e){var n=a.sc();a.rc(0,"div",25),a.xc("swipeleft",(function(e){return a.Rc(n),a.Bc().swipe(e.type)}))("swiperight",(function(e){return a.Rc(n),a.Bc().swipe(e.type)}))("swipeup",(function(e){return a.Rc(n),a.Bc().swipe(e.type)}))("swipedown",(function(e){return a.Rc(n),a.Bc().swipe(e.type)})),a.ad(1,ae,0,0,"ng-template",26),a.qc()}if(2&e){a.Bc();var o=a.Pc(1);a.Yb(1),a.Hc("ngTemplateOutlet",o)}}var ie=function(){function e(t,n,o,i){_classCallCheck(this,e),this.mediaService=t,this.languageService=n,this.storageState=o,this.queryState=i,this._opened=!0,this.hasFeatureEmphasisOnSelection=!1,this._zoomAuto=!1,this._fullExtent=!1,this.fullExtent$=new H.a(this.fullExtent),this.isHtmlDisplay=!1,this.iconResizeWindows="",this.icon="menu",this.actionStore=new l.a([]),this.actionbarMode=l.c.Overlay,this.multiple$=new H.a(!1),this.isResultSelected$=new H.a(!1),this.isSelectedResultOutOfView$=new H.a(!1),this.initialized=!0,this.format=new V.a,this.focusedResult$=new H.a(void 0),this.withZoomButton=!0,this.zoomAuto$=new H.a(!1),this.openedChange=new a.v,this.fullExtentEvent=new a.v,this.windowHtmlDisplayEvent=new a.v,this.resultSelected$=new H.a(void 0),this.opened=this.storageService.get("toastOpened"),this.zoomAuto=this.storageService.get("zoomAuto"),this.fullExtent=this.storageService.get("fullExtent"),this.setResizeWindowIcon()}return _createClass(e,[{key:"getClassPanel",value:function(){return{"app-toast-panel-opened":this.opened&&!this.fullExtent&&!this.isHtmlDisplay,"app-full-toast-panel-opened":this.opened&&this.fullExtent&&!this.isHtmlDisplay,"app-toast-panel-html":this.opened&&!this.fullExtent&&this.resultSelected$.value&&this.isHtmlDisplay,"app-toast-panel-html-large":this.opened&&this.fullExtent&&this.resultSelected$.value&&this.isHtmlDisplay,"app-toast-panel-collapsed":!this.opened&&!this.fullExtent&&!this.isHtmlDisplay,"app-full-toast-panel-collapsed":!this.opened&&this.fullExtent&&!this.isHtmlDisplay,"app-toast-panel-html-collapsed":!this.opened&&this.isHtmlDisplay}}},{key:"onEscapeHandler",value:function(e){this.clear()}},{key:"onBackHandler",value:function(e){this.unselectResult()}},{key:"onZoomHandler",value:function(e){if(!0===this.isResultSelected$.getValue()){var t=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});Object(d.fc)(this.map,[t],d.p.Default)}}},{key:"monitorResultOutOfView",value:function(){var e=this;this.isSelectedResultOutOfView$$=Object(A.a)([this.map.viewController.state$,this.resultSelected$]).pipe(Object(q.a)(100)).subscribe((function(t){var n=t[1];if(n){var a=Object(d.Vb)(n.data,e.map.projection),o=Object(d.Rb)(e.map,[a]);e.isSelectedResultOutOfView$.next(Object(d.Xb)(e.map,o))}else e.isSelectedResultOutOfView$.next(!1)}))}},{key:"ngOnInit",value:function(){var e,t,n=this;this.store.entities$.subscribe((function(){n.initialized=!0})),this.monitorResultOutOfView(),this.hasFeatureEmphasisOnSelection&&(this.resultOrResolution$$=Object(A.a)([this.focusedResult$.pipe(Object(W.a)((function(n){e=n,t="focused"}))),this.resultSelected$.pipe(Object(W.a)((function(n){e=n,t="selected"}))),this.map.viewController.resolution$,this.store.entities$]).subscribe((function(){return n.buildResultEmphasis(e,t)}))),this.storageChange$$=this.storageService.storageChange$.pipe(Object(Y.a)((function(e){return"zoomAuto"!==e.key}))).subscribe((function(e){n.zoomAuto=e.currentValue})),this.actionStore.load([{id:"list",title:this.languageService.translate.instant("toastPanel.backToList"),icon:"format-list-bulleted-square",tooltip:this.languageService.translate.instant("toastPanel.listButton"),display:function(){return n.isResultSelected$},handler:function(){n.unselectResult()}},{id:"zoomFeature",title:this.languageService.translate.instant("toastPanel.zoomOnFeature"),icon:"magnify-plus-outline",tooltip:this.languageService.translate.instant("toastPanel.zoomOnFeatureTooltip"),display:function(){return n.isResultSelected$},handler:function(){var e=n.format.readFeature(n.resultSelected$.getValue().data,{dataProjection:n.resultSelected$.getValue().data.projection,featureProjection:n.map.projection});Object(d.fc)(n.map,[e],d.p.Zoom)}},{id:"zoomResults",title:this.languageService.translate.instant("toastPanel.zoomOnFeatures"),tooltip:this.languageService.translate.instant("toastPanel.zoomOnFeaturesTooltip"),icon:"magnify-scan",availability:function(){return n.multiple},handler:function(){var e,t=[],a=_createForOfIteratorHelper(n.store.all());try{for(a.s();!(e=a.n()).done;){var o=e.value,i=n.format.readFeature(o.data,{dataProjection:o.data.projection,featureProjection:n.map.projection});t.push(i)}}catch(s){a.e(s)}finally{a.f()}Object(d.fc)(n.map,t,d.p.Zoom)}},{id:"zoomAuto",title:this.languageService.translate.instant("toastPanel.zoomAuto"),tooltip:this.languageService.translate.instant("toastPanel.zoomAutoTooltip"),checkbox:!0,checkCondition:this.zoomAuto$,handler:function(){n.zoomAuto=!n.zoomAuto,n.zoomAuto&&!0===n.isResultSelected$.value&&n.selectResult(n.resultSelected$.getValue())}},{id:"fullExtent",title:this.languageService.translate.instant("toastPanel.fullExtent"),tooltip:this.languageService.translate.instant("toastPanel.fullExtentTooltip"),icon:"arrow-expand",display:function(){return n.fullExtent$.pipe(Object(L.a)((function(e){return!e&&!n.isDesktop()})))},handler:function(){n.fullExtent=!0}},{id:"standardExtent",title:this.languageService.translate.instant("toastPanel.standardExtent"),tooltip:this.languageService.translate.instant("toastPanel.standardExtentTooltip"),icon:"arrow-collapse",display:function(){return n.fullExtent$.pipe(Object(L.a)((function(e){return e&&!n.isDesktop()})))},handler:function(){n.fullExtent=!1}}])}},{key:"ngOnDestroy",value:function(){this.resultOrResolution$$&&this.resultOrResolution$$.unsubscribe(),this.isSelectedResultOutOfView$$&&this.isSelectedResultOutOfView$$.unsubscribe(),this.storageChange$$&&this.storageChange$$.unsubscribe()}},{key:"buildResultEmphasis",value:function(e,t){if(this.clearFeatureEmphasis(),e&&("selected"!==t||!this.zoomAuto)){var n=Object(d.Vb)(e.data,this.map.projection).getGeometry();if(Object(d.Yb)(this.map,n.getExtent(),.0025)){var a=n.getExtent(),o=a[0]+(a[2]-a[0])/2,i=a[1]+(a[3]-a[1])/2,s=new N.a({name:"abstractFocusedOrSelectedResult",geometry:new U.a([o,i])});this.abstractFocusedOrSelectedResult=Object(d.Ub)(s,this.map.projection),this.abstractFocusedOrSelectedResult.meta.style=Object(d.ac)(Object.assign({},{feature:this.abstractFocusedOrSelectedResult},"selected"===t?this.queryState.queryOverlayStyleSelection:this.queryState.queryOverlayStyleFocus)),this.abstractFocusedOrSelectedResult.meta.style.setZIndex(2e3),this.map.queryResultsOverlay.addFeature(this.abstractFocusedOrSelectedResult,d.p.None)}}}},{key:"clearFeatureEmphasis",value:function(){this.abstractFocusedOrSelectedResult&&(this.map.queryResultsOverlay.removeFeature(this.abstractFocusedOrSelectedResult),this.abstractFocusedOrSelectedResult=void 0)}},{key:"getTitle",value:function(e){return Object(l.sb)(e)}},{key:"focusResult",value:function(e){this.focusedResult$.next(e),this.map.queryResultsOverlay.removeFeature(e.data),e.data.meta.style=Object(d.ac)(Object.assign({},{feature:e.data},this.queryState.queryOverlayStyleFocus)),e.data.meta.style.setZIndex(2e3),this.map.queryResultsOverlay.addFeature(e.data,d.p.None)}},{key:"unfocusResult",value:function(e,t){this.focusedResult$.next(void 0),!t&&this.store.state.get(e).focused||(this.map.queryResultsOverlay.removeFeature(e.data),e.data.meta.style=Object(d.bc)(Object.assign({},{feature:e.data},this.queryState.queryOverlayStyle)),e.data.meta.style.setZIndex(void 0),this.map.queryResultsOverlay.addFeature(e.data,d.p.None))}},{key:"selectResult",value:function(e){this.store.state.update(e,{focused:!0,selected:!0},!0),this.resultSelected$.next(e),e.data.properties&&"iframe"===e.data.properties.target?this.setHtmlDisplay(!0):this.setHtmlDisplay(!1);var t,n=[],a=_createForOfIteratorHelper(this.store.all());try{for(a.s();!(t=a.n()).done;){var o=t.value;o.meta.id===e.meta.id?(o.data.meta.style=Object(d.ac)(Object.assign({},{feature:o.data},this.queryState.queryOverlayStyleSelection)),o.data.meta.style.setZIndex(2e3)):o.data.meta.style=Object(d.bc)(Object.assign({},{feature:o.data},this.queryState.queryOverlayStyle)),n.push(o.data)}}catch(s){a.e(s)}finally{a.f()}if(this.map.queryResultsOverlay.removeFeatures(n),this.map.queryResultsOverlay.addFeatures(n,d.p.None),this.zoomAuto){var i=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});Object(d.fc)(this.map,[i],d.p.Default)}this.isResultSelected$.next(!0),this.initialized=!1}},{key:"unselectResult",value:function(){this.resultSelected$.next(void 0),this.isResultSelected$.next(!1),this.setHtmlDisplay(!1),this.store.state.clear();var e,t=[],n=_createForOfIteratorHelper(this.store.all());try{for(n.s();!(e=n.n()).done;){var a=e.value;a.data.meta.style=Object(d.bc)(Object.assign({},{feature:a.data},this.queryState.queryOverlayStyle)),t.push(a.data)}}catch(o){n.e(o)}finally{n.f()}this.map.queryResultsOverlay.setFeatures(t,d.p.None,"map")}},{key:"clear",value:function(){this.clearFeatureEmphasis(),this.map.queryResultsOverlay.clear(),this.store.clear(),this.unselectResult(),this.setHtmlDisplay(!1)}},{key:"isMobile",value:function(){return this.mediaService.getMedia()===c.i.Mobile}},{key:"isDesktop",value:function(){return this.mediaService.isDesktop()}},{key:"handleKeyboardEvent",value:function(e){e.preventDefault(),37===e.keyCode?this.previousResult():39===e.keyCode&&this.nextResult()}},{key:"previousResult",value:function(){if(this.resultSelected$.value){var e=this.results.indexOf(this.resultSelected$.value),t=this.results[--e];t&&this.selectResult(t)}}},{key:"nextResult",value:function(){if(this.resultSelected$.value){var e=this.results.indexOf(this.resultSelected$.value),t=this.results[++e];t&&this.selectResult(t)}}},{key:"zoomTo",value:function(){var e=this.format.readFeature(this.resultSelected$.getValue().data,{dataProjection:this.resultSelected$.getValue().data.projection,featureProjection:this.map.projection});Object(d.fc)(this.map,[e],d.p.Zoom)}},{key:"swipe",value:function(t){t===e.SWIPE_ACTION.RIGHT?this.previousResult():t===e.SWIPE_ACTION.LEFT?this.nextResult():t===e.SWIPE_ACTION.UP?this.opened=!0:t===e.SWIPE_ACTION.DOWN&&(this.opened=!1)}},{key:"onToggleClick",value:function(e){"igo-panel-title"===e.target.className&&(this.opened=!this.opened)}},{key:"onTriggerAction",value:function(e){var t=e.args||[];e.handler.apply(e,_toConsumableArray(t))}},{key:"setHtmlDisplay",value:function(e){!0===e?(this.isHtmlDisplay=!0,this.windowHtmlDisplayEvent.emit(!0)):(this.isHtmlDisplay=!1,this.windowHtmlDisplayEvent.emit(!1))}},{key:"isHtmlAndDesktop",value:function(){return!(!this.isHtmlDisplay||!this.isDesktop())}},{key:"setResizeWindowIcon",value:function(){this.fullExtent?this.iconResizeWindows="arrow-collapse":this.iconResizeWindows="arrow-expand"}},{key:"resizeWindows",value:function(){this.storageService.set("fullExtent",!this.fullExtent),this.fullExtent?this.reduceWindow():this.enlargeWindows()}},{key:"reduceWindow",value:function(){this.fullExtent=!1,this.setResizeWindowIcon()}},{key:"enlargeWindows",value:function(){this.fullExtent=!0,this.setResizeWindowIcon()}},{key:"storageService",get:function(){return this.storageState.storageService}},{key:"map",get:function(){return this._map},set:function(e){this._map=e}},{key:"store",get:function(){return this._store},set:function(e){var t=this;this._store=e,this.store.entities$.subscribe((function(e){t.unselectResult()}))}},{key:"opened",get:function(){return this._opened},set:function(e){e===!this._opened&&(this._opened=e,this.storageService.set("toastOpened",e,c.p.SESSION),this.openedChange.emit(e))}},{key:"zoomAuto",get:function(){return this._zoomAuto},set:function(e){e===!this._zoomAuto&&(this._zoomAuto=e,this.zoomAuto$.next(e),this.storageService.set("zoomAuto",e))}},{key:"fullExtent",get:function(){return this._fullExtent},set:function(e){e===!this._fullExtent&&(this._fullExtent=e,this.fullExtent$.next(e),this.fullExtentEvent.emit(e),this.storageService.set("fullExtent",e))}},{key:"displayStyle",get:function(){return this.results.length?(1===this.results.length&&this.initialized&&this.selectResult(this.results[0]),"visible"):"hidden"}},{key:"results",get:function(){return this.store.all()}},{key:"multiple",get:function(){return this.results.length?this.multiple$.next(!0):this.multiple$.next(!1),this.multiple$}}]),e}();ie.SWIPE_ACTION={RIGHT:"swiperight",LEFT:"swipeleft",UP:"swipeup",DOWN:"swipedown"},ie.\u0275fac=function(e){return new(e||ie)(a.lc(c.k),a.lc(c.h),a.lc(v.i),a.lc(v.g))},ie.\u0275cmp=a.fc({type:ie,selectors:[["app-toast-panel"]],hostVars:2,hostBindings:function(e,t){1&e&&a.xc("keydown.escape",(function(e){return t.onEscapeHandler(e)}),!1,a.Qc)("keydown.backspace",(function(e){return t.onBackHandler(e)}),!1,a.Qc)("keydown.z",(function(e){return t.onZoomHandler(e)}),!1,a.Qc),2&e&&a.Xc("visibility",t.displayStyle)},inputs:{map:"map",store:"store",opened:"opened",hasFeatureEmphasisOnSelection:"hasFeatureEmphasisOnSelection"},outputs:{openedChange:"openedChange",fullExtentEvent:"fullExtentEvent",windowHtmlDisplayEvent:"windowHtmlDisplayEvent"},decls:3,vars:2,consts:[["toast",""],["class","swipe-fix",3,"swipeleft","swiperight","swipeup","swipedown",4,"ngIf","ngIfElse"],["tabindex","0",3,"ngClass","title","click","keydown",4,"ngIf"],["tabindex","0",3,"ngClass","title","click","keydown"],["id","igo-actionbar","panelLeftButton","",3,"store","withIcon","icon","withTitle","horizontal","mode"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelRightButton","",3,"click"],["svgIcon","close"],[1,"toast-content"],["content",""],[3,"feature","htmlDisplayEvent",4,"ngIf"],[3,"map","store","showIcons","withZoomButton","resultFocus","resultUnfocus","resultSelect",4,"ngIf"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"matTooltip","click"],["matBadgeColor","accent","matBadgeSize","small","svgIcon","magnify-plus-outline",3,"matBadge","matBadgeHidden"],["mat-icon-button","","igoStopPropagation","","panelLeftButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click"],["svgIcon","chevron-left"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"disabled","matTooltip","click"],["svgIcon","chevron-right"],["mat-icon-button","","igoStopPropagation","","panelRightButton","","matTooltipShowDelay","500",3,"matTooltip","click"],[3,"svgIcon"],[3,"feature","htmlDisplayEvent"],[3,"map","store","showIcons","withZoomButton","resultFocus","resultUnfocus","resultSelect"],[1,"swipe-fix",3,"swipeleft","swiperight","swipeup","swipedown"],[3,"ngTemplateOutlet"]],template:function(e,t){if(1&e&&(a.ad(0,ne,2,3,"ng-template",null,0,a.bd),a.ad(2,oe,2,1,"div",1)),2&e){var n=a.Pc(1);a.Yb(2),a.Hc("ngIf",t.isMobile())("ngIfElse",n)}},directives:[u.l,l.Y,u.j,l.b,h.a,l.eb,m.a,f.a,Q.a,d.n,d.tb,u.q],pipes:[u.b,$.d],styles:["[_nghost-%COMP%]{-o-box-shadow:0 0 2px 0 #ddd;box-shadow:0 0 2px 0 #ddd;background-color:#fff;transition:height .28s cubic-bezier(.4,0,.2,1);padding:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]{width:100%;min-width:100%}}.app-toast-panel-html[_ngcontent-%COMP%]{height:30vh;max-height:-webkit-fit-content;max-height:-moz-fit-content;max-height:fit-content;width:60vw}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-toast-panel-html[_ngcontent-%COMP%]{width:100%;min-width:100%;height:34vh}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){.app-toast-panel-html[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-html-large[_ngcontent-%COMP%]{height:55vh;width:60vw}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-toast-panel-html-large[_ngcontent-%COMP%]{width:100%;min-width:100%;max-height:65vh;height:55vh}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){.app-toast-panel-html-large[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-html-large[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{height:100%;width:100%}.app-toast-panel-opened[_ngcontent-%COMP%]{height:auto;max-height:30vh;width:42vw;max-width:600px;margin-bottom:7px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-toast-panel-opened[_ngcontent-%COMP%]{max-height:34vh;width:100%;min-width:100%}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){.app-toast-panel-opened[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-opened[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{height:100%;width:100%;max-height:calc(30vh - 34px)}.app-full-toast-panel-opened[_ngcontent-%COMP%]{height:auto;max-height:65vh;width:45vw}.app-full-toast-panel-opened[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{height:100%;width:100%;max-height:calc(65vh - 41px)}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){.app-full-toast-panel-opened[_ngcontent-%COMP%]{width:500px;max-height:500px}.app-full-toast-panel-opened[_ngcontent-%COMP%]   .toast-content[_ngcontent-%COMP%]{max-height:calc(65vh - 21vh)}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-full-toast-panel-opened[_ngcontent-%COMP%]{width:100%;min-width:100%;max-height:65vh}}.app-toast-panel-collapsed[_ngcontent-%COMP%]{height:46px!important;width:42vw;max-width:600px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-toast-panel-collapsed[_ngcontent-%COMP%]{width:100%;min-width:100%;height:35px!important}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){.app-toast-panel-collapsed[_ngcontent-%COMP%]{width:500px}}.app-full-toast-panel-collapsed[_ngcontent-%COMP%]{height:46px!important;width:45vw}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-full-toast-panel-collapsed[_ngcontent-%COMP%]{width:100%;min-width:100%;height:35px!important}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){.app-full-toast-panel-collapsed[_ngcontent-%COMP%]{width:500px}}.app-toast-panel-html-collapsed[_ngcontent-%COMP%]{height:46px!important;width:60vw}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-toast-panel-html-collapsed[_ngcontent-%COMP%]{width:100%;min-width:100%;height:35px!important}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){.app-toast-panel-html-collapsed[_ngcontent-%COMP%]{width:500px}}igo-panel[_ngcontent-%COMP%]     .igo-panel-header:hover{cursor:pointer}igo-panel[_ngcontent-%COMP%]{height:100%;outline:none}igo-panel[_ngcontent-%COMP%]     h3{display:flex}igo-panel[_ngcontent-%COMP%]     .igo-panel-title{flex-grow:2;margin:0}igo-panel[_ngcontent-%COMP%]     .igo-panel-header   [panelleftbutton], igo-panel[_ngcontent-%COMP%]     .igo-panel-header   [panelrightbutton]{margin:0}igo-panel[_ngcontent-%COMP%]     .igo-panel-content{-webkit-user-select:auto!important;-moz-user-select:auto!important;-ms-user-select:auto!important;user-select:auto!important}igo-feature-details[_ngcontent-%COMP%]     iframe{min-height:24vh}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-feature-details[_ngcontent-%COMP%]     iframe{min-height:30vh}}host.app-full-toast-panel-opened[_ngcontent-%COMP%]   igo-feature-details[_ngcontent-fiq-c23][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{min-height:450px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){host.app-full-toast-panel-opened[_ngcontent-%COMP%]   igo-feature-details[_ngcontent-fiq-c23][_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{min-height:350px}}.swipe-fix[_ngcontent-%COMP%]{touch-action:pinch-zoom!important}igo-actionbar[_ngcontent-%COMP%]{overflow:hidden}"],changeDetection:0});var se=function e(){_classCallCheck(this,e)};function re(e,t){if(1&e){var n=a.sc();a.rc(0,"button",9),a.xc("click",(function(){return a.Rc(n),a.Bc().onUnselectButtonClick()})),a.Cc(1,"translate"),a.mc(2,"mat-icon",10),a.qc()}2&e&&a.Hc("matTooltip",a.Dc(1,1,"igo.context.sidenav.mainMenu"))}function ce(e,t){if(1&e){var n=a.sc();a.rc(0,"button",11),a.xc("click",(function(){return a.Rc(n),a.Bc().onPreviousButtonClick()})),a.Cc(1,"translate"),a.mc(2,"mat-icon",12),a.qc()}2&e&&a.Hc("matTooltip",a.Dc(1,1,"igo.context.sidenav.goBack"))}se.\u0275fac=function(e){return new(e||se)},se.\u0275mod=a.jc({type:se}),se.\u0275inj=a.ic({imports:[[u.c,Q.b,m.b,h.b,f.b,M.c,c.f,l.O,l.Q,l.u,d.B,d.N]]});var le=function(e){return{toolActivated:e}},pe=function(){function e(t,n,o){_classCallCheck(this,e),this.toolState=t,this.configService=n,this.catalogState=o,this.title$=new H.a(void 0),this.openedChange=new a.v,this.toolChange=new a.v}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activeTool$$=this.toolbox.activeTool$.subscribe((function(t){var n=e.configService.getConfig("sidenavTitle")||"IGO";if(t)if("catalogBrowser"===t.name){var a,o=_createForOfIteratorHelper(e.catalogState.catalogStore.all());try{for(o.s();!(a=o.n()).done;){var i=a.value;!0===e.catalogState.catalogStore.state.get(i).selected&&e.title$.next(i.title)}}catch(l){o.e(l)}finally{o.f()}}else if("activeTimeFilter"===t.name||"activeOgcFilter"===t.name){var s,r=_createForOfIteratorHelper(e.map.layers);try{for(r.s();!(s=r.n()).done;){var c=s.value;!0===c.options.active&&e.title$.next(c.title)}}catch(l){r.e(l)}finally{r.f()}}else e.title$.next(t.title);else e.title$.next(n);e.toolChange.emit(t)}))}},{key:"ngOnDestroy",value:function(){this.activeTool$$.unsubscribe()}},{key:"onPreviousButtonClick",value:function(){this.toolbox.activatePreviousTool()}},{key:"onUnselectButtonClick",value:function(){this.toolbox.deactivateTool()}},{key:"map",get:function(){return this._map},set:function(e){this._map=e}},{key:"opened",get:function(){return this._opened},set:function(e){e!==this._opened&&(this._opened=e,this.openedChange.emit(this._opened))}},{key:"toolbox",get:function(){return this.toolState.toolbox}}]),e}();pe.\u0275fac=function(e){return new(e||pe)(a.lc(v.j),a.lc(c.c),a.lc(v.b))},pe.\u0275cmp=a.fc({type:pe,selectors:[["app-sidenav"]],inputs:{map:"map",opened:"opened"},outputs:{openedChange:"openedChange",toolChange:"toolChange"},decls:14,vars:20,consts:[["mode","side",3,"autoFocus","opened","openedChange"],[1,"app-sidenav-content"],[1,"app-content",3,"ngClass"],["content",""],["id","homeButton","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],[3,"title"],["mat-icon-button","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","click",4,"ngIf"],["panelRightButton","","styleButton","icon"],["color","primary",1,"igo-toolbox",3,"animate","toolbox"],["id","homeButton","mat-icon-button","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","click"],["svgIcon","home"],["mat-icon-button","","panelLeftButton","","tooltip-position","below","matTooltipShowDelay","500",3,"matTooltip","click"],["svgIcon","arrow-left"]],template:function(e,t){1&e&&(a.rc(0,"mat-sidenav",0),a.xc("openedChange",(function(e){return t.opened=e})),a.rc(1,"div",1),a.rc(2,"div",2,3),a.Cc(4,"async"),a.ad(5,re,3,3,"button",4),a.Cc(6,"async"),a.rc(7,"igo-panel",5),a.Cc(8,"translate"),a.Cc(9,"async"),a.ad(10,ce,3,3,"button",6),a.Cc(11,"async"),a.mc(12,"igo-interactive-tour",7),a.mc(13,"igo-toolbox",8),a.qc(),a.qc(),a.qc(),a.qc()),2&e&&(a.Hc("autoFocus",!1)("opened",t.opened),a.Yb(2),a.Hc("ngClass",a.Kc(18,le,a.Dc(4,8,t.toolbox.activeTool$))),a.Yb(3),a.Hc("ngIf",a.Dc(6,10,t.toolbox.activeTool$)),a.Yb(2),a.Hc("title",a.Dc(8,12,a.Dc(9,14,t.title$))),a.Yb(3),a.Hc("ngIf",a.Dc(11,16,t.toolbox.activeTool$)),a.Yb(3),a.Hc("animate",!0)("toolbox",t.toolbox))},directives:[g.a,u.j,u.l,l.Y,l.U,l.hb,h.a,f.a,m.a],pipes:[u.b,$.d],styles:["mat-sidenav[_ngcontent-%COMP%]{-o-box-shadow:2px 2px 2px 0 #ddd;box-shadow:2px 2px 2px 0 #ddd}[_nghost-%COMP%]{background-color:#fff}[_nghost-%COMP%]     mat-sidenav{z-index:3!important}mat-sidenav[_ngcontent-%COMP%]{height:100%;width:400px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){mat-sidenav[_ngcontent-%COMP%]{width:calc(100% - 40px - 5px);max-width:400px}}.app-content[_ngcontent-%COMP%], igo-panel[_ngcontent-%COMP%]{height:100%}.app-sidenav-content[_ngcontent-%COMP%]{margin-top:50px;height:calc(100% - 50px)}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.app-sidenav-content[_ngcontent-%COMP%]{height:calc(100% - 50px)}}igo-panel[_ngcontent-%COMP%]     .igo-panel-content{position:relative}div.toolActivated[_ngcontent-%COMP%] > igo-panel[_ngcontent-%COMP%]    >div.igo-panel-header{margin-left:50px;position:relative}#homeButton[_ngcontent-%COMP%]{position:absolute;top:50px;left:0;background-color:#1976d2;color:#fff;border-radius:0;height:46px;width:48px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-toolbox[_ngcontent-%COMP%]{overflow:auto}}"],changeDetection:0});var de=function e(){_classCallCheck(this,e)};de.\u0275fac=function(e){return new(e||de)},de.\u0275mod=a.jc({type:de}),de.\u0275inj=a.ic({imports:[[u.c,m.b,h.b,g.d,f.b,c.f,l.O,l.G,b.j,l.R,d.B,l.K]]});var ue=n("LRne"),he=n("Zy1z"),me=n("IzEk"),ge=n("SxV6"),fe=n("JW8z");var xe=n("IheW"),be=function(){function e(t,n){_classCallCheck(this,e),this.configService=t,this.storageService=n,this.igoVersionDifferentFromStorage=!1,this.igoVersionDifferentFromStorage=this.isVersionDifferentFromStorage(),this.setStorageConfig()}return _createClass(e,[{key:"setStorageConfig",value:function(){this.nbVisit=Number(this.storageService.get("welcomeWindow_nbVisit")),this.nbVisit||(this.nbVisit=0),this.storageService.set("welcomeWindow_nbVisit",this.nbVisit+=1),this.storageService.set("version",this.configService.getConfig("version.lib"))}},{key:"isVersionDifferentFromStorage",value:function(){return!(!this.storageService.get("version")||this.storageService.get("version")===this.configService.getConfig("version.lib"))}},{key:"hasWelcomeWindow",value:function(){return!1===this.storageService.get("welcomeWindow_showAgain")||"false"===this.storageService.get("welcomeWindow_showAgain")?(this.nbVisit>=this.configService.getConfig("welcomeWindow.nbVisitToShowAgain")||!(!this.configService.getConfig("welcomeWindow.showAgainOnNewIGOVersion")||!this.igoVersionDifferentFromStorage))&&(this.storageService.set("welcomeWindow_nbVisit",0),this.storageService.remove("welcomeWindow_showAgain"),!0):void 0!==this.configService.getConfig("welcomeWindow.nbVisitToShow")&&this.nbVisit>this.configService.getConfig("welcomeWindow.nbVisitToShow")?(this.storageService.set("welcomeWindow_showAgain",!1),!1):this.configService.getConfig("welcomeWindow")}},{key:"getConfig",value:function(){var e=new x.e;return e.disableClose=!0,e.autoFocus=!0,e.maxWidth="500px",e}},{key:"afterClosedWelcomeWindow",value:function(){this.storageService.set("welcomeWindow_showAgain",this.showAgain)}}]),e}();be.\u0275fac=function(e){return new(e||be)(a.vc(c.c),a.vc(c.q))},be.\u0275prov=a.hc({token:be,factory:be.\u0275fac,providedIn:"root"});var ve=n("l0rg"),ye=n("s7LF");function we(e,t){if(1&e){var n=a.sc();a.rc(0,"div",1),a.rc(1,"mat-toolbar",2),a.rc(2,"h2"),a.cd(3),a.Cc(4,"translate"),a.qc(),a.mc(5,"span",3),a.rc(6,"label"),a.rc(7,"input",4),a.xc("ngModelChange",(function(e){return a.Rc(n),a.Bc().showAgain=e}))("click",(function(){return a.Rc(n),a.Bc().setShowAgain()})),a.qc(),a.cd(8),a.Cc(9,"translate"),a.qc(),a.qc(),a.rc(10,"div",5),a.mc(11,"igo-custom-html",6),a.Cc(12,"async"),a.qc(),a.mc(13,"p"),a.rc(14,"div",7),a.rc(15,"igo-interactive-tour",8),a.xc("click",(function(){return a.Rc(n),a.Bc().closeWelcomeWindow()})),a.qc(),a.rc(16,"button",9),a.cd(17),a.Cc(18,"translate"),a.qc(),a.qc(),a.qc()}if(2&e){var o=a.Bc();a.Yb(3),a.dd(a.Dc(4,6,"welcomeWindow.title")),a.Yb(4),a.Hc("ngModel",o.showAgain),a.Yb(1),a.ed(" ",a.Dc(9,8,"welcomeWindow.notShowCheck")," "),a.Yb(3),a.Hc("html",a.Dc(12,10,o.html$)),a.Yb(4),a.Hc("discoverTitleInLocale$",o.discoverTitleInLocale$),a.Yb(2),a.dd(a.Dc(18,12,"welcomeWindow.closeButton"))}}var Oe=function(){function e(t,n,a,o){_classCallCheck(this,e),this.dialog=t,this.welcomeWindowService=n,this.configService=a,this.languageService=o,this.showAgain=!1,this.discoverTitleInLocale$=Object(ue.a)(this.configService.getConfig("title")),this.html$=new H.a(void 0)}return _createClass(e,[{key:"ngOnInit",value:function(){this.computeHtml()}},{key:"closeWelcomeWindow",value:function(){this.dialog.closeAll()}},{key:"computeHtml",value:function(){var e=this,t=0,n=!0,a=new Date(this.configService.getConfig("version.releaseDate")),o=this.configService.getConfig("version.releaseDateApp");if(o){var i=new Date(o);isNaN(i.getDate())?(console.log("The releaseDateApp config is not a valid date format"),n=!1):(t=1,a=i)}var s="";if(n){var r=a.getDate()+t;r<10&&(r="0"+r);var c=a.getMonth()+1;c<10&&(c="0"+c);var l=a.getFullYear();s="".concat(l,"-").concat(c,"-").concat(r)}else s=o;return this.title$$=this.languageService.translate.get(this.configService.getConfig("title")||"").pipe(Object(L.a)((function(t){return e.languageService.translate.instant("welcomeWindow.html",{title:t,description:e.configService.getConfig("description")||"",version:e.configService.getConfig("version.app")||e.configService.getConfig("version.lib")||"",releaseDate:s||""})}))).subscribe((function(t){return e.html$.next(t)})),this.html$}},{key:"setShowAgain",value:function(){this.welcomeWindowService.showAgain=this.showAgain}},{key:"ngOnDestroy",value:function(){this.title$$&&this.title$$.unsubscribe()}}]),e}();Oe.\u0275fac=function(e){return new(e||Oe)(a.lc(x.b),a.lc(be),a.lc(c.c),a.lc(c.h))},Oe.\u0275cmp=a.fc({type:Oe,selectors:[["app-welcome-window"]],decls:2,vars:3,consts:[["class","welcome-window",4,"ngIf"],[1,"welcome-window"],["color","primary"],[1,"spacer"],["id","doNotShowCheck","type","checkbox",3,"ngModel","ngModelChange","click"],["mat-dialog-content","",1,"text"],[1,"mat-typography",3,"html"],[1,"button-container"],["id","tour-button","styleButton","raised",3,"discoverTitleInLocale$","click"],["mat-raised-button","","color","primary","mat-dialog-close","",1,"button-close"]],template:function(e,t){1&e&&(a.ad(0,we,19,14,"div",0),a.Cc(1,"async")),2&e&&a.Hc("ngIf",a.Dc(1,1,t.html$))},directives:[u.l,ve.a,ye.a,ye.o,ye.r,x.f,l.i,l.U,h.a,x.d],pipes:[u.b,$.d],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}#doNotShowCheck[_ngcontent-%COMP%]{margin-right:5px}mat-toolbar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:revert}"]});var Se=n("nBTs");var Ce=function(){function e(){_classCallCheck(this,e),this.openedChange=new a.v}return _createClass(e,[{key:"opened",set:function(e){e!==this._opened&&(this._opened=e,this.openedChange.emit(this._opened))},get:function(){return this._opened}},{key:"hasOpenedClass",get:function(){return this.opened}},{key:"displayStyle",get:function(){return this.withHeader||this.opened?"visible":"hidden"}}]),e}();Ce.\u0275fac=function(e){return new(e||Ce)},Ce.\u0275cmp=a.fc({type:Ce,selectors:[["app-toast-panel-for-expansion"]],hostVars:4,hostBindings:function(e,t){2&e&&(a.Xc("visibility",t.displayStyle),a.dc("toast-panel-for-expansion-opened",t.hasOpenedClass))},inputs:{opened:"opened",title:"title",withHeader:"withHeader"},outputs:{openedChange:"openedChange"},ngContentSelectors:["*"],decls:4,vars:3,consts:[[3,"title","withHeader"],["content",""]],template:function(e,t){1&e&&(a.Gc(),a.rc(0,"igo-panel",0),a.rc(1,"div",null,1),a.Fc(3),a.qc(),a.qc()),2&e&&(a.Hc("title",t.title)("withHeader",t.withHeader),a.Yb(1),a.Hc("@showContent",t.opened))},directives:[l.Y],styles:["[_nghost-%COMP%]{-o-box-shadow:0 0 2px 0 #ddd;box-shadow:0 0 2px 0 #ddd;background-color:#fff;height:48px;max-height:329px;transition:height .28s cubic-bezier(.4,0,.2,1);padding:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]{max-height:40%}}.toast-panel-for-expansion-opened[_nghost-%COMP%]{height:329px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.toast-panel-for-expansion-opened[_nghost-%COMP%]{height:40%}}igo-panel[_ngcontent-%COMP%]{position:relative;height:100%}igo-panel[_ngcontent-%COMP%]     .igo-panel-header:hover{cursor:pointer}div[igostoppropagation][_ngcontent-%COMP%]{height:100%;width:100%}"],data:{animation:[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"50ms",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"280ms",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ease-in-out";return Object(T.m)("showContent",[Object(T.j)("true",Object(T.k)({opacity:1,display:"block"})),Object(T.j)("false",Object(T.k)({opacity:0,display:"none"})),Object(T.l)("false => true",Object(T.e)("".concat(e," ").concat(t," ").concat(n))),Object(T.l)("true => false",Object(T.e)("0ms"))])}()]},changeDetection:0});var ke=["mapBrowser"],je=["searchBar"];function Pe(e,t){if(1&e&&a.mc(0,"igo-geolocate-button",8),2&e){var n=a.Bc();a.Hc("map",n.map)("@controlsOffsetY",n.getControlsOffsetY())("@mobileOffsetY",n.getToastPanelStatus())}}function _e(e,t){if(1&e&&a.mc(0,"igo-user-button",8),2&e){var n=a.Bc();a.Hc("map",n.map)("@controlsOffsetY",n.getControlsOffsetY())("@mobileOffsetY",n.getToastPanelStatus())}}function Me(e,t){if(1&e&&a.mc(0,"igo-actionbar",30),2&e){var n=a.Bc().ngIf,o=a.Bc(2);a.Hc("store",n.actionStore)("withIcon",!0)("withTitle",o.actionbarWithTitle)("horizontal",!0)("withToggleButton","overlay"===o.actionbarMode)("iconColor","primary")("color","primary")("mode",o.actionbarMode)("overlayClass",o.workspaceMenuClass)}}function Ee(e,t){if(1&e){var n=a.sc();a.rc(0,"igo-entity-table-paginator",31),a.xc("paginatorChange",(function(e){return a.Rc(n),a.Bc(3).paginatorChange(e)})),a.qc()}if(2&e){var o=a.Bc().ngIf,i=a.Bc(2);a.Hc("store",o.entityStore)("entitySortChange$",i.workspaceEntitySortChange$)("paginatorOptions",i.paginatorOptions)}}var Te=function(e){return{disabled:e}};function $e(e,t){if(1&e){var n=a.sc();a.pc(0),a.rc(1,"button",25),a.xc("click",(function(){var e=a.Rc(n).ngIf;return e.layer.visible=!e.layer.visible})),a.Cc(2,"translate"),a.Cc(3,"translate"),a.mc(4,"mat-icon",26),a.Cc(5,"async"),a.qc(),a.ad(6,Me,1,9,"igo-actionbar",27),a.mc(7,"div",28),a.ad(8,Ee,1,3,"igo-entity-table-paginator",29),a.oc()}if(2&e){var o=t.ngIf,i=a.Bc(2);a.Yb(1),a.Hc("color",o.layer.visible?"primary":"default")("matTooltip",o.layer.visible?a.Dc(2,6,"igo.geo.layer.hideLayer"):a.Dc(3,8,"igo.geo.layer.showLayer")),a.Yb(3),a.Hc("ngClass",a.Kc(12,Te,!a.Dc(5,10,o.inResolutionRange$)))("svgIcon",o.layer.visible?"eye":"eye-off"),a.Yb(2),a.Hc("ngIf",o.actionStore),a.Yb(2),a.Hc("ngIf",i.workspaceVisibility())}}function Be(e,t){if(1&e){var n=a.sc();a.rc(0,"igo-entity-table",34),a.xc("entitySortChange",(function(){return a.Rc(n),a.Bc(3).entitySortChange()}))("entitySelectChange",(function(e){return a.Rc(n),a.Bc(3).entitySelectChange(e)})),a.qc()}if(2&e){var o=a.Bc().ngIf,i=a.Bc(2);a.Hc("paginator",i.workspacePaginator)("store",o.entityStore)("template",o.meta.tableTemplate)}}function Re(e,t){if(1&e&&(a.pc(0),a.ad(1,Be,1,3,"igo-entity-table",32),a.rc(2,"span",33),a.cd(3),a.Cc(4,"translate"),a.qc(),a.oc()),2&e){var n=t.ngIf,o=a.Bc(2);a.Yb(1),a.Hc("ngIf",n.entityStore&&n.meta&&n.meta.tableTemplate&&o.workspaceVisibility()),a.Yb(2),a.dd(a.Dc(4,2,o.workspaceNotAvailableMessage))}}function ze(e,t){if(1&e){var n=a.sc();a.rc(0,"app-expansion-panel",21),a.xc("expandedChange",(function(e){return a.Rc(n),a.Bc().expansionPanelExpanded=e})),a.Cc(1,"async"),a.pc(2,22),a.rc(3,"igo-workspace-selector",23),a.xc("toolToActivate",(function(e){return a.Rc(n),a.Bc().toolToActivateFromWorkspace(e)})),a.qc(),a.ad(4,$e,9,14,"ng-container",24),a.Cc(5,"async"),a.oc(),a.ad(6,Re,5,4,"ng-container",24),a.Cc(7,"async"),a.qc()}if(2&e){var o=a.Bc();a.Hc("backdropShown",o.expansionPanelBackdropShown)("expanded",o.expansionPanelExpanded)("maximized",a.Dc(1,9,o.workspaceMaximize$))("@expansionPanelSize",o.getExpansionPanelStatus())("@toastOffsetY",o.isMobile()&&!o.toastPanelOpened&&o.queryState.store.entities$.value.length>0&&!o.expansionPanelExpanded?"true":"false"),a.Yb(3),a.Hc("store",o.workspaceStore)("map",o.map),a.Yb(1),a.Hc("ngIf",a.Dc(5,11,o.selectedWorkspace$)),a.Yb(2),a.Hc("ngIf",a.Dc(7,13,o.selectedWorkspace$))}}function Fe(e,t){if(1&e){var n=a.sc();a.rc(0,"igo-workspace-widget-outlet",35),a.xc("deactivateWidget",(function(){return a.Rc(n),a.Bc().onDeactivateWorkspaceWidget()})),a.qc()}if(2&e){var o=t.ngIf;a.Hc("workspace",o)}}function Ie(e,t){if(1&e){var n=a.sc();a.rc(0,"app-toast-panel",36),a.xc("openedChange",(function(e){return a.Rc(n),a.Bc().toastOpenedChange(e)}))("fullExtentEvent",(function(e){return a.Rc(n),a.Bc().fullExtent=e}))("windowHtmlDisplayEvent",(function(e){return a.Rc(n),a.Bc().setToastPanelHtmlDisplay(e)})),a.Cc(1,"async"),a.qc()}if(2&e){var o=a.Bc();a.Hc("map",o.map)("store",o.queryStore)("hasFeatureEmphasisOnSelection",o.hasFeatureEmphasisOnSelection)("@toastPanelOffsetX",a.Dc(1,7,o.toastPanelOffsetX$))("@toastPanelOffsetY",o.getToastPanelOffsetY())("@toastPanelMobileSidenav",o.isMobile()&&o.sidenavOpened||o.isTablet()&&o.isPortrait()&&o.sidenavOpened)("opened",o.toastPanelOpened)}}function De(e,t){if(1&e&&a.mc(0,"igo-actionbar",37),2&e){var n=a.Bc();a.Hc("store",n.contextMenuStore)("withIcon",!1)("horizontal",!0)}}var He=function(e){return{"igo-attribution-offset":e}},Ae=function(){function e(t,n,a,o,i,s,r,c,p,d,u,h,m,g,f,x,b,v,y,w,O,S,C,k){_classCallCheck(this,e),this.route=t,this.workspaceState=n,this.authService=a,this.mediaService=o,this.layerService=i,this.dataSourceService=s,this.cdRef=r,this.capabilitiesService=c,this.contextState=p,this.mapState=d,this.searchState=u,this.queryState=h,this.toolState=m,this.searchSourceService=g,this.configService=f,this.importService=x,this.http=b,this.languageService=v,this.messageService=y,this.welcomeWindowService=w,this.dialogWindow=O,this.queryService=S,this.storageService=C,this.directionState=k,this.toastPanelOffsetX$=new H.a(void 0),this.sidenavOpened$=new H.a(!1),this.minSearchTermLength=2,this.hasExpansionPanel=!1,this.hasGeolocateButton=!0,this.showRotationButtonIfNoRotation=!1,this.hasFeatureEmphasisOnSelection=!1,this.workspaceNotAvailableMessage="workspace.disabled.resolution",this.workspaceEntitySortChange$=new H.a(!1),this.paginatorOptions={pageSize:50,pageSizeOptions:[1,5,10,20,50,100,500]},this.workspaceMenuClass="workspace-menu",this.fullExtent=this.storageService.get("fullExtent"),this.workspaceMaximize$$=[],this.workspaceMaximize$=new H.a(this.storageService.get("workspaceMaximize")),this.searchBarTerm="",this.onSettingsChange$=new H.a(void 0),this.termDefinedInUrl=!1,this.termSplitter="|",this.termDefinedInUrlTriggered=!1,this.addedLayers$$=[],this.forceCoordsNA=!1,this.contextMenuStore=new l.a([]),this.contextLoaded=!1,this.toastPanelForExpansionOpened=!0,this.showToastPanelForExpansionToggle=!1,this.selectedWorkspace$=new H.a(void 0),this.toastPanelHtmlDisplay=!1,this._toastPanelOpened=!1!==this.storageService.get("toastOpened"),this.hasExpansionPanel=this.configService.getConfig("hasExpansionPanel"),this.hasGeolocateButton=void 0===this.configService.getConfig("hasGeolocateButton")||this.configService.getConfig("hasGeolocateButton"),this.showRotationButtonIfNoRotation=void 0!==this.configService.getConfig("showRotationButtonIfNoRotation")&&this.configService.getConfig("showRotationButtonIfNoRotation"),this.forceCoordsNA=this.configService.getConfig("app.forceCoordsNA"),this.hasFeatureEmphasisOnSelection=this.configService.getConfig("hasFeatureEmphasisOnSelection"),this.igoSearchPointerSummaryEnabled=this.configService.getConfig("hasSearchPointerSummary"),void 0===this.igoSearchPointerSummaryEnabled&&(this.igoSearchPointerSummaryEnabled=this.storageService.get("searchPointerSummaryEnabled")||!1)}return _createClass(e,[{key:"isMobile",value:function(){return this.mediaService.getMedia()===c.i.Mobile}},{key:"isTablet",value:function(){return this.mediaService.getMedia()===c.i.Tablet}},{key:"isLandscape",value:function(){return this.mediaService.getOrientation()===c.j.Landscape}},{key:"isPortrait",value:function(){return this.mediaService.getOrientation()===c.j.Portrait}},{key:"ngOnInit",value:function(){var e=this;window.IGO=this,this.searchState.searchTermSplitter$.next(this.termSplitter),this.initWelcomeWindow(),this.authService.authenticate$.subscribe((function(t){e.contextLoaded=!1})),this.context$$=this.contextState.context$.subscribe((function(t){return e.onChangeContext(t)})),this.contextMenuStore.load([{id:"coordinates",title:"coordinates",handler:function(){return e.searchCoordinate(e.contextMenuCoord)}},{id:"googleMaps",title:"googleMap",handler:function(){return e.openGoogleMaps(e.contextMenuCoord)}},{id:"googleStreetView",title:"googleStreetView",handler:function(){return e.openGoogleStreetView(e.contextMenuCoord)}}]),this.queryStore.count$.pipe(Object(he.a)()).subscribe((function(t){var n=_slicedToArray(t,2),a=n[0],o=n[1];e.map.viewController.padding[2]=o?280:0,0===a&&o!==a&&e.isMobile()&&e.hasExpansionPanel&&e.expansionPanelExpanded&&e.toastPanelOpened&&(e.toastPanelOpened=!1)})),this.map.ol.once("rendercomplete",(function(){e.readQueryParams()})),this.onSettingsChange$.subscribe((function(){e.searchState.setSearchSettingsChange()})),this.searchState.selectedResult$.subscribe((function(t){t&&e.isMobile()&&e.closeSidenav()})),this.workspaceState.workspaceEnabled$.next(this.hasExpansionPanel),this.workspaceState.store.empty$.subscribe((function(t){e.hasExpansionPanel&&(e.workspaceState.workspaceEnabled$.next(!t),t&&(e.expansionPanelExpanded=!1),e.updateMapBrowserClass())})),this.workspaceMaximize$$.push(this.workspaceState.workspaceMaximize$.subscribe((function(t){e.workspaceMaximize$.next(t),e.updateMapBrowserClass()}))),this.workspaceMaximize$$.push(this.workspaceMaximize$.subscribe((function(){return e.updateMapBrowserClass()}))),this.workspaceState.workspace$.subscribe((function(t){t?(e.selectedWorkspace$.next(t),e.expansionPanelExpanded=!0):e.expansionPanelExpanded=!1})),this.activeWidget$$=this.workspaceState.activeWorkspaceWidget$.subscribe((function(t){void 0!==t?(e.openToastPanelForExpansion(),e.showToastPanelForExpansionToggle=!0):(e.closeToastPanelForExpansion(),e.showToastPanelForExpansionToggle=!1)})),this.openSidenav$$=this.toolState.openSidenav$.subscribe((function(t){t&&(e.openSidenav(),e.toolState.openSidenav$.next(!1))})),this.sidenavMediaAndOrientation$$=Object(A.a)([this.sidenavOpened$,this.mediaService.media$,this.mediaService.orientation$]).pipe(Object(q.a)(50)).subscribe((function(t){e.computeToastPanelOffsetX()}))}},{key:"setToastPanelHtmlDisplay",value:function(e){this.toastPanelHtmlDisplay=e,this.computeToastPanelOffsetX()}},{key:"computeToastPanelOffsetX",value:function(){var e=this;this.isMobile()||!this.isLandscape()?Promise.resolve().then((function(){return e.toastPanelOffsetX$.next(void 0)})):Promise.resolve().then((function(){return e.toastPanelOffsetX$.next(e.getToastPanelExtent())}))}},{key:"workspaceVisibility",value:function(){var e=this.selectedWorkspace$.value;return e.inResolutionRange$.value?e.entityStore.empty$.value&&!e.layer.visible?this.workspaceNotAvailableMessage="workspace.disabled.visible":this.workspaceNotAvailableMessage="":this.workspaceNotAvailableMessage="workspace.disabled.resolution",e.inResolutionRange$.value}},{key:"paginatorChange",value:function(e){this.workspacePaginator=e}},{key:"entitySortChange",value:function(){this.workspaceEntitySortChange$.next(!0)}},{key:"entitySelectChange",value:function(e){var t=this,n=(this.getQuerySearchSource(),[]);if(e&&e.added){var a=e.added.map((function(e){if(e&&e.ol&&e.ol.getProperties()._featureStore.layer&&e.ol.getProperties()._featureStore.layer.visible){var a=e.ol,o=e.ol.getProperties()._featureStore.layer,i=Object(d.Ub)(a,o.map.projection,o.ol);i.meta.alias=t.queryService.getAllowedFieldsAndAlias(o),i.meta.title=t.queryService.getQueryTitle(i,o)||i.meta.title;var s=n.find((function(e){return e.title===i.meta.sourceTitle}));return s||(s=new d.mb({title:i.meta.sourceTitle}),n.push(s)),Object(d.Wb)(i,s)}}));Object(ue.a)(a).subscribe((function(e){t.queryStore.load(e)}))}}},{key:"ngOnDestroy",value:function(){this.context$$.unsubscribe(),this.activeWidget$$.unsubscribe(),this.openSidenav$$.unsubscribe(),this.workspaceMaximize$$.map((function(e){return e.unsubscribe()})),this.sidenavMediaAndOrientation$$.unsubscribe()}},{key:"cancelOngoingAddLayer",value:function(){this.addedLayers$$.forEach((function(e){return e.unsubscribe()})),this.addedLayers$$=[]}},{key:"onBackdropClick",value:function(){this.closeSidenav()}},{key:"onToggleSidenavClick",value:function(){this.toggleSidenav()}},{key:"onDeactivateWorkspaceWidget",value:function(){this.closeToastPanelForExpansion()}},{key:"closeToastPanelForExpansion",value:function(){this.toastPanelForExpansionOpened=!1}},{key:"openToastPanelForExpansion",value:function(){this.toastPanelForExpansionOpened=!0}},{key:"onMapQuery",value:function(e){var t=this,n=(this.getQuerySearchSource(),[]),a=e.features.map((function(e){var t=n.find((function(t){return t.title===e.meta.sourceTitle}));return t||(t=new d.mb({title:e.meta.sourceTitle}),n.push(t)),Object(d.Wb)(e,t)}));Object(ue.a)(a).subscribe((function(e){t.queryStore.load(e)}))}},{key:"onSearchTermChange",value:function(e){var t;(null===(t=this.routeParams)||void 0===t?void 0:t.search)&&e!==this.routeParams.search&&this.searchState.deactivateCustomFilterTermStrategy(),this.searchState.setSearchTerm(e),e.replace(/(#[^\s]*)/g,"").trim().length<2?this.onClearSearch():this.onBeforeSearch()}},{key:"onSearch",value:function(e){var t,n=e.results,a=!Object(d.rc)(e.research.source);t=a?this.searchSourceService.getEnabledSources().filter(d.qc):this.searchSourceService.getEnabledSources().filter(d.rc);var o=this.searchStore.entities$.value.filter((function(n){return n.source!==e.research.source&&t.includes(n.source)})).concat(n);this.searchStore.updateMany(o)}},{key:"onSearchResultsGeometryStatusChange",value:function(e){this.searchState.setSearchResultsGeometryStatus(e)}},{key:"onSearchSettingsChange",value:function(){this.onSettingsChange$.next(!0)}},{key:"closeSidenav",value:function(){this.sidenavOpened=!1,this.map.viewController.padding[3]=0}},{key:"openSidenav",value:function(){this.sidenavOpened=!0,this.map.viewController.padding[3]=this.isMobile()?0:400}},{key:"toggleSidenav",value:function(){this.sidenavOpened?this.closeSidenav():this.openSidenav(),this.computeToastPanelOffsetX()}},{key:"toolChanged",value:function(e){e&&"searchResults"===e.name&&this.searchBar.nativeElement.getElementsByTagName("input")[0].focus()}},{key:"onChangeContext",value:function(e){var t=this;if(this.cancelOngoingAddLayer(),void 0!==e){if(this.route.queryParams.pipe(Object(q.a)(250)).subscribe((function(n){n.context&&n.context!==e.uri||t.readLayersQueryParams(n)})),this.contextLoaded){var n=this.toolbox.getTool("contextManager"),a=(n?n.options:{}).toolToOpenOnContextChange;if(!a)for(var o=0,i=["mapTools","map","mapDetails","mapLegend"];o<i.length;o++){var s=i[o];if(this.toolbox.getTool(s)){a=s;break}}a&&this.toolbox.activateTool(a)}this.contextLoaded=!0}}},{key:"onBeforeSearch",value:function(){this.toolbox.activeTool$.value&&"searchResults"===this.toolbox.activeTool$.value.name||this.toolbox.activateTool("searchResults"),this.openSidenav()}},{key:"toastOpenedChange",value:function(e){this.map.viewController.padding[2]=e?280:0,this.handleExpansionAndToastOnMobile(),this.toastPanelOpened=e}},{key:"handleExpansionAndToastOnMobile",value:function(){this.isMobile()&&this.hasExpansionPanel&&this.expansionPanelExpanded&&this.toastPanelOpened&&(this.expansionPanelExpanded=!1)}},{key:"onClearSearch",value:function(){this.map.searchResultsOverlay.clear(),this.searchStore.clear(),this.searchState.setSelectedResult(void 0),this.searchState.deactivateCustomFilterTermStrategy()}},{key:"getQuerySearchSource",value:function(){return this.searchSourceService.getSources().find((function(e){return e instanceof d.mb}))}},{key:"onContextMenuOpen",value:function(e){this.contextMenuCoord=this.getClickCoordinate(e)}},{key:"getClickCoordinate",value:function(e){var t=e,n=this.mapBrowser.nativeElement.getBoundingClientRect();t.y=t.y-n.top+(window.scrollY||window.pageYOffset),t.x=t.x-n.left+(window.scrollX||window.pageXOffset);var a=[t.x,t.y],o=this.map.ol.getCoordinateFromPixel(a),i=this.map.projection;return fe.s(o,i,"EPSG:4326")}},{key:"openGoogleMaps",value:function(e){window.open(d.u.getGoogleMapsCoordLink(e[0],e[1]))}},{key:"openGoogleStreetView",value:function(e){window.open(d.u.getGoogleStreetViewLink(e[0],e[1]))}},{key:"searchCoordinate",value:function(e){this.searchBarTerm=e.map((function(e){return e.toFixed(6)})).join(", ")}},{key:"updateMapBrowserClass",value:function(){var e=this.queryState.store.entities$.value.length>0;this.hasExpansionPanel&&this.workspaceState.workspaceEnabled$.value?this.mapBrowser.nativeElement.classList.add("has-expansion-panel"):this.mapBrowser.nativeElement.classList.remove("has-expansion-panel"),this.hasExpansionPanel&&this.expansionPanelExpanded?this.workspaceMaximize$.value?(this.mapBrowser.nativeElement.classList.add("expansion-offset-maximized"),this.mapBrowser.nativeElement.classList.remove("expansion-offset")):(this.mapBrowser.nativeElement.classList.add("expansion-offset"),this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized")):this.workspaceMaximize$.value?this.mapBrowser.nativeElement.classList.remove("expansion-offset-maximized"):this.mapBrowser.nativeElement.classList.remove("expansion-offset"),this.sidenavOpened?this.mapBrowser.nativeElement.classList.add("sidenav-offset"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset"),this.sidenavOpened&&!this.isMobile()?this.mapBrowser.nativeElement.classList.add("sidenav-offset-baselayers"):this.mapBrowser.nativeElement.classList.remove("sidenav-offset-baselayers"),this.toastPanelOpened||!e||this.expansionPanelExpanded?this.mapBrowser.nativeElement.classList.remove("toast-offset-scale-line"):this.mapBrowser.nativeElement.classList.add("toast-offset-scale-line"),!this.toastPanelOpened&&e&&(this.isMobile()||this.isTablet()||this.sidenavOpened)&&!this.expansionPanelExpanded?this.mapBrowser.nativeElement.classList.add("toast-offset-attribution"):this.mapBrowser.nativeElement.classList.remove("toast-offset-attribution")}},{key:"getToastPanelExtent",value:function(){return this.sidenavOpened?this.sidenavOpened?this.toastPanelHtmlDisplay&&this.mediaService.isDesktop()?"htmlDisplayOffsetX":this.fullExtent?"fullOffsetX":"standardOffsetX":void 0:this.toastPanelHtmlDisplay&&this.mediaService.isDesktop()?"htmlDisplay":this.fullExtent?"fullStandard":"standard"}},{key:"onPointerSummaryStatusChange",value:function(e){this.storageService.set("searchPointerSummaryEnabled",e),this.igoSearchPointerSummaryEnabled=e}},{key:"getExpansionPanelStatus",value:function(){return!1===this.sidenavOpened?!0===this.expansionPanelExpanded?"full":"notTriggered":!0===this.sidenavOpened&&!1===this.isMobile()?!0===this.expansionPanelExpanded?"reduced":"reducedNotTriggered":!0===this.sidenavOpened&&!0===this.isMobile()?!0===this.expansionPanelExpanded?"mobile":"notVisible":void 0}},{key:"getToastPanelOffsetY",value:function(){return this.expansionPanelExpanded?this.workspaceMaximize$.value?this.toastPanelOpened?"expansionMaximizedAndToastOpened":"expansionMaximizedAndToastClosed":this.toastPanelOpened?"expansionAndToastOpened":"expansionAndToastClosed":"noExpansion"}},{key:"getToastPanelStatus",value:function(){if(!0===this.isMobile()&&!1===this.toastPanelOpened&&!1===this.sidenavOpened&&!1===this.expansionPanelExpanded&&this.queryState.store.entities$.value.length>0)return"low"}},{key:"getControlsOffsetY",value:function(){return this.expansionPanelExpanded?this.workspaceMaximize$.value?"firstRowFromBottom-expanded-maximized":"firstRowFromBottom-expanded":"firstRowFromBottom"}},{key:"getBaselayersSwitcherStatus",value:function(){return this.isMobile()?this.workspaceState.workspaceEnabled$.value?!1===this.expansionPanelExpanded?0===this.queryState.store.entities$.value.length?"secondRowFromBottom":"thirdRowFromBottom":0===this.queryState.store.entities$.value.length?"firstRowFromBottom-expanded":"secondRowFromBottom-expanded":0===this.queryState.store.entities$.value.length?"firstRowFromBottom":"secondRowFromBottom":this.workspaceState.workspaceEnabled$.value?this.expansionPanelExpanded?this.workspaceMaximize$.value?"firstRowFromBottom-expanded-maximized":"firstRowFromBottom-expanded":"secondRowFromBottom":"firstRowFromBottom"}},{key:"readQueryParams",value:function(){var e=this;this.route.queryParams.subscribe((function(t){e.routeParams=t,e.readToolParams(),e.readSearchParams(),e.readFocusFirst()}))}},{key:"computeFocusFirst",value:function(){setTimeout((function(){var e=document.getElementsByTagName("igo-search-results-item").item(0);e&&e.click()}),1)}},{key:"readFocusFirst",value:function(){var e=this;if("1"===this.routeParams.sf&&this.termDefinedInUrl)var t=this.searchStore.stateView.all$().pipe(Object(Y.a)((function(e){return 0===e.length})),Object(q.a)(500),Object(me.a)(1)).subscribe((function(n){t.unsubscribe(),n.length&&!e.termDefinedInUrlTriggered&&(e.computeFocusFirst(),e.termDefinedInUrlTriggered=!0)}))}},{key:"readSearchParams",value:function(){var e=this;if(this.routeParams.search){if(this.termDefinedInUrl=!0,"1"===this.routeParams.exactMatch&&this.searchState.activateCustomFilterTermStrategy(),this.routeParams.search&&!this.routeParams.zoom&&"1"!==this.routeParams.sf)var t=this.searchStore.stateView.all$().pipe(Object(Y.a)((function(e){return 0===e.length})),Object(q.a)(500),Object(me.a)(1)).subscribe((function(n){t.unsubscribe();var a=n.filter((function(e){return e.entity.meta.dataType===d.l})).map((function(t){return(new V.a).readFeature(t.entity.data,{dataProjection:t.entity.data.projection,featureProjection:e.map.projection})})),o=Object(d.Rb)(e.map,a);e.map.viewController.zoomToExtent(o)}));this.searchBarTerm=this.routeParams.search}"1"===this.routeParams.searchGeom&&this.searchState.searchResultsGeometryEnabled$.next(!0)}},{key:"readToolParams",value:function(){var e=this;if(this.routeParams.tool&&this.toolbox.activateTool(this.routeParams.tool),"1"===this.routeParams.sidenav&&setTimeout((function(){e.openSidenav()}),250),this.routeParams.routing){var t,n=!1,a=this.routeParams.routing.split(";"),o=this.routeParams.routingOptions;o&&(t=parseInt(o.split("result:")[1],10)),this.directionState.stopsStore.storeInitialized$.pipe(Object(Y.a)((function(e){return!e})),Object(ge.a)()).subscribe((function(t){t&&!n&&(n=!0,a.map((function(t,n){n>1&&Object(d.Qb)(e.directionState.stopsStore)})),setTimeout((function(){a.map((function(t,n){var a=e.directionState.stopsStore.all().find((function(e){return e.position===n}));a.text=t,a.coordinates=t.split(","),e.directionState.stopsStore.update(a)}))}),1.25*e.directionState.debounceTime))})),this.directionState.routesFeatureStore.count$.pipe(Object(Y.a)((function(e){return e<1})),Object(ge.a)()).subscribe((function(t){t>=1&&e.directionState.zoomToActiveRoute$.next()})),this.directionState.routesFeatureStore.count$.pipe(Object(Y.a)((function(e){return e<2})),Object(ge.a)()).subscribe((function(){t&&(e.directionState.routesFeatureStore.entities$.value.map((function(e){return e.properties.active=!1})),e.directionState.routesFeatureStore.entities$.value[t].properties.active=!0,e.directionState.zoomToActiveRoute$.next())}))}}},{key:"readLayersQueryParams",value:function(e){this.readLayersQueryParamsByType(e,"wms"),this.readLayersQueryParamsByType(e,"wmts"),this.readLayersQueryParamsByType(e,"arcgisrest"),this.readLayersQueryParamsByType(e,"imagearcgisrest"),this.readLayersQueryParamsByType(e,"tilearcgisrest"),this.readVectorQueryParams(e)}},{key:"getQueryParam",value:function(e,t){var n;return t.includes("?")&&(n=new xe.f({fromString:t.split("?")[1]}).get(e)),n}},{key:"readLayersQueryParamsByType",value:function(e,t){var n,a,o=this;switch(t){case"wms":(e.layers||e.wmsLayers)&&e.wmsUrl&&(a="wmsUrl",n=e.wmsLayers?"wmsLayers":"layers");break;case"wmts":e.wmtsLayers&&e.wmtsUrl&&(a="wmtsUrl",n="wmtsLayers");break;case"arcgisrest":e.arcgisLayers&&e.arcgisUrl&&(a="arcgisUrl",n="arcgisLayers");break;case"imagearcgisrest":e.iarcgisLayers&&e.iarcgisUrl&&(a="iarcgisUrl",n="iarcgisLayers");break;case"tilearcgisrest":e.tarcgisLayers&&e.tarcgisUrl&&(a="tarcgisUrl",n="tarcgisLayers")}if(n&&a){var i=e[n].split("),("),s=e[a].split(","),r=0;s.forEach((function(n){var a=n,s=o.getQueryParam("VERSION",a)||o.getQueryParam("version",a)||void 0;s&&(a=a.replace("VERSION="+s,"").replace("version="+s,"")),o.extractLayersByService(i[r]).forEach((function(n){var i=n.split(":igoz"),r=Se.e.removeUndefined({type:t,url:a,layer:i[0],params:"wms"===t?{LAYERS:i[0]}:void 0}),c=Object(d.Zb)(r),l=o.computeLayerVisibilityFromUrl(e,c);o.addLayerFromURL(a,i[0],t,s,l,i[1]?parseInt(i[1],10):void 0)})),r+=1}))}}},{key:"readVectorQueryParams",value:function(e){var t=this;if(e.vector){var n=e.vector,a=n.lastIndexOf("/"),o=n.slice(a+1,n.length);this.http.get(""+n,{responseType:"blob"}).subscribe((function(e){var n=new File([e],o,{type:e.type,lastModified:Date.now()});t.importService.import(n).subscribe((function(e){return t.onFileImportSuccess(n,e)}),(function(e){return t.onFileImportError(n,e)}))}))}}},{key:"onFileImportSuccess",value:function(e,t){Object(d.dc)(e,t,this.map,this.messageService,this.languageService)}},{key:"onFileImportError",value:function(e,t){Object(d.cc)(e,t,this.messageService,this.languageService)}},{key:"extractLayersByService",value:function(e){var t=e;return(t=(t=t.startsWith("(")?t.substr(1):t).endsWith(")")?t.slice(0,-1):t).split(",")}},{key:"addLayerFromURL",value:function(e,t,n,a){var o=this,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=arguments.length>5?arguments[5]:void 0;if(this.contextLoaded){var r={optionsFromCapabilities:!0,optionsFromApi:!0,crossOrigin:!0,type:n,url:e},c="arcgisrest"===n||"imagearcgisrest"===n||"tilearcgisrest"===n,l={version:"wmts"===n?"1.0.0":void 0,queryable:!!c,queryFormat:c?"esrijson":void 0,layer:t};"wms"===n&&(l={params:{LAYERS:t,VERSION:a}}),l=Se.e.removeUndefined(Object.assign({},l,r)),this.addedLayers$$.push(this.layerService.createAsyncLayer({zIndex:s,visible:i,sourceOptions:l}).subscribe((function(e){o.map.addLayer(e)})))}}},{key:"computeLayerVisibilityFromUrl",value:function(e,t){var n=e,a=!0;if(!n||!t)return a;var o="",i="",s=[],r=[];return n.visiblelayers&&(o=n.visiblelayers),n.invisiblelayers&&(i=n.invisiblelayers),"*"===o&&(a=!0),"*"===i&&(a=!1),s=o.split(","),r=i.split(","),(s.indexOf(t)>-1||s.indexOf(t.toString())>-1)&&(a=!0),(r.indexOf(t)>-1||r.indexOf(t.toString())>-1)&&(a=!1),a}},{key:"initWelcomeWindow",value:function(){var e,t=this;(null===(e=this.auth)||void 0===e?void 0:e.url)?this.authService.logged$.subscribe((function(e){e&&t.createWelcomeWindow()})):this.createWelcomeWindow()}},{key:"createWelcomeWindow",value:function(){var e=this;if(this.welcomeWindowService.hasWelcomeWindow()){var t=this.welcomeWindowService.getConfig();this.dialogWindow.open(Oe,t).afterClosed().subscribe((function(t){e.welcomeWindowService.afterClosedWelcomeWindow()}))}}},{key:"map",get:function(){return this.mapState.map}},{key:"sidenavOpened",get:function(){return this.sidenavOpened$.value},set:function(e){this.sidenavOpened$.next(e)}},{key:"auth",get:function(){return this.configService.getConfig("auth")||[]}},{key:"toastPanelOpened",get:function(){return this._toastPanelOpened},set:function(e){e===!this._toastPanelOpened&&(this._toastPanelOpened=e,this.cdRef.detectChanges())}},{key:"backdropShown",get:function(){return(this.isMobile()||this.isTablet()&&this.isPortrait())&&this.sidenavOpened}},{key:"expansionPanelExpanded",get:function(){return this.workspaceState.workspacePanelExpanded},set:function(e){this.workspaceState.workspacePanelExpanded=e}},{key:"toastPanelShown",get:function(){return!0}},{key:"expansionPanelBackdropShown",get:function(){return this.expansionPanelExpanded&&this.toastPanelForExpansionOpened}},{key:"actionbarMode",get:function(){return l.c.Overlay}},{key:"actionbarWithTitle",get:function(){return this.actionbarMode===l.c.Overlay}},{key:"searchStore",get:function(){return this.searchState.store}},{key:"searchResultsGeometryEnabled",get:function(){return this.searchState.searchResultsGeometryEnabled$.value}},{key:"queryStore",get:function(){return this.queryState.store}},{key:"toolbox",get:function(){return this.toolState.toolbox}},{key:"toastPanelContent",get:function(){var e;return void 0!==this.workspace&&this.workspace.hasWidget&&(e="workspace"),e}},{key:"workspaceStore",get:function(){return this.workspaceState.store}},{key:"workspace",get:function(){return this.workspaceState.workspace$.value}}]),e}();Ae.\u0275fac=function(e){return new(e||Ae)(a.lc(s.a),a.lc(v.k),a.lc(p.c),a.lc(c.k),a.lc(d.V),a.lc(d.g),a.lc(a.k),a.lc(d.b),a.lc(v.c),a.lc(v.f),a.lc(v.h),a.lc(v.g),a.lc(v.j),a.lc(d.ub),a.lc(c.c),a.lc(d.P),a.lc(xe.b),a.lc(c.h),a.lc(c.m),a.lc(be),a.lc(x.b),a.lc(d.nb),a.lc(c.q),a.lc(v.d))},Ae.\u0275cmp=a.fc({type:Ae,selectors:[["app-portal"]],viewQuery:function(e,t){var n;(1&e&&(a.hd(ke,7,a.s),a.hd(je,7,a.s)),2&e)&&(a.Oc(n=a.yc())&&(t.mapBrowser=n.first),a.Oc(n=a.yc())&&(t.searchBar=n.first))},decls:31,vars:54,consts:[[1,"app-main-container"],[3,"shown","click"],[3,"sidenavOpened","openSidenav"],[3,"term","termSplitter","minLength","searchSettings","forceNA","store","pointerSummaryEnabled","searchResultsGeometryEnabled","searchTermChange","pointerSummaryStatus","searchResultsGeometryStatus","search","clearFeature","searchSettingsChange"],["searchBar",""],[3,"map","opened","openedChange","toolChange"],["igoWorkspaceUpdator","","igoSearchPointerSummary","","igoQuery","","igoMapContext","","igoLayerContext","","igoDropGeoFile","",3,"workspaceStore","igoSearchPointerSummaryDelay","igoSearchPointerSummaryEnabled","waitForAllQueries","queryFeatures","queryFeaturesHitTolerance","map","igoContextMenu","ngClass","query","menuPosition"],["mapBrowser",""],["color","primary",3,"map"],[3,"map"],["color","primary",3,"map",4,"ngIf"],["color","primary",3,"showIfNoRotation","map"],[3,"map","useStaticIcon"],[3,"backdropShown","expanded","maximized","expandedChange",4,"ngIf"],[3,"withHeader","opened","openedChange"],[1,"toast-panel-for-expansion-close-button-container"],["mat-icon-button","","color","warn",3,"click"],["svgIcon","close"],[3,"workspace","deactivateWidget",4,"ngIf"],[3,"map","store","hasFeatureEmphasisOnSelection","opened","openedChange","fullExtentEvent","windowHtmlDisplayEvent",4,"ngIf"],["contextMenu",""],[3,"backdropShown","expanded","maximized","expandedChange"],["expansionPanelHeader",""],["igoWorkspaceSelector","",3,"store","map","toolToActivate"],[4,"ngIf"],["mat-icon-button","","collapsibleButton","","tooltip-position","below","matTooltipShowDelay","500",1,"eye-workspace",3,"color","matTooltip","click"],[3,"ngClass","svgIcon"],["class","actionbar-workspace",3,"store","withIcon","withTitle","horizontal","withToggleButton","iconColor","color","mode","overlayClass",4,"ngIf"],[1,"spacer"],[3,"store","entitySortChange$","paginatorOptions","paginatorChange",4,"ngIf"],[1,"actionbar-workspace",3,"store","withIcon","withTitle","horizontal","withToggleButton","iconColor","color","mode","overlayClass"],[3,"store","entitySortChange$","paginatorOptions","paginatorChange"],[3,"paginator","store","template","entitySortChange","entitySelectChange",4,"ngIf"],[1,"mat-typography"],[3,"paginator","store","template","entitySortChange","entitySelectChange"],[3,"workspace","deactivateWidget"],[3,"map","store","hasFeatureEmphasisOnSelection","opened","openedChange","fullExtentEvent","windowHtmlDisplayEvent"],["mode","context",3,"store","withIcon","horizontal"]],template:function(e,t){if(1&e&&(a.rc(0,"mat-sidenav-container",0),a.rc(1,"mat-sidenav-content"),a.rc(2,"igo-backdrop",1),a.xc("click",(function(){return t.onBackdropClick()})),a.qc(),a.rc(3,"igo-menu-button",2),a.xc("openSidenav",(function(){return t.onToggleSidenavClick()})),a.qc(),a.rc(4,"igo-search-bar",3,4),a.xc("searchTermChange",(function(e){return t.onSearchTermChange(e)}))("pointerSummaryStatus",(function(e){return t.onPointerSummaryStatusChange(e)}))("searchResultsGeometryStatus",(function(e){return t.onSearchResultsGeometryStatusChange(e)}))("search",(function(e){return t.onSearch(e)}))("clearFeature",(function(){return t.onClearSearch()}))("searchSettingsChange",(function(){return t.onSearchSettingsChange()})),a.qc(),a.rc(6,"app-sidenav",5),a.xc("openedChange",(function(e){return t.sidenavOpened=e}))("toolChange",(function(e){return t.toolChanged(e)})),a.qc(),a.rc(7,"igo-map-browser",6,7),a.xc("query",(function(e){return t.onMapQuery(e)}))("menuPosition",(function(e){return t.onContextMenuOpen(e)}))("@mapStateX.start",(function(){return t.updateMapBrowserClass()}))("@mapStateY.start",(function(){return t.updateMapBrowserClass()})),a.mc(9,"igo-zoom-button",8),a.mc(10,"igo-swipe-control",9),a.mc(11,"igo-map-center",9),a.mc(12,"igo-offline-button",8),a.ad(13,Pe,1,3,"igo-geolocate-button",10),a.mc(14,"igo-rotation-button",11),a.ad(15,_e,1,3,"igo-user-button",10),a.mc(16,"igo-baselayers-switcher",12),a.qc(),a.mc(17,"app-map-overlay"),a.Cc(18,"async"),a.qc(),a.qc(),a.ad(19,ze,8,15,"app-expansion-panel",13),a.Cc(20,"async"),a.rc(21,"app-toast-panel-for-expansion",14),a.xc("openedChange",(function(e){return t.toastPanelForExpansionOpened=e})),a.rc(22,"div",15),a.rc(23,"button",16),a.xc("click",(function(){return t.toastPanelForExpansionOpened=!1})),a.mc(24,"mat-icon",17),a.qc(),a.qc(),a.ad(25,Fe,1,1,"igo-workspace-widget-outlet",18),a.Cc(26,"async"),a.qc(),a.ad(27,Ie,2,9,"app-toast-panel",19),a.Cc(28,"async"),a.ad(29,De,1,3,"ng-template",null,20,a.bd)),2&e){var n=a.Pc(30);a.Yb(2),a.Hc("shown",t.backdropShown),a.Yb(1),a.Hc("sidenavOpened",t.sidenavOpened),a.Yb(1),a.Hc("term",t.searchBarTerm)("termSplitter",t.termSplitter)("minLength",t.minSearchTermLength)("searchSettings",!0)("forceNA",t.forceCoordsNA)("store",t.searchStore)("pointerSummaryEnabled",t.igoSearchPointerSummaryEnabled)("searchResultsGeometryEnabled",t.searchResultsGeometryEnabled),a.Yb(2),a.Hc("map",t.map)("opened",t.sidenavOpened),a.Yb(1),a.Hc("workspaceStore",t.workspaceStore)("igoSearchPointerSummaryDelay",500)("igoSearchPointerSummaryEnabled",t.igoSearchPointerSummaryEnabled)("waitForAllQueries",!0)("queryFeatures",!0)("queryFeaturesHitTolerance",15)("map",t.map)("igoContextMenu",n)("ngClass",a.Kc(52,He,t.map.getBaseLayers().length>1))("@mapStateX",t.sidenavOpened?"right":"left")("@mapStateY",t.getControlsOffsetY()),a.Yb(2),a.Hc("map",t.map)("@controlsOffsetY",t.getControlsOffsetY()),a.Yb(1),a.Hc("map",t.map),a.Yb(1),a.Hc("map",t.map),a.Yb(1),a.Hc("map",t.map)("@controlsOffsetY",t.getControlsOffsetY())("@mobileOffsetY",t.getToastPanelStatus()),a.Yb(1),a.Hc("ngIf",t.hasGeolocateButton),a.Yb(1),a.Hc("showIfNoRotation",t.showRotationButtonIfNoRotation)("map",t.map),a.Yb(1),a.Hc("ngIf",t.auth.url),a.Yb(1),a.Hc("map",t.map)("@controlsOffsetY",t.getBaselayersSwitcherStatus())("useStaticIcon",!0),a.Yb(1),a.Hc("@controlStateY",t.getControlsOffsetY())("@controlStateX","mobile"!==a.Dc(18,44,t.mediaService.media$)&&t.sidenavOpened?"right":"left"),a.Yb(2),a.Hc("ngIf",t.hasExpansionPanel&&a.Dc(20,46,t.workspaceState.workspaceEnabled$)),a.Yb(2),a.Hc("withHeader",!1)("opened",t.toastPanelForExpansionOpened),a.Yb(4),a.Hc("ngIf",a.Dc(26,48,t.selectedWorkspace$)),a.Yb(2),a.Hc("ngIf",!a.Dc(28,50,t.queryStore.empty$))}},directives:[g.b,g.c,l.d,d.bb,d.qb,pe,d.W,d.Ob,d.rb,d.lb,b.n,b.m,d.j,l.h,u.j,d.Pb,d.Fb,d.X,d.db,u.l,d.ob,d.a,j,Ce,h.a,m.a,d.t,b.p,I,l.lb,d.Nb,f.a,l.b,l.r,l.q,l.nb,ie],pipes:[u.b,$.d],styles:["#tour-button[_ngcontent-%COMP%]{font-weight:700;position:absolute;left:5px;top:50px;z-index:4}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.tour-button-title[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]{width:100%;height:100%;display:block}igo-menu-button[_ngcontent-%COMP%]{position:absolute;z-index:4}mat-icon.disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.38)}igo-map-browser[_ngcontent-%COMP%]{width:100%;height:100%}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution{left:50px;bottom:5px;text-align:left;padding:0;margin-right:90px;background-color:hsla(0,0%,100%,0);width:calc(100% - 500px)}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-logo-only{height:inherit}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed{background:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-collapsed button{transform:none}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution button{transform:rotate(180deg);background-color:#fff;cursor:pointer}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution.ol-uncollapsible{height:auto}igo-map-browser[_ngcontent-%COMP%]     .ol-attribution ul{background-color:hsla(0,0%,100%,.6);padding:2px .5em}igo-map-browser.has-expansion-panel[_ngcontent-%COMP%]   igo-baselayers-switcher[_ngcontent-%COMP%]{bottom:47px}igo-map-browser.sidenav-offset-baselayers[_ngcontent-%COMP%]   igo-baselayers-switcher[_ngcontent-%COMP%]{left:405px}igo-map-browser[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{position:absolute;width:100%;left:0;bottom:0}igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{left:400px;width:calc(100% - 380px)}igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent .ol-scale-line{left:40%}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-map-browser.sidenav-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{display:none}}igo-map-browser.expansion-offset[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{bottom:281px}igo-map-browser.expansion-offset-maximized[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent{bottom:496px}igo-map-browser.toast-offset-scale-line[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-scale-line{bottom:50px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-map-browser.toast-offset-attribution[_ngcontent-%COMP%]     .ol-overlaycontainer-stopevent   .ol-attribution{bottom:50px}}igo-search-bar[_ngcontent-%COMP%]{background-color:#fff;font-size:16px;position:absolute;left:45px;top:5px;z-index:4;width:calc(400px - 45px - (2 * 5px));height:40px;margin:0 5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-search-bar[_ngcontent-%COMP%]{width:calc(100% - 40px - 45px - (3 * 5px));max-width:350px}}mat-sidenav-container[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#efefef;z-index:5;display:unset}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){mat-sidenav-content[_ngcontent-%COMP%]{z-index:auto}}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}igo-actionbar[_ngcontent-%COMP%]{padding-left:7px;padding-top:5px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-workspace-selector[_ngcontent-%COMP%]{width:100px}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-entity-table-paginator[_ngcontent-%COMP%]{margin-left:-30px}}app-expansion-panel[_ngcontent-%COMP%]{position:absolute;bottom:0;overflow:hidden;z-index:5}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){@supports (-webkit-appearance:none) and (not (overflow:-webkit-marquee)) and (not (-ms-ime-align:auto)) and (not (-moz-appearance:none)){app-expansion-panel[_ngcontent-%COMP%]{z-index:1}}}app-toast-panel[_ngcontent-%COMP%]{position:absolute;left:50%;margin-left:-300px;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;z-index:5;outline:none}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){app-toast-panel[_ngcontent-%COMP%]{left:49px;margin-left:0;min-width:100%}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){app-toast-panel[_ngcontent-%COMP%]{max-width:inherit;left:calc(50% + 60px)}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-full-toast-panel-opened, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-toast-panel-html-large, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-full-toast-panel-opened, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-toast-panel-html-large{max-height:50vh}app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-full-toast-panel-opened .toast-content, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >div   igo-panel.app-toast-panel-html-large .toast-content, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-full-toast-panel-opened .toast-content, app-expansion-panel.app-expansion-panel-expanded[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]     igo-panel.app-toast-panel-html-large .toast-content{max-height:calc(50vh - 8vh)}}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel{max-height:45vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel .toast-content{max-height:40vh}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel{max-height:30vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel .toast-content{max-height:calc(30vh - 6vh)}}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel.app-toast-panel-html{height:30vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel.app-toast-panel-opened{height:auto;max-height:30vh}app-expansion-panel.app-expansion-panel-expanded-maximized[_ngcontent-%COMP%] + app-toast-panel-for-expansion[_ngcontent-%COMP%] + app-toast-panel[_ngcontent-%COMP%]    >igo-panel.app-toast-panel-opened .toast-content{max-height:25vh}app-toast-panel.app-toast-panel-opened[_ngcontent-%COMP%], app-toast-panel.expansion-panel-expanded[_ngcontent-%COMP%], app-toast-panel[_ngcontent-%COMP%]:not(.has-expansion-panel){bottom:0}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){app-toast-panel.app-toast-panel-opened[_ngcontent-%COMP%], app-toast-panel.expansion-panel-expanded[_ngcontent-%COMP%], app-toast-panel[_ngcontent-%COMP%]:not(.has-expansion-panel){left:0}}igo-offline-button[_ngcontent-%COMP%]{margin-bottom:128px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-offline-button[_ngcontent-%COMP%]{margin-bottom:45px}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){igo-offline-button[_ngcontent-%COMP%]{margin-bottom:45px}}igo-geolocate-button[_ngcontent-%COMP%]{margin-bottom:85px}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){igo-geolocate-button[_ngcontent-%COMP%]{margin-bottom:0}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){igo-geolocate-button[_ngcontent-%COMP%]{margin-bottom:0}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){igo-zoom-button[_ngcontent-%COMP%]{display:none}}app-toast-panel-for-expansion[_ngcontent-%COMP%]{position:absolute;bottom:0;left:50%;margin-left:-300px;width:600px;z-index:6}@media only screen and (min-width:960px) and (max-width:1280px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:480px;margin-left:-240px}}@media only screen and (min-width:600px) and (max-width:959px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:480px;margin-left:-240px}}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:839px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:calc(100% - 2 * 49px);left:49px;margin-left:0}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){app-toast-panel-for-expansion[_ngcontent-%COMP%]{width:calc(100% - 2 * 49px);left:49px;margin-left:0}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){toast-panel-for-expansion.toast-panel-for-expansion-opened[_ngcontent-%COMP%]{width:100%;left:0}}.mat-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]   .mat-table-sticky[_ngcontent-%COMP%]{background:none}app-toast-panel-for-expansion[_ngcontent-%COMP%]   .toast-panel-for-expansion-close-button-container[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-15px;z-index:6;padding:5px}app-toast-panel-for-expansion[_ngcontent-%COMP%]   .toast-panel-for-expansion-close-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:24px;line-height:24px}.eye-workspace[_ngcontent-%COMP%]{margin-left:7px;margin-top:5px}.actionbar-workspace[_ngcontent-%COMP%]{padding-left:0}  div.workspace-menu{max-width:-webkit-fit-content!important;max-width:-moz-fit-content!important;max-width:fit-content!important}  div.workspace-menu div.mat-menu-content   div.mat-list-text,   div.workspace-menu div.mat-menu-content   span.mat-checkbox-label{font-size:12px}"],data:{animation:[[Object(T.m)("expansionPanelSize",[Object(T.j)("full",Object(T.k)({left:"5px","max-width":"100%"})),Object(T.j)("notTriggered",Object(T.k)({left:"5px",bottom:"5px","max-width":"100%"})),Object(T.j)("notVisible",Object(T.k)({display:"none"})),Object(T.j)("mobile",Object(T.k)({left:"calc(100% - 40px)"})),Object(T.j)("reduced",Object(T.k)({left:"405px","max-width":"calc(100% - 405px)"})),Object(T.j)("reducedNotTriggered",Object(T.k)({left:"405px",bottom:"5px","max-width":"calc(100% - 405px)"})),Object(T.l)("* => *",Object(T.e)("100ms"))]),Object(T.m)("toastOffsetY",[Object(T.j)("true",Object(T.k)({bottom:"50px"})),Object(T.j)("false",Object(T.k)({bottom:"5px"}))])],[Object(T.m)("toastPanelMobileSidenav",[Object(T.j)("true",Object(T.k)({display:"none"})),Object(T.l)("* => void",Object(T.e)("0ms")),Object(T.l)("* => *",Object(T.e)("200ms"))]),Object(T.m)("toastPanelOffsetX",[Object(T.j)("fullStandard",Object(T.k)({left:"45%"})),Object(T.j)("standard",Object(T.k)({left:"50%"})),Object(T.j)("htmlDisplay",Object(T.k)({left:"40%"})),Object(T.j)("fullOffsetX",Object(T.k)({left:"calc(45% + 202px)"})),Object(T.j)("standardOffsetX",Object(T.k)({left:"calc(50% + 202px)"})),Object(T.j)("htmlDisplayOffsetX",Object(T.k)({left:"calc(40% + 160px)"})),Object(T.l)("fullStandard => fullOffsetX",Object(T.e)("200ms")),Object(T.l)("fullOffsetX => fullStandard",Object(T.e)("200ms")),Object(T.l)("standard => standardOffsetX",Object(T.e)("200ms")),Object(T.l)("standardOffsetX => standard",Object(T.e)("200ms")),Object(T.l)("htmlDisplay => htmlDisplayOffsetX",Object(T.e)("200ms")),Object(T.l)("htmlDisplayOffsetX => htmlDisplay",Object(T.e)("200ms"))]),Object(T.m)("toastPanelOffsetY",[Object(T.j)("noExpansion",Object(T.k)({bottom:"0"})),Object(T.j)("expansionAndToastOpened",Object(T.k)({bottom:"285px",zIndex:"999"})),Object(T.j)("expansionAndToastClosed",Object(T.k)({bottom:"285px",zIndex:"5"})),Object(T.j)("expansionMaximizedAndToastOpened",Object(T.k)({bottom:"500px",zIndex:"999"})),Object(T.j)("expansionMaximizedAndToastClosed",Object(T.k)({bottom:"500px",zIndex:"5"})),Object(T.l)("noExpansion => noExpansion",Object(T.e)("10ms")),Object(T.l)("expansionAndToastOpened => expansionAndToastOpened",Object(T.e)("200ms")),Object(T.l)("expansionAndToastClosed => expansionAndToastClosed",Object(T.e)("200ms")),Object(T.l)("expansionMaximizedAndToastOpened => expansionMaximizedAndToastOpened",Object(T.e)("200ms")),Object(T.l)("expansionMaximizedAndToastClosed => expansionMaximizedAndToastClosed",Object(T.e)("200ms"))])],[Object(T.m)("controlsOffsetY",[Object(T.j)("close",Object(T.k)({})),Object(T.j)("firstRowFromBottom",Object(T.k)({bottom:"5px"})),Object(T.j)("firstRowFromBottom-expanded",Object(T.k)({bottom:"285px"})),Object(T.j)("firstRowFromBottom-expanded-maximized",Object(T.k)({bottom:"500px"})),Object(T.j)("secondRowFromBottom",Object(T.k)({bottom:"47px"})),Object(T.j)("thirdRowFromBottom",Object(T.k)({bottom:"104px"})),Object(T.j)("",Object(T.k)({bottom:"calc(285px)"})),Object(T.j)("secondRowFromBottom-expanded",Object(T.k)({bottom:"calc(285px + 52px)"})),Object(T.j)("thirdRowFromBottom-expanded",Object(T.k)({bottom:"calc(285px + 104px)"})),Object(T.l)("* => *",Object(T.e)("200ms"))]),Object(T.m)("mobileOffsetY",[Object(T.j)("low",Object(T.k)({bottom:"50px"})),Object(T.l)("* => *",Object(T.e)("200ms"))])],Object(T.m)("controlStateX",[Object(T.j)("left",Object(T.k)({left:"60px"})),Object(T.j)("right",Object(T.k)({left:"465px"})),Object(T.l)("* => *",Object(T.e)("200ms"))]),Object(T.m)("controlStateY",[Object(T.j)("close",Object(T.k)({})),Object(T.j)("firstRowFromBottom",Object(T.k)({bottom:"2px","margin-left":"0px"})),Object(T.j)("firstRowFromBottom-expanded",Object(T.k)({bottom:"285px","margin-left":"-55px"})),Object(T.j)("firstRowFromBottom-expanded-maximized",Object(T.k)({bottom:"500px","margin-left":"-55px"})),Object(T.l)("* => *",Object(T.e)("200ms"))]),Object(T.m)("mapStateX",[Object(T.j)("left",Object(T.k)({left:"0"})),Object(T.j)("right",Object(T.k)({left:"0"})),Object(T.l)("* => *",Object(T.e)("200ms"))]),Object(T.m)("mapStateY",[Object(T.j)("*",Object(T.k)({bottom:"0"})),Object(T.l)("* => *",Object(T.e)("200ms"))])]}});var qe=function e(){_classCallCheck(this,e)};qe.\u0275fac=function(e){return new(e||qe)},qe.\u0275mod=a.jc({type:qe}),qe.\u0275inj=a.ic({imports:[[u.c,m.b,h.b,c.f,l.O,l.Q]]});var We=function e(){_classCallCheck(this,e)};We.\u0275fac=function(e){return new(e||We)},We.\u0275mod=a.jc({type:We}),We.\u0275inj=a.ic({imports:[[c.f,u.c,ye.j,x.g,l.K,l.B,h.b,f.b,m.b,ve.b]]});var Ye=function e(){_classCallCheck(this,e)};Ye.\u0275fac=function(e){return new(e||Ye)},Ye.\u0275mod=a.jc({type:Ye}),Ye.\u0275inj=a.ic({imports:[[u.c,f.b,h.b,m.b,g.d,x.g,c.d,d.B,d.E,d.H,d.L.forRoot(),d.M.forRoot(),l.u,l.T,l.D,d.D,l.O,l.R,l.A,l.w,l.G,v.e,D,se,qe,de,P,b.j,b.k,l.E,l.F,l.K,We]]});var Le=n("1uah");function Ve(e,t){1&e&&a.mc(0,"igo-auth-form")}var Ne=function(){function e(t,n,a,o,i,s,r,c){_classCallCheck(this,e),this.languageService=t,this.configService=n,this.analyticsService=a,this.analyticsListenerService=o,this.renderer=i,this.titleService=s,this.metaService=r,this.messageService=c,this.themeClass="blue-theme",this.authConfig=this.configService.getConfig("auth"),this.readTitleConfig(),this.readThemeConfig(),this.readDescriptionConfig(),this.analyticsListenerService.listen(),this.detectOldBrowser()}return _createClass(e,[{key:"readTitleConfig",value:function(){var e=this;this.languageService.translate.get(this.configService.getConfig("title")).subscribe((function(t){t&&(e.titleService.setTitle(t),e.metaService.addTag({name:"title",content:t}))}))}},{key:"readThemeConfig",value:function(){var e=this.configService.getConfig("theme")||this.themeClass;e&&this.renderer.addClass(document.body,e)}},{key:"readDescriptionConfig",value:function(){var e=this.configService.getConfig("description");e&&this.metaService.addTag({name:"description",content:e})}},{key:"detectOldBrowser",value:function(){var e=this;if(Se.j.satisfies({ie:"<11",chrome:"<64",firefox:"<60"})){var t=this.languageService.translate,n=t.get("oldBrowser.title"),a=t.get("oldBrowser.message");Object(Le.a)(n,a).pipe(Object(L.a)((function(e){var t=_slicedToArray(e,2);return{title:t[0],message:t[1]}}))).subscribe((function(t){return e.messageService.alert(t.message,t.title,{timeOut:15e3})}))}}}]),e}();Ne.\u0275fac=function(e){return new(e||Ne)(a.lc(c.h),a.lc(c.c),a.lc(c.b),a.lc(v.a),a.lc(a.W),a.lc(i.g),a.lc(i.f),a.lc(c.m))},Ne.\u0275cmp=a.fc({type:Ne,selectors:[["app-root"]],decls:4,vars:1,consts:[["igoSpinnerActivity",""],[4,"ngIf"],["igoStopDropPropagation",""]],template:function(e,t){1&e&&(a.mc(0,"igo-spinner",0),a.mc(1,"igo-message-center"),a.ad(2,Ve,1,0,"igo-auth-form",1),a.mc(3,"app-portal",2)),2&e&&(a.Yb(2),a.Hc("ngIf",t.authConfig&&t.authConfig.url))},directives:[l.cb,l.bb,c.l,u.l,Ae,l.db,p.a],styles:["[_nghost-%COMP%]{font-family:Roboto,Helvetica Neue,sans-serif}igo-spinner[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;z-index:5}igo-message-center[_ngcontent-%COMP%]     simple-notifications   div.simple-notification-wrapper{right:10px}"]});var Ue=function e(){_classCallCheck(this,e)};Ue.\u0275fac=function(e){return new(e||Ue)},Ue.\u0275mod=a.jc({type:Ue,bootstrap:[Ne]}),Ue.\u0275inj=a.ic({providers:[Object(c.s)({default:o.igo,path:"./config/config.json"}),c.o,Object(d.mc)(),Object(d.kc)(),Object(d.jc)(),Object(d.ic)(),Object(d.lc)(),Object(d.pc)(),Object(d.oc)(),Object(d.nc)(),Object(d.hc)()],imports:[[i.a,r.b,s.d.forRoot([]),p.d.forRoot(),c.e.forRoot(),c.g,l.P,l.Q,Ye,i.e]]}),o.production&&Object(a.ob)(),i.h().bootstrapModule(Ue).catch((function(e){return console.log(e)}))}},[[0,0,5]]]);
//# sourceMappingURL=main-es5.048ebe5e184c5c21788b.js.map